System.register("chunks:///_virtual/architecture.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Architecture2.ts","./battle_model.ts","./player_model.ts","./mission_model.ts","./bag_model.ts"],(function(e){var t,n,i,o,r,c,s,l;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,i=e.log},function(e){o=e.Architecture},function(e){r=e.BattleModel},function(e){c=e.PlayerModel},function(e){s=e.MissionModel},function(e){l=e.BagModel}],execute:function(){n._RF.push({},"8df565QmpZMZIrTMpiHI3RN","architecture",void 0);e("QFArchitecture",function(e){function n(){return e.apply(this,arguments)||this}t(n,e);var o=n.prototype;return o.IocInjection=function(){i("游戏开始只注入必要模块"),this.RegisterModel(new c),this.RegisterModel(new r),this.RegisterModel(new s),this.RegisterModel(new l)},o.IocInjectionAfterGetPlayer=function(){i("getPlayer()后注入所有模块")},n}(o));n._RF.pop()}}}));

System.register("chunks:///_virtual/Architecture2.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventSystem.ts","./IOCContainer.ts","./Delegate.ts"],(function(t){var e,n,r,i,c,s,o,u;return{setters:[function(t){e=t.createClass,n=t.asyncToGenerator,r=t.regeneratorRuntime},function(t){i=t.cclegacy,c=t.log},function(t){s=t.EventSystem},function(t){o=t.IOCContainer},function(t){u=t.Delegate}],execute:function(){i._RF.push({},"64523+9tuNBD44y9j1L9NCd","Architecture",void 0),t("Architecture",function(){function t(){this.mContianer=new o,this.OnRegisterPatch=new u,this.mInited=!1,this.mModels=[],this.mSystems=[],this.mEventSystem=new s}t.MakeSureArchitecture=function(){if(!this.mArchitecture){var t;this.mArchitecture=new this;var e=this.mArchitecture.constructor.name;c("框架文件名"+e),this.mArchitecture.IocInjection(),null==(t=this.mArchitecture.OnRegisterPatch)||t.invoke(this.Interface),this.mArchitecture.mModels.forEach((function(t){t.Init()})),this.mArchitecture.mModels=[],this.mArchitecture.mSystems.forEach((function(t){t.Init()})),this.mArchitecture.mSystems=[],this.mArchitecture.mInited=!0}};var i=t.prototype;return i.RegisterModel=function(t){t.SetArchitecture(this);var e=t.constructor.prototype.__className;this.mContianer.Register(e,t),this.mInited?t.Init():this.mModels.push(t)},i.GetModel=function(t){var e=t.prototype.__classType.prototype.__className;return this.mContianer.Get(e)},i.RegisterSystem=function(t){t.SetArchitecture(this);var e=t.constructor.prototype.__className;this.mContianer.Register(e,t)},i.GetSystem=function(t){var e=t.prototype.__classType.prototype.__className;return this.mContianer.Get(e)},i.SendCommand=function(){var t=n(r().mark((function t(e){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.SetArchitecture(this),t.next=3,e.Execute();case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),i.SendEvent=function(){var t=n(r().mark((function t(e,n){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===n&&(n=null),t.next=3,this.mEventSystem.Send(e,n);case 3:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}(),i.RegisterEvent=function(t,e,n){return void 0===n&&(n=null),this.mEventSystem.Register(t,e,n)},i.UnRegisterEvent=function(t,e,n){void 0===n&&(n=null),this.mEventSystem.UnRegister(t,e,n)},i.UnRegisterEventByTarget=function(t){this.mEventSystem.UnRegisterByTarget(t)},i.IocInjection=function(){},e(t,null,[{key:"Interface",get:function(){return this.mArchitecture||this.MakeSureArchitecture(),this.mArchitecture}}]),t}()).mArchitecture=void 0,i._RF.pop()}}}));

System.register("chunks:///_virtual/ArrayUtil.ts",["cc"],(function(r){var n;return{setters:[function(r){n=r.cclegacy}],execute:function(){n._RF.push({},"75266hBYBlNYIb847jZ3eWT","ArrayUtil",void 0);r("ArrayUtil",function(){function r(){}return r.noRepeated=function(r){for(var n=[r[0]],t=1;t<r.length;t++){for(var e=!1,o=0;o<n.length;o++)if(r[t]==n[o]){e=!0;break}e||n.push(r[t])}return n},r.copy2DArray=function(r){for(var n=[],t=0;t<r.length;t++)n.push(r[t].concat());return n},r.fisherYatesShuffle=function(r){for(var n=r.length;n;){var t=Math.floor(Math.random()*n--),e=r[n];r[n]=r[t],r[t]=e}return r},r.confound=function(r){return r.slice().sort((function(){return Math.random()-.5}))},r.flattening=function(r){for(;r.some((function(r){return Array.isArray(r)}));)r=[].concat.apply([],r);return r},r.removeItem=function(r,n){for(var t=r.concat(),e=0;e<t.length;e++){if(n==t[e]){r.splice(e,1);break}}},r.combineArrays=function(r,n){return[].concat(r,n)},r.getRandomValueInArray=function(r){return r[Math.floor(Math.random()*r.length)]},r.isValidArray=function(r){return Array.isArray(r)&&r.length>0},r.groupBy=function(r,n){return r.reduce((function(r,t){var e=String(t[n]);return r[e]||(r[e]=[]),r[e].push(t),r}),{})},r.arrayToMap=function(r,n){return r.reduce((function(r,t){return r[String(t[n])]=t,r}),{})},r}());n._RF.pop()}}}));

System.register("chunks:///_virtual/AudioEffect.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Hope.ts"],(function(e){var t,s,i,r,c,o,n,f;return{setters:[function(e){t=e.inheritsLoose,s=e.createClass},function(e){i=e.cclegacy,r=e._decorator,c=e.AudioClip,o=e.error,n=e.AudioSource},function(e){f=e.hope}],execute:function(){var u;i._RF.push({},"e52d2ysY1BEbpcT2Cz0Wwss","AudioEffect",void 0);var a=r.ccclass;e("AudioEffect",a("AudioEffect")(u=function(e){function i(){for(var t,s=arguments.length,i=new Array(s),r=0;r<s;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))||this).effects=new Map,t._progress=0,t}t(i,e);var r=i.prototype;return r.load=function(e,t,s){var i=this;if(null==s&&(s=f.res.defaultBundleName),e instanceof c)this.effects.set(e.uuid,{source:!0,ac:e}),this.playOneShot(e,this.volume),t&&t();else if(0==this.effects.has(e))f.res.load(s,e,c,(function(r,c){if(r)o(r);else{var n=s+":"+e;i.effects.set(n,{source:!1,bundle:s,path:e,ac:c}),i.playOneShot(c,i.volume),t&&t()}}));else{var r=this.effects.get(e);this.playOneShot(r.ac,this.volume),t&&t()}},r.releaseAll=function(){for(var e in this.effects){var t=this.effects.get(e);t.source?this.release(t.ac):this.release(t.path,t.bundle)}this.effects.clear()},r.release=function(e,t){null==t&&(t=f.res.defaultBundleName);var s=void 0;if(e instanceof c)s=e,this.effects.has(s.uuid)&&(this.effects.delete(s.uuid),s.decRef());else{var i=t+":"+e,r=this.effects.get(i);r&&(this.effects.delete(i),f.res.release(r.path,r.bundle))}},s(i,[{key:"progress",get:function(){return this.duration>0&&(this._progress=this.currentTime/this.duration),this._progress},set:function(e){this._progress=e,this.currentTime=e*this.duration}}]),i}(n))||u);i._RF.pop()}}}));

System.register("chunks:///_virtual/AudioManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AudioEffect.ts","./AudioMusic.ts","./Hope.ts"],(function(t){var s,i,e,c,u,o,f;return{setters:[function(t){s=t.inheritsLoose,i=t.createClass},function(t){e=t.cclegacy,c=t.Component},function(t){u=t.AudioEffect},function(t){o=t.AudioMusic},function(t){f=t.hope}],execute:function(){e._RF.push({},"252f0z+vPNL8Y/jsLYmomtw","AudioManager",void 0);var h="game_audio";t("AudioManager",function(t){function e(){for(var s,i=arguments.length,e=new Array(i),c=0;c<i;c++)e[c]=arguments[c];return(s=t.call.apply(t,[this].concat(e))||this).music=null,s.effect=null,s.local_data={},s._volume_music=1,s._volume_effect=1,s._switch_music=!0,s._switch_effect=!0,s}s(e,t);var c=e.prototype;return c.setMusicComplete=function(t){void 0===t&&(t=null),this.music.onComplete=t},c.playMusic=function(t,s,i){this._switch_music&&(this.music.loop=!1,this.music.load(t,s,i))},c.playMusicLoop=function(t,s){this._switch_music&&(this.music.loop=!0,this.music.load(t,null,s))},c.stopMusic=function(){this._switch_music&&this.music.playing&&this.music.stop()},c.playEffect=function(t,s,i){this._switch_effect&&this.effect.load(t,s,i)},c.releaseEffect=function(t,s){this.effect.release(t,s)},c.resumeAll=function(){this.music&&(!this.music.playing&&this.music.progress>0&&this.music.play(),!this.effect.playing&&this.effect.progress>0&&this.effect.play())},c.pauseAll=function(){this.music&&(this.music.playing&&this.music.pause(),this.effect.playing&&this.effect.pause())},c.stopAll=function(){this.music&&(this.music.stop(),this.effect.stop())},c.save=function(){this.local_data.volume_music=this._volume_music,this.local_data.volume_effect=this._volume_effect,this.local_data.switch_music=this._switch_music,this.local_data.switch_effect=this._switch_effect,f.storage.set(h,this.local_data)},c.load=function(){if(this.music=this.getComponent(o)||this.addComponent(o),this.effect=this.getComponent(u)||this.addComponent(u),this.local_data=f.storage.getJson(h),this.local_data)try{this.setState()}catch(t){this.setStateDefault()}else this.setStateDefault();this.music&&(this.music.volume=this._volume_music),this.effect&&(this.effect.volume=this._volume_effect)},c.setState=function(){this._volume_music=this.local_data.volume_music,this._volume_effect=this.local_data.volume_effect,this._switch_music=this.local_data.switch_music,this._switch_effect=this.local_data.switch_effect},c.setStateDefault=function(){this.local_data={},this._volume_music=1,this._volume_effect=1,this._switch_music=!0,this._switch_effect=!0},i(e,[{key:"progressMusic",get:function(){return this.music.progress},set:function(t){this.music.progress=t}},{key:"volumeMusic",get:function(){return this._volume_music},set:function(t){this._volume_music=t,this.music.volume=t}},{key:"switchMusic",get:function(){return this._switch_music},set:function(t){this._switch_music=t,0==t&&this.music.stop()}},{key:"volumeEffect",get:function(){return this._volume_effect},set:function(t){this._volume_effect=t,this.effect.volume=t}},{key:"switchEffect",get:function(){return this._switch_effect},set:function(t){this._switch_effect=t,0==t&&this.effect.stop()}}]),e}(c));e._RF.pop()}}}));

System.register("chunks:///_virtual/AudioMusic.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,s,n,i,r,u,l,o;return{setters:[function(e){t=e.inheritsLoose,s=e.createClass,n=e.asyncToGenerator,i=e.regeneratorRuntime},function(e){r=e.cclegacy,u=e._decorator,l=e.AudioSource,o=e.AudioClip}],execute:function(){var a;r._RF.push({},"5c1f3kqGetBiIv48/CvuaQv","AudioMusic",void 0);var h=u.ccclass;u.menu,e("AudioMusic",h("AudioMusic")(a=function(e){function r(){for(var t,s=arguments.length,n=new Array(s),i=0;i<s;i++)n[i]=arguments[i];return(t=e.call.apply(e,[this].concat(n))||this).onComplete=null,t._progress=0,t._isLoading=!1,t._bundleName=null,t._url=null,t._bundleName_next=null,t._url_next=null,t}t(r,e);var u=r.prototype;return u.load=function(){var e=n(i().mark((function e(t,s,n){var r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==n&&(n=oops.res.defaultBundleName),!this._isLoading){e.next=5;break}return this._bundleName_next=n,this._url_next=t,e.abrupt("return");case 5:return this._isLoading=!0,e.next=8,oops.res.loadAsync(n,t,o);case 8:(r=e.sent)&&(this._isLoading=!1,null!=this._url_next?(this.release(),this.load(this._url_next,s,this._bundleName_next),this._bundleName_next=this._url_next=null):(s&&s(),this.playPrepare(n,t,r)));case 10:case"end":return e.stop()}}),e,this)})));return function(t,s,n){return e.apply(this,arguments)}}(),u.playPrepare=function(e,t,s){this.playing&&this.stop(),this.release(),this.enabled=!0,this.clip=s,this.play(),this._bundleName=e,this._url=t},u.update=function(e){0==this.playing&&0==this.progress&&(this.enabled=!1,this.clip=null,this._bundleName=this._url=null,this.onComplete&&this.onComplete())},u.release=function(){this._url&&(this.stop(),this.clip=null,oops.res.release(this._url,this._bundleName)),this._bundleName=this._url=null},s(r,[{key:"progress",get:function(){return this.duration>0&&(this._progress=this.currentTime/this.duration),this._progress},set:function(e){this._progress=e,this.currentTime=e*this.duration}}]),r}(l))||a);r._RF.pop()}}}));

System.register("chunks:///_virtual/Badge.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i,n,o,r,s,a,c,l,u,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized,r=t.createClass},function(t){s=t.cclegacy,a=t._decorator,c=t.Enum,l=t.Label,u=t.Vec3,p=t.Sprite}],execute:function(){var h,f,g,T,d,P,b,y;s._RF.push({},"bac76ow94VI+IpAB1DQUKfq","Badge",void 0);var v=a.ccclass,_=a.property,w=t("Position",function(t){return t[t.TOP_LEFT=0]="TOP_LEFT",t[t.TOP_RIGHT=1]="TOP_RIGHT",t}({}));c(w);t("Badge",(h=v("Badge"),f=_({tooltip:"内容"}),g=_({type:w,tooltip:"位置\n 0: 左上角 \n 1: 右上角"}),h(((y=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r))||this,n(e,"string",P,o(e)),n(e,"position",b,o(e)),e.label=null,e}i(e,t);var s=e.prototype;return s.onLoad=function(){this.label=this.node.getComponentInChildren(l),this.setPosition(this.position)},s.setPosition=function(t){var e=this.node.parent.uiTransform.contentSize;switch(t){case w.TOP_LEFT:var i=-e.width/2,n=e.height/2;this.node.setPosition(new u(i,n,0));break;case w.TOP_RIGHT:var o=e.width/2,r=e.height/2;this.node.setPosition(new u(o,r,0))}},s.setText=function(t){this.label&&(this.label.string=t)},r(e,[{key:"text",get:function(){return this.string},set:function(t){this.string=t,this.setText(t)}}]),e}(p)).POSITION=void 0,P=e((d=y).prototype,"string",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"6"}}),b=e(d.prototype,"position",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return w.TOP_LEFT}}),T=d))||T));s._RF.pop()}}}));

System.register("chunks:///_virtual/bag_ctrl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseCtrl.ts","./bag_model.ts","./bag_item_cell.ts","./Hope.ts","./battle_model.ts","./event_game.ts"],(function(e){var t,o,l,r,n,i,a,s,c,h,g,d;return{setters:[function(e){t=e.inheritsLoose},function(e){o=e.cclegacy,l=e.instantiate,r=e.warn,n=e.NodePool},function(e){i=e.BaseCtrl},function(e){a=e.BagModel,s=e.CELL_TID_DIAMOND},function(e){c=e.BagItemCell},function(e){h=e.hope},function(e){g=e.BattleModel},function(e){d=e.GameEvent}],execute:function(){o._RF.push({},"6bb001ktKNKea9EaEcMoPl7","bag_ctrl",void 0);e("BagCtrl",function(e){function o(){for(var t,o=arguments.length,l=new Array(o),r=0;r<o;r++)l[r]=arguments[r];return(t=e.call.apply(e,[this].concat(l))||this).poolCell=new n("CellPool"),t}t(o,e);var i=o.prototype;return i.onLoad=function(){for(var e=this,t=0;t<h.config.tables.TbNormalStore.getDataList().length+5;t++){var o=l(this.view.prefabBagItemCell);this.poolCell.put(o)}this.view.toggleContainer.toggleItems.forEach((function(t,o){t.node.on("toggle",(function(t){e.onToggleClick(o,t)}),e)})),this.refreshNormal()},i.onDestroy=function(){this.poolCell.clear()},i.onToggleClick=function(e,t){if(r(e+" toggle isChecked "+t.isChecked),t.isChecked)switch(e){case 0:this.refreshNormal();break;case 1:this.refreshFactory();break;case 2:this.refreshMaterial()}},i.refreshNormal=function(){var e=this,t=this.GetModel(a).normalBagOpenIndex,o=t;o<h.config.tables.TbNormalStore.getDataList().length&&(o+=1),this.setGridCount(o),r(o+" - "+t,this.GetModel(a).normalBag);for(var l=function(){var t=e.GetModel(a).normalBag[n],o=e.view.nodeGrid.children[n].getComponent(c);o.refreshNormal(null==t?void 0:t.cellId),o.node.active=!0,o.cb=function(){e.removeBag(0,null==t?void 0:t.cellId),e.refreshNormal()}},n=0;n<t;n++)l();if(o>t){var i=this.view.nodeGrid.children[o-1].getComponent(c);i.refreshNormal(null,!0),i.node.active=!0,i.cb=function(){r("解锁");var o=h.config.tables.TbNormalStore.get(t+1);h.gui.tip.alert("是否花费 "+o.needCell.count+" 钻石解锁",(function(){e.GetModel(a).diamond<o.needCell.count?h.gui.toast("钻石不够"):(e.GetModel(a).reqUnlockNormalBag(),e.GetModel(a).removeBag(s,o.needCell.count),e.refreshNormal(),h.message.dispatchEvent(d.BattleRefreshUI))}),"购买格子","购买")}}},i.refreshFactory=function(){var e=this,t=h.config.tables.TbFactoryStore.getDataList();this.setGridCount(t.length);for(var o=function(o){var l=e.view.nodeGrid.children[o].getComponent(c),r=e.GetModel(a).factoryBag[o];l.refreshFactory(t[o].storeCell,!0,!(null==r||!r.cellId)),l.node.active=!0,l.cb=function(){e.removeBag(1,t[o].storeCell),e.refreshFactory()}},l=0;l<t.length;l++)o(l)},i.refreshMaterial=function(){var e=this,t=h.config.tables.TbMaterialStore.getDataList();this.setGridCount(t.length);for(var o=function(o){var l=e.view.nodeGrid.children[o].getComponent(c),r=e.GetModel(a).materialBag[o];l.refreshMaterial(t[o].storeCell,!0,null==r?void 0:r.count),l.node.active=!0,l.cb=function(){e.removeBag(2,t[o].storeCell),e.refreshMaterial()}},l=0;l<t.length;l++)o(l)},i.removeBag=function(e,t){if(0==e);else if(1==e)return;var o=this.GetModel(g).getAllEmptyCells();t&&o.length>0?this.GetModel(a).removeBag(t,1)&&h.message.dispatchEvent(d.BattleSetCell,{gridCellData:o[0],cellTid:t}):t?h.gui.toast("没有位置了"):r("点击空了")},i.setGridCount=function(e){var t=this.view.nodeGrid.children.length;if(t<e)for(var o=0;o<e-t;o++){var l=this.poolCell.get();l.active=!1,l.parent=this.view.nodeGrid}else for(var r=0;r<t-e;r++)this.poolCell.put(this.view.nodeGrid.children[r])},o}(i));o._RF.pop()}}}));

System.register("chunks:///_virtual/bag_item_cell.ts",["./rollupPluginModLoBabelHelpers.js","cc","./cell_base.ts","./ViewUtil.ts"],(function(e){var t,i,l,o,c,n,a,r,s,u,p,h,m;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,l=e.initializerDefineProperty,o=e.assertThisInitialized,c=e.createClass},function(e){n=e.cclegacy,a=e._decorator,r=e.Node,s=e.Label,u=e.Button,p=e.Component},function(e){h=e.CellBase},function(e){m=e.ViewUtil}],execute:function(){var d,b,C,v,f,g,k,B,y,I,_,w,L,z,Q;n._RF.push({},"ac26fZUwPNPgblJd3B2BlgX","bag_item_cell",void 0);var P=a.ccclass,D=a.property;e("BagItemCell",(d=P("BagItemCell"),b=D(h),C=D(h),v=D(r),f=D(r),g=D(s),k=D(u),d((I=t((y=function(e){function t(){for(var t,i=arguments.length,c=new Array(i),n=0;n<i;n++)c[n]=arguments[n];return t=e.call.apply(e,[this].concat(c))||this,l(t,"comptCell",I,o(t)),l(t,"comptCellBack",_,o(t)),l(t,"nodeImgLock",w,o(t)),l(t,"nodeImgQuest",L,o(t)),l(t,"labelCount",z,o(t)),l(t,"btn",Q,o(t)),t._cb=void 0,t}i(t,e);var n=t.prototype;return n.onLoad=function(){m.registerButtonClick(this.btn,this.onClick,this)},n.refreshNormal=function(e,t){void 0===t&&(t=!1),this.comptCell.node.active=!!e,this.comptCell.node.active&&this.comptCell.refresh(e),this.comptCellBack.node.active=!1,this.nodeImgQuest.active=!1,this.nodeImgLock.active=t,this.labelCount.node.active=!1},n.refreshFactory=function(e,t,i){void 0===t&&(t=!0),void 0===i&&(i=!0),this.comptCellBack.node.active=t,this.comptCellBack.node.active&&(this.comptCellBack.node.opacity=127.5,this.comptCellBack.refresh(e)),this.comptCell.node.active=i,this.comptCell.node.active&&this.comptCell.refresh(e),this.nodeImgQuest.active=!t,this.nodeImgLock.active=!1,this.labelCount.node.active=!1},n.refreshMaterial=function(e,t,i){void 0===t&&(t=!0),void 0===i&&(i=0),this.comptCellBack.node.active=t,this.comptCellBack.node.active&&(this.comptCellBack.node.opacity=127.5,this.comptCellBack.refresh(e)),this.comptCell.node.active=i>0,this.comptCell.node.active&&this.comptCell.refresh(e),this.nodeImgQuest.active=!t,this.nodeImgLock.active=!1,this.labelCount.node.active=!0,this.labelCount.string=i.toString()},n.onClick=function(){this._cb&&this._cb()},c(t,[{key:"cb",set:function(e){this._cb=e}}]),t}(p)).prototype,"comptCell",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=t(y.prototype,"comptCellBack",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=t(y.prototype,"nodeImgLock",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=t(y.prototype,"nodeImgQuest",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=t(y.prototype,"labelCount",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Q=t(y.prototype,"btn",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=y))||B));n._RF.pop()}}}));

System.register("chunks:///_virtual/bag_model.ts",["./rollupPluginModLoBabelHelpers.js","cc","./IModel.ts","./Hope.ts","./player_model.ts"],(function(t){var e,r,n,a,o,i,u,l;return{setters:[function(t){e=t.inheritsLoose,r=t.createClass},function(t){n=t.cclegacy,a=t.warn},function(t){o=t.ModelDecorator,i=t.AbstractModel},function(t){u=t.hope},function(t){l=t.PlayerModel}],execute:function(){var c;n._RF.push({},"7ccb5L/JZBKWaZFcnkAEG+0","bag_model",void 0);t("BAG_TYPE_OTHER","W88");var d=t("CELL_TID_GOLD","I400001"),f=t("CELL_TID_POWER","I400003"),s=t("CELL_TID_DIAMOND","I400002"),g=t("CELL_TYPE_OTHER_STORE","L006"),h=t("CELL_TYPE_BUBBLE","L006");t("CELL_TYPE_METERIAL_STORE","L003"),t("BagModel",o("BagModel")(c=function(t){function n(){for(var e,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))||this)._player=void 0,e}e(n,t);var o=n.prototype;return o.OnInit=function(){},o.addReward=function(t,e){var r=u.config.tables.TbCell.get(t);if(!r)return a(t+" add bag, but not found"),!1;if(r.type===g)return this.addItemToStore(this.player.data.bag.otherStore,t,e);if(r.type===h)return this.addBag(t,e);e>1&&u.gui.toast(t+" add reward, but count > 1");for(var n=0;n<e;n++)this.player.data.bag.rewardStore.push({cellId:t,count:1})},o.removeReward=function(t){var e=this.rewardBag.find((function(e){return e.cellId===t}));if(e){var r=this.rewardBag.indexOf(e);return this.rewardBag.splice(r,1),!0}return a(t+" remove reward from store, but not found"),!1},o.getNormalBagEmpty=function(){for(var t=0;t<this.normalBagOpenIndex;t++)this.normalBag[t]||this.normalBag.push({cellId:"",count:0});return this.normalBag.filter((function(t){return""===t.cellId}))},o.addBag=function(t,e){var r=this,n=u.config.tables.TbCell.get(t);if(!n)return a(t+" add bag, but not found"),!1;if(n.type===g)return this.addItemToStore(this.player.data.bag.otherStore,t,e);if(u.config.tables.TbFactoryStore.getDataList().some((function(e){return e.storeCell==t&&e.needLevel<=r.player.levelInfo.level})))return this.addItemToStore(this.player.data.bag.factoryStore,t,e);if(u.config.tables.TbMaterialStore.getDataList().some((function(e){return e.storeCell==t})))return this.addItemToStore(this.player.data.bag.materialStore,t,e);var o=this.getNormalBagEmpty();return o.length>0?(o[0].cellId=t,o[0].count=e,!0):(a(t+" add normal bag, but not found"),!1)},o.addItemToStore=function(t,e,r){var n=t.find((function(t){return t.cellId===e})),o=u.config.tables.TbCell.get(e);if(n)n.count+=r;else{if(null==o)return a(e+" add item to store, but not found"),!1;t.push({cellId:e,count:r})}return!0},o.removeBags=function(t){var e=this;return!!this.haveBags(t)&&t.every((function(t){return e.removeBag(t.id,t.count)}))},o.removeBag=function(t,e){var r=u.config.tables.TbCell.get(t);if(!r)return a(t+" remove bag, but not found"),!1;if(r.type===g)return this.removeItemFromStore(this.player.data.bag.otherStore,t,e);if(this.factoryBag.some((function(e){return e.cellId==t})))return this.removeItemFromStore(this.player.data.bag.factoryStore,t,e);if(this.materialBag.some((function(e){return e.cellId==t})))return this.removeItemFromStore(this.materialBag,t,e);var n=this.normalBag.find((function(e){return e.cellId==t}));if(n){if(n.count>e)return n.count-=e,!0;if(n.count===e)return n.cellId="",n.count=0,!0}return a(t+" want remove bag, but not found"),!1},o.haveBags=function(t){var e=this;return t.every((function(t){return e.haveBag(t.id,t.count)}))},o.haveBag=function(t,e){var r=u.config.tables.TbCell.get(t);if(!r)return a(t+" remove bag, but not found"),!1;if(r.type===g)return this.haveItemFromStore(this.player.data.bag.otherStore,t,e);if(this.factoryBag.some((function(e){return e.cellId==t})))return this.haveItemFromStore(this.player.data.bag.factoryStore,t,e);if(this.materialBag.some((function(e){return e.cellId==t})))return this.haveItemFromStore(this.materialBag,t,e);var n=this.normalBag.find((function(e){return e.cellId==t}));return!!(n&&n.count>=e)},o.removeItemFromStore=function(t,e,r){var n=t.find((function(t){return t.cellId===e}));if(n){if(n.count>r)n.count-=r;else{if(n.count!==r)return a(e+" remove count is greater than available count"),!1;var o=t.indexOf(n);t.splice(o,1)}return!0}return a(e+" remove item from store, but not found"),!1},o.haveItemFromStore=function(t,e,r){var n=t.find((function(t){return t.cellId===e}));return n?n.count>=r||(a(e+" remove count is greater than available count"),!1):(a(e+" remove item from store, but not found"),!1)},o.reqUnlockNormalBag=function(){this.player.data.bag.normalStoreOpenIndex++,this.player.data.bag.normalStore.push({cellId:"",count:0})},r(n,[{key:"player",get:function(){return this._player||(this._player=this.GetModel(l)),this._player}},{key:"gold",get:function(){var t,e;return null!=(t=null==(e=this.player.data.bag.otherStore.find((function(t){return t.cellId===d})))?void 0:e.count)?t:0}},{key:"diamond",get:function(){var t,e;return null!=(t=null==(e=this.player.data.bag.otherStore.find((function(t){return t.cellId===s})))?void 0:e.count)?t:0}},{key:"power",get:function(){var t,e;return null!=(t=null==(e=this.player.data.bag.otherStore.find((function(t){return t.cellId===f})))?void 0:e.count)?t:0}},{key:"normalBagOpenIndex",get:function(){return this.player.data.bag.normalStoreOpenIndex}},{key:"normalBag",get:function(){return this.player.data.bag.normalStore||[]}},{key:"factoryBag",get:function(){return this.player.data.bag.factoryStore||[]}},{key:"materialBag",get:function(){return this.player.data.bag.materialStore||[]}},{key:"rewardBag",get:function(){return this.player.data.bag.rewardStore||[]}}]),n}(i))||c);n._RF.pop()}}}));

System.register("chunks:///_virtual/bag.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseView.ts","./bag_ctrl.ts"],(function(e){var r,t,n,i,a,o,l,u,c,p,s,g,f;return{setters:[function(e){r=e.applyDecoratedDescriptor,t=e.inheritsLoose,n=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){a=e.cclegacy,o=e._decorator,l=e.ToggleContainer,u=e.Prefab,c=e.Node,p=e.warn},function(e){s=e.BindCtrl,g=e.BaseView},function(e){f=e.BagCtrl}],execute:function(){var b,d,y,B,w,C,h,m,v,z;a._RF.push({},"9ea055bMNZGKbmC5wk9zgnM","bag",void 0);var _=o.ccclass,D=o.property;e("Bag",(b=_("Bag"),d=s(f),y=D(l),B=D(u),w=D(c),b(C=d((m=r((h=function(e){function r(){for(var r,t=arguments.length,a=new Array(t),o=0;o<t;o++)a[o]=arguments[o];return r=e.call.apply(e,[this].concat(a))||this,n(r,"toggleContainer",m,i(r)),n(r,"prefabBagItemCell",v,i(r)),n(r,"nodeGrid",z,i(r)),r}return t(r,e),r.prototype.onAdded=function(e){p("++++++++++",e)},r}(g)).prototype,"toggleContainer",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=r(h.prototype,"prefabBagItemCell",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=r(h.prototype,"nodeGrid",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=h))||C)||C));a._RF.pop()}}}));

System.register("chunks:///_virtual/BaseCtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./architecture.ts","./IController.ts"],(function(t){var e,r,n,c,i;return{setters:[function(t){e=t.inheritsLoose,r=t.createClass},function(t){n=t.cclegacy},function(t){c=t.QFArchitecture},function(t){i=t.AbstractController}],execute:function(){n._RF.push({},"151dec1YR9M6oV6BpTSKTSP","BaseCtrl",void 0);t("BaseCtrl",function(t){function n(){for(var e,r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))||this)._view=void 0,e}e(n,t);var i=n.prototype;return i.bindView=function(t){this._view=t},i.GetArchitecture=function(){return c.Interface},r(n,[{key:"view",get:function(){return this._view}}]),n}(i));n._RF.pop()}}}));

System.register("chunks:///_virtual/BaseView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameComponent.ts"],(function(t){var n,r,i,c;return{setters:[function(t){n=t.inheritsLoose,r=t.createClass},function(t){i=t.cclegacy},function(t){c=t.GameComponent}],execute:function(){t("BindCtrl",(function(t){return function(r){return function(r){function i(){for(var n,i=arguments.length,c=new Array(i),e=0;e<i;e++)c[e]=arguments[e];return(n=r.call.apply(r,[this].concat(c))||this).manualBindCtrl(t),n}return n(i,r),i}(r)}})),i._RF.push({},"cdf73ry2EJGC5p6SWirVign","BaseView",void 0);t("BaseView",function(t){function i(){for(var n,r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return(n=t.call.apply(t,[this].concat(i))||this)._ctrl=void 0,n}n(i,t);var c=i.prototype;return c.onLoad=function(){this._ctrl&&this._ctrl.onLoad&&this._ctrl.onLoad()},c.start=function(){this._ctrl&&this._ctrl.start&&this._ctrl.start()},c.update=function(t){this._ctrl&&this._ctrl.update&&this._ctrl.update(t)},c.onDestroy=function(){this._ctrl&&this._ctrl.onDestroy&&this._ctrl.onDestroy(),t.prototype.onDestroy.call(this)},c.manualBindCtrl=function(t){if(!this._ctrl){var n=new t;this._ctrl=n,n.bindView(this)}},r(i,[{key:"ctrl",get:function(){return this._ctrl},set:function(t){this._ctrl=t}}]),i}(c));i._RF.pop()}}}));

System.register("chunks:///_virtual/battle_ctrl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Hope.ts","./ViewUtil.ts","./Drag.ts","./cell.ts","./cell_bg.ts","./battle_model.ts","./event_game.ts","./config_game_ui.ts","./mission_model.ts","./mission_item.ts","./bag_model.ts","./BaseCtrl.ts","./player_model.ts","./TimeUtils.ts"],(function(e){var t,i,l,s,n,o,r,a,c,h,d,u,f,C,g,p,v,m,M,b,w,y,G,k,B,x,T,I,_,D,S,L,A,N;return{setters:[function(e){t=e.inheritsLoose,i=e.asyncToGenerator,l=e.regeneratorRuntime,s=e.createForOfIteratorHelperLoose},function(e){n=e.cclegacy,o=e.Size,r=e.warn,a=e.instantiate,c=e.Vec3,h=e.log,d=e.error,u=e.tween,f=e.NodePool},function(e){C=e.hope},function(e){g=e.ViewUtil},function(e){p=e.Drag},function(e){v=e.Cell},function(e){m=e.CellBg},function(e){M=e.COLUMN_NUM,b=e.ROW_NUM,w=e.BattleModel,y=e.CellType,G=e.SwapType,k=e.DirectionsFour},function(e){B=e.GameEvent},function(e){x=e.UIID},function(e){T=e.MissionModel},function(e){I=e.MissionItem},function(e){_=e.BagModel,D=e.CELL_TID_POWER,S=e.CELL_TID_DIAMOND},function(e){L=e.BaseCtrl},function(e){A=e.PlayerModel},function(e){N=e.TimeUtil}],execute:function(){n._RF.push({},"f1307Y8kv1NOKlrK2yeJroz","battle_ctrl",void 0);e("BattleCtrl",function(e){function n(){for(var t,i=arguments.length,l=new Array(i),s=0;s<i;s++)l[s]=arguments[s];return(t=e.call.apply(e,[this].concat(l))||this).cellCompts=[],t.poolCell=new f("CellPool"),t.sizeCell=void 0,t.mapMission=new Map,t._recoverTime=0,t}t(n,e);var L=n.prototype;return L.onLoad=function(){this.cellCompts=Array.from({length:M},(function(){return Array(b).fill(null)}));var e=this.view.nodeGird.h/b,t=this.view.nodeGird.w/M,i=e<t?e:t;this.sizeCell=new o(t,t),r(this.view.nodeGird.size,t,e,i);for(var l=0;l<this.GetModel(w).map.data.length;l++){var s=this.GetModel(w).map.data[l],n=a(this.view.prefabCellBg);n.size=this.sizeCell,n.getComponent(m).refresh(s),this.view.nodeGirdBg.addChild(n),n.position=new c(t*s.x+t/2,t*-s.y-t/2,0);var h=a(this.view.prefabCell);h.size=this.sizeCell;var d=h.getComponent(v);d.refresh({cell:s,unlockLevel:this.GetModel(w).checkLevelLock(s)}),this.view.nodeGird.addChild(h),h.position=new c(t*s.x+t/2,t*-s.y-t/2,0),this.cellCompts[s.x][s.y]=d;var u=d.getComponent(p);u.clickCallback=this.onDragClick.bind(this),u.dragMoveCallback=this.onDragMove.bind(this),u.checkSucceedCallback=this.onDragSucceedCheck.bind(this),u.checkDragCallback=this.onDragCheck.bind(this),u.succeedCallback=this.onDragSucceed.bind(this)}for(var f=0;f<5;f++){var C=a(this.view.prefabCell);C.size=this.sizeCell,this.poolCell.put(C)}this.refreshUI(),this.addEvent()},L.update=function(e){this.GetModel(_).power<C.config.tables.TbConfig.defaultLimit&&(this._recoverTime+=e,this._recoverTime>=C.config.tables.TbConfig.defaultRecoverTime&&(this.GetModel(_).addBag(D,1),this._recoverTime=0,this.refreshTop()))},L.addEvent=function(){var e=this;g.registerButtonClick(this.view.btnMap,(function(){C.gui.open(x.Map),C.gui.removeByNode(e.view.node)}),this),g.registerButtonClick(this.view.btnSell,this.onBtnSellClick,this),g.registerButtonClick(this.view.btnAd,this.onBtnAdClick,this),g.registerButtonClick(this.view.btnDiamond,this.onBtnDiamondClick,this),g.registerButtonClick(this.view.btnBag,this.onBtnBagClick,this),g.registerButtonClick(this.view.btnRewardStore,this.onBtnRewardStoreClick,this),g.registerButtonClick(this.view.btnLevel,(function(){e.GetModel(A).data.exp+=10,e.refreshTop()}),this),C.message.on(B.BattleCellCountdownFinish,this.onHandler,this),C.message.on(B.BattleMissionClickFinish,this.onHandler,this),C.message.on(B.BattleSetCell,this.onHandler,this),C.message.on(B.BattleRefreshUI,this.refreshUI,this)},L.removeEvent=function(){C.message.offAllByObject(this)},L.onDestroy=function(){this.removeEvent(),this.poolCell.clear()},L.onHandler=function(e,t){switch(e){case B.BattleCellCountdownFinish:r("-----泡泡破了-----",t),this.onCellCountdownFinish(t);break;case B.BattleMissionClickFinish:r("-----完成任务-----",t),this.missionFinish(t);break;case B.BattleSetCell:r("-----设置cell-----",t),this.setCell(t.gridCellData,t.cellTid)}},L.refreshUI=function(){this.refreshTop(),this.refreshMission(),this.refreshBottom()},L.refreshTop=function(){this.view.labelLevel.string=""+this.GetModel(A).levelInfo.level,this.view.labelExp.string=this.GetModel(A).levelInfo.currentExp+"/"+this.GetModel(A).levelInfo.nextLevelExp,this.view.labelDiamond.string=""+this.GetModel(_).diamond,this.view.labelGold.string=""+this.GetModel(_).gold,this.view.labelPower.string=""+this.GetModel(_).power},L.refreshBottom=function(){var e=this.GetModel(w).selectCell;if(e){var t=C.config.tables.TbCell.get(e.cellId);this.view.labelBottomInfo.string=t.name+"-"+e.x+"-"+e.y,this.view.btnAd.node.active=!!t.bubbleId,this.view.btnDiamond.node.active=!!t.bubbleId||e.countdown>=0,this.view.btnSell.node.active=!t.factoryId&&!t.bubbleId&&e.active&&!!t.sellCell,this.view.btnInfo.node.active=!0}else this.view.labelBottomInfo.string="",this.view.btnAd.node.active=!1,this.view.btnDiamond.node.active=!1,this.view.btnSell.node.active=!1,this.view.btnInfo.node.active=!1},L.refreshMission=function(){var e=this;this.GetModel(T).refreshMission();var t=this.GetModel(T).getTbMissionsGroupByType(),i=this.GetModel(T).getDoingMissionTypes();for(var l in t)if(i.includes(l)){if(!this.mapMission.has(l)){var s=a(this.view.prefabMission).getComponent(I);this.view.scrollViewMission.content.addChild(s.node),this.mapMission.set(l,s)}this.mapMission.get(l).refresh(this.GetModel(T).getDoingMissionByType(l))}else this.mapMission.has(l)&&(this.mapMission.get(l).node.active=!1);this.GetModel(w).getAllValidCells().forEach((function(t){e.getCellCompt(t).missionNeed(t.isMissionNeed)})),this.view.btnRewardStore.node.active=this.GetModel(_).rewardBag.length>0,r("warn:---",this.GetModel(_).rewardBag),this.view.btnRewardStore.node.active&&(this.view.comptReardStore.btn.node.active=!1,this.view.comptReardStore.refreshNormal(this.GetModel(_).rewardBag[this.GetModel(_).rewardBag.length-1].cellId))},L.onDragClick=function(e){var t=e.getCurrentTarget().getComponent(v),i=this.GetModel(w).map.getCell(t.x,t.y);if(h("onDragClick: "+i.x+"-"+i.y,i),this.GetModel(w).checkLevelLock(i)>0)C.gui.toast("等级锁定");else if(i.ground)C.gui.toast("有尘土");else{var l=C.config.tables.TbCell.get(i.cellId);if(l){if(this.GetModel(w).isFactoryCell(i.x,i.y)){if(!i.active)return void C.gui.toast("未激活");this.GetModel(w).selectCell==i&&(0==i.useCount&&l.factoryId_ref.startCd>0&&(i.countdown=l.factoryId_ref.startCd),this.factoryMake(i))}else if(l.type==y.VALUE&&this.GetModel(w).selectCell==i)return void this.sellCell(i);this.selectCell(i)}}},L.onDragCheck=function(e){var t=e.getCurrentTarget().getComponent(v),i=this.GetModel(w).map.getCell(t.x,t.y);return i.cellId&&i.active&&!i.ground},L.onDragMove=function(e){e.getCurrentTarget();this.cellCompts.flat().filter((function(e){return e.data.cell.cellId})).forEach((function(t){var i=e.getUILocation();g.isPointCollidingWithNode(i,t.node)&&t.node}))},L.onDragSucceedCheck=function(e){var t=this,i=e.getCurrentTarget(),l=i.getComponent(v),s=this.GetModel(w).map.getCell(l.x,l.y),n=null,o=e.getUILocation();return this.cellCompts.flat().forEach((function(e){if(g.isPointCollidingWithNode(o,e.node)&&e.node!=i){var l=t.GetModel(w).map.getCell(e.x,e.y);if(l.ground)return void C.gui.toast("onDragSucceedCheck-有尘土");h("A cell: "+s.x+"-"+s.y+" || B cell: "+l.x+"-"+l.y);var r=t.GetModel(w).checkSwapType(s,l);if(r!=G.None)return void(n={swapA:s,swapB:l,type:r});C.gui.toast("checkSwapType 无法移动"),t.selectCell(s)}})),g.isPointCollidingWithNode(o,this.view.btnBag.node)&&this.addBag(s),n},L.onDragSucceed=function(e,t){var i=t.swapA,l=t.swapB,s=t.type;d("测试"),s==G.None&&r("不可能"),h("type:"+s+" -- swapA cell: "+i.x+"-"+i.y+" to swapB cell: "+l.x+"-"+l.y),s==G.Swap?(this.swap(i,l),this.selectCell(i)):s==G.Merge&&(this.merge(i,l),this.selectCell(l),this.refreshMission())},L.onBtnRewardStoreClick=function(e){var t=this.GetModel(_).rewardBag[this.GetModel(_).rewardBag.length-1].cellId,i=this.GetModel(w).getAllEmptyCells();t&&i.length>0?(this.GetModel(_).removeReward(t)&&C.message.dispatchEvent(B.BattleSetCell,{gridCellData:i[0],cellTid:t}),this.refreshMission()):t?C.gui.toast("没有位置了"):r("点击空了")},L.onBtnSellClick=function(e){this.sellCell(this.GetModel(w).selectCell)},L.onBtnAdClick=function(e){var t=this;C.gui.tip.alert("是否看广告戳破",(function(){t.burstBubble(t.GetModel(w).selectCell)}),"广告戳破","看广告")},L.onBtnDiamondClick=function(e){var t=this,i=this.GetModel(w).selectCell,l=C.config.tables.TbCell.get(i.cellId);if(l.bubbleId_ref)C.gui.tip.alert("是否花费钻石戳破",(function(){t.burstBubble(t.GetModel(w).selectCell)}),"钻石戳破","购买");else{var s=Math.ceil(i.countdown/180)*l.factoryId_ref.buyCdCount;C.gui.tip.alert("是否花费"+s+"钻石减少cd",(function(){t.GetModel(_).removeBag(S,s)?i.countdown=1e-6:C.gui.toast("钻石不足")}),"减少cd","购买")}},L.onBtnBagClick=function(e){C.gui.open(x.BattleBag,null,null)},L.selectCell=function(e){e!=this.GetModel(w).selectCell&&(this.GetModel(w).selectCell&&this.cellCompts[this.GetModel(w).selectCell.x][this.GetModel(w).selectCell.y].select(!1),this.GetModel(w).selectCell=e,this.GetModel(w).selectCell&&this.cellCompts[this.GetModel(w).selectCell.x][this.GetModel(w).selectCell.y].select(e.isSelect),this.refreshBottom())},L.sellCell=function(e){this.GetModel(w).reqSell(e),this.clearCell(e),this.refreshTop()},L.clearCell=function(e){this.GetModel(w).clearCell(e.x,e.y);var t={cell:this.GetModel(w).map.getCell(e.x,e.y)},i=this.cellCompts[e.x][e.y];i.refresh(t),this.GetModel(w).selectCell==e&&this.selectCell(null),i.node.position=this.getPos(e.x,e.y)},L.setCell=function(e,t){this.GetModel(w).setCell(e.x,e.y,t);var i={cell:this.GetModel(w).map.getCell(e.x,e.y)},l=this.cellCompts[e.x][e.y];l.refresh(i),l.node.position=this.getPos(e.x,e.y)},L.swap=function(e,t){var i=e.x,l=e.y,s=t.x,n=t.y,o=this.cellCompts[i][l];this.cellCompts[i][l]=this.cellCompts[s][n],this.cellCompts[s][n]=o,this.GetModel(w).swap(i,l,s,n),this.moveTo(this.cellCompts[i][l]),this.moveTo(this.cellCompts[s][n])},L.merge=function(e,t){var i=this;this.GetModel(w).merge(e,t),this.GetModel(w).checkAround(t,(function(e){i.getCellCompt(e).refresh()}),k),this.getCellCompt(e).node.position=this.getPos(e.x,e.y),this.getCellCompt(e).refresh(),this.getCellCompt(t).refresh();var l=C.config.tables.TbCell.get(t.cellId);this.mergeMake(t,l.mergeCell1Chance),this.mergeMake(t,l.mergeCell2Chance)},L.mergeMake=function(){var e=i(l().mark((function e(t,i){var s,n,o,a,c;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(s=this.GetModel(w).findNearestActiveCell(t,!0))){e.next=16;break}if(h("合并生产nearestCell: "+s.x+"-"+s.y),n=s.x,o=s.y,!(a=this.GetModel(w).mergeMake(i,n,o))){e.next=13;break}return e.next=9,this.animTempCellMoveTo(t,n,o);case 9:c={cell:this.GetModel(w).map.getCell(a.x,a.y)},this.cellCompts[n][o].refresh(c),e.next=14;break;case 13:r("合并生产没有random到cell");case 14:e.next=17;break;case 16:C.gui.toast("合并生成没有格子了");case 17:case"end":return e.stop()}}),e,this)})));return function(t,i){return e.apply(this,arguments)}}(),L.factoryMake=function(){var e=i(l().mark((function e(t){var i,s,n,o,r,a,c;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.countdown>0)){e.next=3;break}return C.gui.toast("生产物cd中"),e.abrupt("return");case 3:if(!(i=this.GetModel(w).findNearestActiveCell(t,!0))){e.next=22;break}if(s=i.x,n=i.y,h("工厂生产nearestCell: "+i.x+"-"+i.y),!(o=this.GetModel(w).factoryMake(t,s,n))){e.next=19;break}return e.next=12,this.animTempCellMoveTo(t,s,n);case 12:r={cell:this.GetModel(w).map.getCell(o.x,o.y)},this.cellCompts[s][n].refresh(r),(a=C.config.tables.TbCell.get(t.cellId)).factoryId_ref.factoryCountChance.length>0&&(c=this.GetModel(A).getRandomIdFromChances(a.factoryId_ref.factoryCountChance).id,t.useCount>=Number(c)&&(a.factoryId_ref.repeat?(t.useCount=0,t.countdown=Number(this.GetModel(A).getRandomIdFromChances(a.factoryId_ref.cdChance).id)):this.clearCell(t))),this.refreshUI(),e.next=20;break;case 19:C.gui.toast("没有体力生产物创建物品失败");case 20:e.next=23;break;case 22:C.gui.toast("生产物没有格子了");case 23:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),L.onCellCountdownFinish=function(e){C.config.tables.TbCell.get(e.cellId).bubbleId_ref&&this.burstBubble(e),this.refreshBottom()},L.burstBubble=function(e){if(C.config.tables.TbCell.get(e.cellId).bubbleId_ref){this.GetModel(w).burstBubble(e);var t={cell:this.GetModel(w).map.getCell(e.x,e.y)};this.cellCompts[e.x][e.y].refresh(t)}else C.gui.toast("戳泡泡缺少表:"+e.cellId)},L.animTempCellMoveTo=function(){var e=i(l().mark((function e(t,i,s){var n,o;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.getPos(i,s),o=this.GetModel(w).map.getCell(i,s),e.next=4,this.animTempCellMove(t,o,n);case 4:case"end":return e.stop()}}),e,this)})));return function(t,i,l){return e.apply(this,arguments)}}(),L.animTempCellMove=function(){var e=i(l().mark((function e(t,s,n){var o=this;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(i(l().mark((function e(i){var r,a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.poolCell.get().getComponent(v),o.view.nodeGird.addChild(r.node),r.node.position=o.getPos(t.x,t.y),a={cell:o.GetModel(w).map.getCell(s.x,s.y),unlockLevel:0},r.refresh(a),r.node.active=!0,e.next=8,o.moveToVec3(r,n);case 8:return i(),e.next=11,N.sleep(500);case 11:r.node.active=!1,o.poolCell.put(r.node);case 13:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e)})));return function(t,i,l){return e.apply(this,arguments)}}(),L.moveTo=function(){var e=i(l().mark((function e(t,i,s){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.getPos(null!=i?i:t.x,null!=s?s:t.y),e.next=3,this.moveToVec3(t,n);case 3:case"end":return e.stop()}}),e,this)})));return function(t,i,l){return e.apply(this,arguments)}}(),L.moveToVec3=function(e,t){return new Promise((function(i){u(e.node).to(.2,{position:t}).call((function(){i()})).start()}))},L.missionFinish=function(){var e=i(l().mark((function e(t){var i,n,o,r,a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=[]).push.apply(i,t.haveCell_),!(i.length>0)){e.next=9;break}for(n=[],o=s(i);!(r=o()).done;)a=r.value,this.clearCell(a);return e.next=7,Promise.all(n);case 7:this.GetModel(T).reqFinishMission(t),this.refreshUI();case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),L.addBag=function(e){this.GetModel(_).addBag(e.cellId,1)?this.clearCell(e):C.gui.toast("背包满了")},L.getPos=function(e,t){return new c(this.sizeCell.width*e+this.sizeCell.width/2,this.sizeCell.width*-t-this.sizeCell.width/2,0)},L.getCellCompt=function(e){return this.cellCompts[e.x][e.y]},n}(L));n._RF.pop()}}}));

System.register("chunks:///_virtual/battle_model.ts",["./rollupPluginModLoBabelHelpers.js","cc","./IModel.ts","./Hope.ts","./TwoDimensionalArray.ts","./bag_model.ts","./player_model.ts","./schema.ts"],(function(e){var l,t,n,c,r,o,a,i,u,s,d,f;return{setters:[function(e){l=e.inheritsLoose,t=e.createForOfIteratorHelperLoose,n=e.createClass},function(e){c=e.cclegacy,r=e.warn},function(e){o=e.ModelDecorator,a=e.AbstractModel},function(e){i=e.hope},function(e){u=e.TwoDimensionalArray},function(e){s=e.BagModel,d=e.CELL_TID_POWER},function(e){f=e.PlayerModel},null],execute:function(){var h;c._RF.push({},"1f5aes5QjtGOoGdKrN5B6uu","battle_model",void 0);var v=e("ROW_NUM",9),g=e("COLUMN_NUM",7),b=e("SwapType",function(e){return e[e.None=0]="None",e[e.Swap=1]="Swap",e[e.Merge=2]="Merge",e}({})),C=(e("CellType",function(e){return e.VALUE="L004",e}({})),e("DirectionsEight",[[0,-1],[0,1],[-1,0],[1,0],[-1,-1],[-1,1],[1,-1],[1,1]])),p=e("DirectionsFour",[[0,-1],[0,1],[-1,0],[1,0]]);e("BattleModel",o("BattleModel")(h=function(e){function c(){for(var l,t=arguments.length,n=new Array(t),c=0;c<t;c++)n[c]=arguments[c];return(l=e.call.apply(e,[this].concat(n))||this).map=null,l._selectCell=void 0,l}l(c,e);var o=c.prototype;return o.OnInit=function(){this.map=new u(g,v,this.GetModel(f).data.grid)},o.setCell=function(e,l,t){void 0===t&&(t=null);var n=this.map.getCell(e,l);n.cellId=t,this.map.setCell(e,l,n)},o.clearCell=function(e,l){this.setCell(e,l)},o.getAllValidCells=function(){for(var e=[],l=this.map.getData(),t=0;t<l.length;t++){var n=l[t];n.active&&!n.ground&&e.push(n)}return e},o.getAllEmptyCells=function(){for(var e=[],l=this.map.getData(),t=0;t<l.length;t++){var n=l[t];!n.active||n.ground||n.cellId||e.push(n)}return e},o.isFactoryCell=function(e,l){var t,n=this.map.getCell(e,l);return!(null==(t=i.config.tables.TbCell.get(n.cellId))||!t.factoryId_ref)},o.checkGround=function(e){if(!e.active||this.checkLevelLock(e)>0)return!0;var l=!1;return this.checkAround(e,(function(e){e.active||(l=!0)}),p),l},o.checkLevelLock=function(e){var l=Number(""+(e.x+1)+(e.y+1)),t=i.config.tables.TbInitMap.get(l);return t.openLevel>0&&this.GetModel(f).levelInfo.level<t.openLevel?t.openLevel:0},o.checkAround=function(e,l,n){for(var c,r=e.x,o=e.y,a=t(n);!(c=a()).done;){var i=c.value,u=r+i[0],s=o+i[1];if(u>=0&&u<g&&s>=0&&s<v)l(this.map.getCell(u,s))}},o.findNearestActiveCell=function(e,l){var t=this;void 0===l&&(l=!1);for(var n=[],c=[],r=0;r<v;r++){n[r]=[];for(var o=0;o<g;o++)n[r][o]=!1}c.push({cell:e,distance:0}),n[e.y][e.x]=!0;for(var a,i=l?C:p,u=function(){var e=c.shift();if(!e.cell.ground&&!e.cell.cellId)return{v:e.cell};t.checkAround(e.cell,(function(l){n[l.y][l.x]||(n[l.y][l.x]=!0,c.push({cell:l,distance:e.distance+1}))}),i)};c.length>0;)if(a=u())return a.v;return null},o.checkSwapType=function(e,l){return this.canMerge(e,l)?b.Merge:this.canSwap(e,l)?b.Swap:b.None},o.canSwap=function(e,l){return!!((e.cellId||l.cellId)&&e.active&&!e.ground&&this.checkLevelLock(e)<=0&&l.active&&!l.ground&&this.checkLevelLock(l)<=0)},o.canMerge=function(e,l){if(e.cellId&&l.cellId&&e.cellId==l.cellId&&(e.active||l.active)&&!e.ground&&!l.ground&&this.checkLevelLock(e)<=0&&this.checkLevelLock(l)<=0&&i.config.tables.TbCell.get(l.cellId).upgradeCellId)return!0;return!1},o.swap=function(e,l,t,n){var c=this;this.map.swap(e,l,t,n);var r=function(e,l){var t=c.map.getCell(e,l);t.x=e,t.y=l};r(e,l),r(t,n)},o.merge=function(e,l){e.cellId=null;var t=i.config.tables.TbCell.get(l.cellId);l.cellId=t.upgradeCellId,l.active=!0,this.checkAround(l,(function(e){e.ground=!1}),p)},o.factoryMake=function(e,l,t){if(this.GetModel(s).power<=0)return null;e.useCount=(isNaN(e.useCount)?0:e.useCount)+1;var n=i.config.tables.TbCell.get(e.cellId),c=this.GetModel(f).getRandomIdFromChances(n.factoryId_ref.makeCellChance).id;i.config.tables.TbCell.get(c)||r("策划检查Cell表:"+c);var o={x:l,y:t,cellId:c,active:!0,ground:!1};return this.GetModel(s).addBag(d,-1),this.map.setCell(l,t,o),o},o.mergeMake=function(e,l,t){if(e.length<=0)return null;var n=this.GetModel(f).getRandomIdFromChances(e,1e4).id;if(!n)return null;var c=i.config.tables.TbCell.get(n);c||r("策划检查Cell表:"+n);var o={x:l,y:t,cellId:n,active:!0,ground:!1};return c.bubbleId_ref&&(o.countdown=c.bubbleId_ref.bubbleReachTime),this.map.setCell(l,t,o),o},o.burstBubble=function(e){var l=i.config.tables.TbCell.get(e.cellId);if(e.countdown<0){for(var n,c=l.bubbleId_ref.bubbleNotReachCellChance[0].id,o=l.bubbleId_ref.bubbleNotReachCellChance.reduce((function(e,l){return e+l.chance}),0),a=Math.random()*o,u=0,s=t(l.bubbleId_ref.bubbleNotReachCellChance);!(n=s()).done;){var d=n.value;if(a<=(u+=d.chance)){c=d.id;break}}r(e.cellId,c),e.cellId=c}else e.cellId=l.bubbleId_ref.bubbleReachCellId;e.countdown=0},o.reqSell=function(e){var l=i.config.tables.TbCell.get(e.cellId);r("sell:",l);for(var t=0;t<l.sellCell.length;t++)this.GetModel(s).addBag(l.sellCell[t].id,l.sellCell[t].count)},n(c,[{key:"selectCell",get:function(){return this._selectCell},set:function(e){this._selectCell&&(this._selectCell.isSelect=!1),e&&(e.isSelect=!0),this._selectCell=e}}]),c}(a))||h);c._RF.pop()}}}));

System.register("chunks:///_virtual/battle.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseView.ts","./battle_ctrl.ts","./bag_item_cell.ts"],(function(e){var l,t,n,r,i,a,o,u,b,c,p,f,s,g,m;return{setters:[function(e){l=e.applyDecoratedDescriptor,t=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){i=e.cclegacy,a=e._decorator,o=e.Node,u=e.Prefab,b=e.ScrollView,c=e.Button,p=e.Label},function(e){f=e.BindCtrl,s=e.BaseView},function(e){g=e.BattleCtrl},function(e){m=e.BagItemCell}],execute:function(){var w,y,d,z,B,v,S,C,h,D,L,M,P,_,G,I,R,V,x,A,T,k,E,F,j,H,J,K,N,O,q,Q,U,W,X,Y,Z,$,ee,le,te,ne,re,ie,ae,oe;i._RF.push({},"6e67cCPTOJK57/5SkiP83TS","battle",void 0);var ue=a.ccclass,be=a.property;e("Battle",(w=ue("Battle"),y=f(g),d=be(o),z=be(o),B=be(u),v=be(u),S=be(u),C=be(b),h=be(c),D=be(m),L=be(c),M=be(c),P=be(c),_=be(c),G=be(c),I=be(c),R=be(p),V=be(c),x=be(p),A=be(p),T=be(p),k=be(p),E=be(p),w(F=y((H=l((j=function(e){function l(){for(var l,t=arguments.length,i=new Array(t),a=0;a<t;a++)i[a]=arguments[a];return l=e.call.apply(e,[this].concat(i))||this,n(l,"nodeGird",H,r(l)),n(l,"nodeGirdBg",J,r(l)),n(l,"prefabCellBg",K,r(l)),n(l,"prefabCell",N,r(l)),n(l,"prefabMission",O,r(l)),n(l,"scrollViewMission",q,r(l)),n(l,"btnRewardStore",Q,r(l)),n(l,"comptReardStore",U,r(l)),n(l,"btnMap",W,r(l)),n(l,"btnSell",X,r(l)),n(l,"btnAd",Y,r(l)),n(l,"btnDiamond",Z,r(l)),n(l,"btnInfo",$,r(l)),n(l,"btnBag",ee,r(l)),n(l,"labelBottomInfo",le,r(l)),n(l,"btnLevel",te,r(l)),n(l,"labelLevel",ne,r(l)),n(l,"labelExp",re,r(l)),n(l,"labelGold",ie,r(l)),n(l,"labelPower",ae,r(l)),n(l,"labelDiamond",oe,r(l)),l}return t(l,e),l}(s)).prototype,"nodeGird",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=l(j.prototype,"nodeGirdBg",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=l(j.prototype,"prefabCellBg",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=l(j.prototype,"prefabCell",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=l(j.prototype,"prefabMission",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=l(j.prototype,"scrollViewMission",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=l(j.prototype,"btnRewardStore",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=l(j.prototype,"comptReardStore",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=l(j.prototype,"btnMap",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=l(j.prototype,"btnSell",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=l(j.prototype,"btnAd",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=l(j.prototype,"btnDiamond",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=l(j.prototype,"btnInfo",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ee=l(j.prototype,"btnBag",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),le=l(j.prototype,"labelBottomInfo",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),te=l(j.prototype,"btnLevel",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ne=l(j.prototype,"labelLevel",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),re=l(j.prototype,"labelExp",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ie=l(j.prototype,"labelGold",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ae=l(j.prototype,"labelPower",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),oe=l(j.prototype,"labelDiamond",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=j))||F)||F));i._RF.pop()}}}));

System.register("chunks:///_virtual/BuildTimeConstants.ts",["cc","./env"],(function(t){var n,e;return{setters:[function(t){n=t.cclegacy},function(t){e=t}],execute:function(){n._RF.push({},"8d77dzaOKVJAazQ7kOBl4VG","BuildTimeConstants",void 0);var o=Object.keys(e).sort();t("BuildTimeConstants",(function(){var t=o.reduce((function(t,n){return Math.max(t,n.length)}),0),n=""+o.map((function(n){var o=e[n],u="boolean"==typeof o?o?"true":"false":o;return"\n"+n.padStart(t," ")+" : "+u}));console.log(n)}));n._RF.pop()}}}));

System.register("chunks:///_virtual/ButtonEffect.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ButtonSimple.ts","./Hope.ts"],(function(t){var e,n,o,i,a,r,s,c,l,u,f,p,h;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,o=t.initializerDefineProperty,i=t.assertThisInitialized,a=t.createClass},function(t){r=t.cclegacy,s=t._decorator,c=t.Animation,l=t.AnimationClip,u=t.Node,f=t.Sprite},function(t){p=t.default},function(t){h=t.hope}],execute:function(){var d,m,y,g,b,T;r._RF.push({},"1be36hrGO5Oz6Eapg6ygW03","ButtonEffect",void 0);var _=s.ccclass,v=s.property,E=s.menu;t("default",(d=_("ButtonEffect"),m=E("ui/button/ButtonEffect"),y=v({tooltip:"是否开启"}),d(g=m((T=e((b=function(t){function e(){for(var e,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return e=t.call.apply(t,[this].concat(a))||this,o(e,"disabledEffect",T,i(e)),e.anim=void 0,e}n(e,t);var r=e.prototype;return r.onLoad=function(){this.anim=this.node.addComponent(c);var e=h.res.get("common/anim/button_scale_start",l),n=h.res.get("common/anim/button_scale_end",l);this.anim.defaultClip=e,this.anim.createState(e,null==e?void 0:e.name),this.anim.createState(n,null==n?void 0:n.name),this.node.on(u.EventType.TOUCH_START,this.onTouchtStart,this),t.prototype.onLoad.call(this)},r.onTouchtStart=function(t){this.disabledEffect||this.anim.play("button_scale_start")},r.onTouchEnd=function(e){this.disabledEffect||this.anim.play("button_scale_end"),t.prototype.onTouchEnd.call(this,e)},r.onDestroy=function(){this.node.off(u.EventType.TOUCH_START,this.onTouchtStart,this),t.prototype.onDestroy.call(this)},a(e,[{key:"grayscale",get:function(){return this.node.getComponent(f).grayscale},set:function(t){this.node.getComponent(f)&&(this.node.getComponent(f).grayscale=t)}}]),e}(p)).prototype,"disabledEffect",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),g=b))||g)||g));r._RF.pop()}}}));

System.register("chunks:///_virtual/ButtonSimple.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Hope.ts"],(function(t){var e,o,i,n,r,u,c,a,p,f,l;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){r=t.cclegacy,u=t._decorator,c=t.AudioClip,a=t.Node,p=t.game,f=t.Component},function(t){l=t.hope}],execute:function(){var s,h,d,y,E,T,m,v,b,C;r._RF.push({},"8d645yObX1FvJfk2sbi0rxp","ButtonSimple",void 0);var g=u.ccclass,_=u.property,S=u.menu;t("default",(s=g("ButtonSimple"),h=S("ui/button/ButtonSimple"),d=_({tooltip:"是否只触发一次"}),y=_({tooltip:"每次触发间隔"}),E=_({tooltip:"触摸音效",type:c}),s(T=h((v=e((m=function(t){function e(){for(var e,o=arguments.length,r=new Array(o),u=0;u<o;u++)r[u]=arguments[u];return e=t.call.apply(t,[this].concat(r))||this,i(e,"once",v,n(e)),i(e,"interval",b,n(e)),i(e,"effect",C,n(e)),e.touchCount=0,e.touchtEndTime=0,e}o(e,t);var r=e.prototype;return r.onLoad=function(){this.node.on(a.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(a.EventType.TOUCH_CANCEL,this.onTouchEnd,this)},r.onTouchEnd=function(t){if(this.once){if(this.touchCount>0)return void(t.propagationStopped=!0);this.touchCount++}this.touchtEndTime&&p.totalTime-this.touchtEndTime<this.interval?t.propagationStopped=!0:(this.touchtEndTime=p.totalTime,this.playEffect())},r.playEffect=function(){this.effect&&l.audio.playEffect(this.effect)},r.onDestroy=function(){this.node.off(a.EventType.TOUCH_END,this.onTouchEnd,this),this.node.off(a.EventType.TOUCH_CANCEL,this.onTouchEnd,this),this.effect&&l.audio.releaseEffect(this.effect)},e}(f)).prototype,"once",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),b=e(m.prototype,"interval",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 500}}),C=e(m.prototype,"effect",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=m))||T)||T));r._RF.pop()}}}));

System.register("chunks:///_virtual/ButtonTouchLong.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ButtonEffect.ts"],(function(t){var o,n,i,e,s,c,u,r;return{setters:[function(t){o=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,e=t.assertThisInitialized},function(t){s=t.cclegacy,c=t._decorator,u=t.EventHandler},function(t){r=t.default}],execute:function(){var a,h,l,p,f,T,_,g;s._RF.push({},"da96en7WYpPTaPIkO1l/Nux","ButtonTouchLong",void 0);var v=c.ccclass,m=c.property,L=c.menu;t("ButtonTouchLong",(a=v("ButtonTouchLong"),h=L("ui/button/ButtonTouchLong"),l=m({tooltip:"长按时间（秒）"}),p=m({type:[u],tooltip:"长按时间（秒）"}),a(f=h((_=o((T=function(t){function o(){for(var o,n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return o=t.call.apply(t,[this].concat(s))||this,i(o,"time",_,e(o)),i(o,"clickEvents",g,e(o)),o._passTime=0,o._isTouchLong=!0,o._event=null,o}n(o,t);var s=o.prototype;return s.onLoad=function(){this._isTouchLong=!1,t.prototype.onLoad.call(this)},s.onTouchtStart=function(o){this._event=o,this._passTime=0,t.prototype.onTouchtStart.call(this,o)},s.onTouchEnd=function(o){this._passTime>this.time&&(o.propagationStopped=!0),this._event=null,this._passTime=0,this._isTouchLong=!1,t.prototype.onTouchEnd.call(this,o)},s.removeTouchLong=function(){this._event=null,this._isTouchLong=!1},s.update=function(t){var o=this;this._event&&!this._isTouchLong&&(this._passTime+=t,this._passTime>=this.time&&(this._isTouchLong=!0,this.clickEvents.forEach((function(t){t.emit([t.customEventData]),o.playEffect()})),this.removeTouchLong()))},o}(r)).prototype,"time",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),g=o(T.prototype,"clickEvents",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),f=T))||f)||f));s._RF.pop()}}}));

System.register("chunks:///_virtual/ByteBuf.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,i;return{setters:[function(e){t=e.createClass},function(e){i=e.cclegacy}],execute:function(){i._RF.push({},"547c3jRdqJL7pAAKclrKnlY","ByteBuf",void 0);e("EDeserializeError",function(e){return e[e.OK=0]="OK",e[e.NOT_ENOUGH=1]="NOT_ENOUGH",e[e.EXCEED_SIZE=2]="EXCEED_SIZE",e}({}));var r=Math.pow(2,32),s=Math.pow(2,56);e("default",function(){function e(t){this._bytes=void 0,this._readerIndex=void 0,this._writerIndex=void 0,this._bytes=null!=t?new Uint8Array(t):e.emptyBuff,this._readerIndex=0,this._writerIndex=null!=t?t.length:0}var i=e.prototype;return i.Replace=function(e){this._bytes=new Uint8Array(e),this._readerIndex=0,this._writerIndex=e.length},i.Replace2=function(e,t,i){this._bytes=new Uint8Array(e.subarray(t,i)),this._readerIndex=t,this._writerIndex=i},i.getBytesNotSafe=function(){return this._bytes},i.AddWriteIndex=function(e){this._writerIndex+=e},i.AddReadIndex=function(e){this._readerIndex+=e},i.CopyData=function(){return this.Remaining>0?new Uint8Array(this._bytes.buffer.slice(this._readerIndex,this._writerIndex)):e.emptyBuff},i.DiscardReadBytes=function(){this._bytes.copyWithin(0,this._readerIndex,this._writerIndex),this._writerIndex-=this._readerIndex,this._readerIndex=0},i.WriteBytesWithoutSize=function(e){this.WriteBytesWithoutSize2(e,0,e.length)},i.WriteBytesWithoutSize2=function(e,t,i){this.EnsureWrite(i);for(var r=0;r<i;r++)this._bytes[this._writerIndex+r]=e[t+r];this._writerIndex+=i},i.Clear=function(){this._readerIndex=this._writerIndex=0},e.PropSize=function(e,t){for(var i=Math.max(e,16);i<<=1;)if(i>=t)return i},i.EnsureWrite0=function(t){var i=this._writerIndex+t-this._readerIndex;if(i<=this.Capacity)this._bytes.copyWithin(0,this._readerIndex,this._writerIndex),this._writerIndex-=this._readerIndex,this._readerIndex=0;else{var r=e.PropSize(this.Capacity,i),s=this._bytes;this._bytes=new Uint8Array(r),this._bytes.set(s.subarray(this._readerIndex,this._writerIndex)),this._writerIndex-=this._readerIndex,this._readerIndex=0}},i.EnsureWrite=function(e){this._writerIndex+e>this.Capacity&&this.EnsureWrite0(e)},i.EnsureRead=function(e){if(this._readerIndex+e>this._writerIndex)throw new Error},i.CanRead=function(e){return this._readerIndex+e<=this._writerIndex},i.WriteBool=function(e){this.EnsureWrite(1),this._bytes[this._writerIndex++]=e?1:0},i.ReadBool=function(){return this.EnsureRead(1),0!=this._bytes[this._readerIndex++]},i.WriteByte=function(e){this.EnsureWrite(1),this._bytes[this._writerIndex++]=e},i.ReadByte=function(){return this.EnsureRead(1),this._bytes[this._readerIndex++]},i.WriteShort=function(e){if(e>=0){if(e<128)return this.EnsureWrite(1),void(this._bytes[this._writerIndex++]=e);if(e<16384){this.EnsureWrite(2);var t=32768|e;return new DataView(this._bytes.buffer).setUint16(this._writerIndex,t,!1),void(this._writerIndex+=2)}}this.EnsureWrite(4),this._bytes[this._writerIndex]=255,new DataView(this._bytes.buffer).setInt16(this._writerIndex+1,e,!1),this._writerIndex+=3},i.ReadShort=function(){this.EnsureRead(1);var e=this._bytes[this._readerIndex];if(e<128)return this._readerIndex++,e;if(e<192){this.EnsureRead(2);var t=16383&new DataView(this._bytes.buffer).getUint16(this._readerIndex,!1);return this._readerIndex+=2,t}if(255==e){this.EnsureRead(3);var i=new DataView(this._bytes.buffer).getInt16(this._readerIndex+1,!1);return this._readerIndex+=3,i}throw new Error},i.ReadFshort=function(){this.EnsureRead(2);var e=new DataView(this._bytes.buffer).getInt16(this._readerIndex,!0);return this._readerIndex+=2,e},i.WriteFshort=function(e){this.EnsureWrite(2),new DataView(this._bytes.buffer).setInt16(this._writerIndex,e,!0),this._writerIndex+=2},i.WriteInt=function(e){e<0?(this.EnsureWrite(5),this._bytes[this._writerIndex]=255,new DataView(this._bytes.buffer).setInt32(this._writerIndex+1,e,!1),this._writerIndex+=5):e<128?(this.EnsureWrite(1),this._bytes[this._writerIndex++]=e):e<16384?(this.EnsureWrite(2),new DataView(this._bytes.buffer).setUint16(this._writerIndex,32768|e,!1),this._writerIndex+=2):e<2097152?(this.EnsureWrite(4),new DataView(this._bytes.buffer).setUint32(this._writerIndex,(12582912|e)<<8,!1),this._writerIndex+=3):e<268435456?(this.EnsureWrite(4),new DataView(this._bytes.buffer).setUint32(this._writerIndex,3758096384|e,!1),this._writerIndex+=4):(this.EnsureWrite(5),this._bytes[this._writerIndex]=240,new DataView(this._bytes.buffer).setUint32(this._writerIndex+1,e,!1),this._writerIndex+=5)},i.ReadInt=function(){this.EnsureRead(1);var e=this._bytes[this._readerIndex];if(e<128)return this._readerIndex++,e;if(e<192){this.EnsureRead(2);var t=16383&new DataView(this._bytes.buffer).getUint16(this._readerIndex,!1);return this._readerIndex+=2,t}if(e<224){this.EnsureRead(3);var i=(31&e)<<16|new DataView(this._bytes.buffer).getUint16(this._readerIndex+1,!1);return this._readerIndex+=3,i}if(e<240){this.EnsureRead(4);var r=268435455&new DataView(this._bytes.buffer).getInt32(this._readerIndex,!1);return this._readerIndex+=4,r}this.EnsureRead(5);var s=new DataView(this._bytes.buffer).getInt32(this._readerIndex+1,!1);return this._readerIndex+=5,s},i.ReadFint=function(){this.EnsureRead(4);var e=new DataView(this._bytes.buffer).getInt32(this._readerIndex,!0);return this._readerIndex+=4,e},i.WriteFint=function(e){this.EnsureWrite(4),new DataView(this._bytes.buffer).setInt32(this._writerIndex,e,!0),this._writerIndex+=4},i.WriteNumberAsLong=function(e){if(e<0)this.EnsureWrite(9),this._bytes[this._writerIndex]=255,new DataView(this._bytes.buffer).setBigInt64(this._writerIndex+1,BigInt(e),!1),this._writerIndex+=9;else if(e<128)this.EnsureWrite(1),this._bytes[this._writerIndex++]=e;else if(e<16384)this.EnsureWrite(2),new DataView(this._bytes.buffer).setUint16(this._writerIndex,32768|e,!1),this._writerIndex+=2;else if(e<2097152)this.EnsureWrite(4),new DataView(this._bytes.buffer).setUint32(this._writerIndex,(12582912|e)<<8,!1),this._writerIndex+=3;else if(e<268435456)this.EnsureWrite(4),new DataView(this._bytes.buffer).setUint32(this._writerIndex,3758096384|e,!1),this._writerIndex+=4;else if(e<34359738368)this.EnsureWrite(8),new DataView(this._bytes.buffer).setUint8(this._writerIndex,e/4294967296|240),new DataView(this._bytes.buffer).setUint32(this._writerIndex+1,e%4294967296,!1),this._writerIndex+=5;else if(e<4398046511104)this.EnsureWrite(8),new DataView(this._bytes.buffer).setUint16(this._writerIndex,e/4294967296|63488,!1),new DataView(this._bytes.buffer).setUint32(this._writerIndex+2,e%4294967296,!1),this._writerIndex+=6;else if(e<35184372088832)this.EnsureWrite(8),new DataView(this._bytes.buffer).setUint32(this._writerIndex,(e/4294967296|16515072)<<8,!1),new DataView(this._bytes.buffer).setUint32(this._writerIndex+3,e%4294967296,!1),this._writerIndex+=7;else if(e<=Number.MAX_SAFE_INTEGER)this.EnsureWrite(8),new DataView(this._bytes.buffer).setUint32(this._writerIndex,e/4294967296|4261412864,!1),new DataView(this._bytes.buffer).setUint32(this._writerIndex+4,e%4294967296,!1),this._writerIndex+=8;else if(e<s){this.EnsureWrite(9);var t=BigInt(e);new DataView(this._bytes.buffer).setBigInt64(this._writerIndex,t|BigInt(254)<<BigInt(56),!1),this._writerIndex+=8}else this.EnsureWrite(9),this._bytes[this._writerIndex]=255,new DataView(this._bytes.buffer).setBigInt64(this._writerIndex+1,BigInt(e),!1),this._writerIndex+=9},i.ReadLongAsNumber=function(){this.EnsureRead(1);var e=this._bytes[this._readerIndex];if(e<128)return this._readerIndex++,e;if(e<192){this.EnsureRead(2);var t=16383&new DataView(this._bytes.buffer).getUint16(this._readerIndex,!1);return this._readerIndex+=2,t}if(e<224){this.EnsureRead(3);var i=(31&e)<<16|new DataView(this._bytes.buffer).getUint16(this._readerIndex+1,!1);return this._readerIndex+=3,i}if(e<240){this.EnsureRead(4);var s=268435455&new DataView(this._bytes.buffer).getInt32(this._readerIndex,!1);return this._readerIndex+=4,s}if(e<248){this.EnsureRead(5);var n=new DataView(this._bytes.buffer).getUint32(this._readerIndex+1,!1),h=7&e;return this._readerIndex+=5,4294967296*h+n}if(e<252){this.EnsureRead(6);var a=new DataView(this._bytes.buffer).getUint32(this._readerIndex+2,!1),d=1023&new DataView(this._bytes.buffer).getUint16(this._readerIndex,!1);return this._readerIndex+=6,4294967296*d+a}if(e<254){this.EnsureRead(7);var _=new DataView(this._bytes.buffer).getUint32(this._readerIndex+3,!1),u=new DataView(this._bytes.buffer).getUint32(this._readerIndex,!1)>>8&131071;return this._readerIndex+=7,4294967296*u+_}if(e<255){this.EnsureRead(8);var w=new DataView(this._bytes.buffer).getUint32(this._readerIndex+4,!1),f=16777215&new DataView(this._bytes.buffer).getUint32(this._readerIndex,!1);return this._readerIndex+=8,f*r+w}this.EnsureRead(9);var I=new DataView(this._bytes.buffer).getBigInt64(this._readerIndex+1,!1);return this._readerIndex+=9,Number(I)},i.WriteLong=function(e){if(e<0||e>=s)return this.EnsureWrite(9),this._bytes[this._writerIndex]=255,new DataView(this._bytes.buffer).setBigInt64(this._writerIndex+1,e,!1),void(this._writerIndex+=9);if(e>Number.MAX_SAFE_INTEGER)return this.EnsureWrite(8),new DataView(this._bytes.buffer).setBigUint64(this._writerIndex,e|BigInt(254)<<BigInt(56),!1),void(this._writerIndex+=8);var t=Number(e);t<128?(this.EnsureWrite(1),this._bytes[this._writerIndex++]=t):t<16384?(this.EnsureWrite(2),new DataView(this._bytes.buffer).setUint16(this._writerIndex,32768|t,!1),this._writerIndex+=2):t<2097152?(this.EnsureWrite(4),new DataView(this._bytes.buffer).setUint32(this._writerIndex,(12582912|t)<<8,!1),this._writerIndex+=3):t<268435456?(this.EnsureWrite(4),new DataView(this._bytes.buffer).setUint32(this._writerIndex,3758096384|t,!1),this._writerIndex+=4):t<34359738368?(this.EnsureWrite(8),new DataView(this._bytes.buffer).setUint8(this._writerIndex,t/4294967296|240),new DataView(this._bytes.buffer).setUint32(this._writerIndex+1,t%4294967296,!1),this._writerIndex+=5):t<4398046511104?(this.EnsureWrite(8),new DataView(this._bytes.buffer).setUint16(this._writerIndex,t/4294967296|63488,!1),new DataView(this._bytes.buffer).setUint32(this._writerIndex+2,t%4294967296,!1),this._writerIndex+=6):t<35184372088832?(this.EnsureWrite(8),new DataView(this._bytes.buffer).setUint32(this._writerIndex,(t/4294967296|16515072)<<8,!1),new DataView(this._bytes.buffer).setUint32(this._writerIndex+3,t%4294967296,!1),this._writerIndex+=7):(this.EnsureWrite(8),new DataView(this._bytes.buffer).setUint32(this._writerIndex,t/4294967296|4261412864,!1),new DataView(this._bytes.buffer).setUint32(this._writerIndex+4,t%4294967296,!1),this._writerIndex+=8)},i.ReadLong=function(){this.EnsureRead(1);var e=this._bytes[this._readerIndex];if(e<128)return this._readerIndex++,BigInt(e);if(e<192){this.EnsureRead(2);var t=16383&new DataView(this._bytes.buffer).getUint16(this._readerIndex,!1);return this._readerIndex+=2,BigInt(t)}if(e<224){this.EnsureRead(3);var i=(31&e)<<16|new DataView(this._bytes.buffer).getUint16(this._readerIndex+1,!1);return this._readerIndex+=3,BigInt(i)}if(e<240){this.EnsureRead(4);var r=268435455&new DataView(this._bytes.buffer).getInt32(this._readerIndex,!1);return this._readerIndex+=4,BigInt(r)}if(e<248){this.EnsureRead(5);var s=new DataView(this._bytes.buffer).getUint32(this._readerIndex+1,!1),n=7&e;return this._readerIndex+=5,BigInt(4294967296*n+s)}if(e<252){this.EnsureRead(6);var h=new DataView(this._bytes.buffer).getUint32(this._readerIndex+2,!1),a=1023&new DataView(this._bytes.buffer).getUint16(this._readerIndex,!1);return this._readerIndex+=6,BigInt(4294967296*a+h)}if(e<254){this.EnsureRead(7);var d=new DataView(this._bytes.buffer).getUint32(this._readerIndex+3,!1),_=new DataView(this._bytes.buffer).getUint32(this._readerIndex,!1)>>8&131071;return this._readerIndex+=7,BigInt(4294967296*_+d)}if(e<255){this.EnsureRead(8);var u=new DataView(this._bytes.buffer).getUint32(this._readerIndex+4,!1),w=16777215&new DataView(this._bytes.buffer).getUint32(this._readerIndex,!1);return this._readerIndex+=8,BigInt(w)<<BigInt(32)|BigInt(u)}this.EnsureRead(9);var f=new DataView(this._bytes.buffer).getBigInt64(this._readerIndex+1,!1);return this._readerIndex+=9,f},i.WriteFlong=function(e){this.EnsureWrite(8),new DataView(this._bytes.buffer).setBigInt64(this._writerIndex,e,!0),this._writerIndex+=8},i.ReadFlong=function(){this.EnsureRead(8);var e=new DataView(this._bytes.buffer).getBigInt64(this._readerIndex,!0);return this._readerIndex+=8,e},i.WriteFloat=function(e){this.EnsureWrite(4),new DataView(this._bytes.buffer).setFloat32(this._writerIndex,e,!0),this._writerIndex+=4},i.ReadFloat=function(){this.EnsureRead(4);var e=new DataView(this._bytes.buffer).getFloat32(this._readerIndex,!0);return this._readerIndex+=4,e},i.WriteDouble=function(e){this.EnsureWrite(8),new DataView(this._bytes.buffer).setFloat64(this._writerIndex,e,!0),this._writerIndex+=8},i.ReadDouble=function(){this.EnsureRead(8);var e=new DataView(this._bytes.buffer).getFloat64(this._readerIndex,!0);return this._readerIndex+=8,e},i.WriteSize=function(e){this.WriteInt(e)},i.ReadSize=function(){return this.ReadInt()},i.WriteString=function(e){var t=(new TextEncoder).encode(e).length;this.WriteSize(t),t>0&&(this.EnsureWrite(t),(new TextEncoder).encodeInto(e,this._bytes.subarray(this._writerIndex,this._writerIndex+t)),this._writerIndex+=t)},i.ReadString=function(){var e=this.ReadSize();if(e>0){this.EnsureRead(e);var t=(new TextDecoder).decode(this._bytes.subarray(this._readerIndex,this._readerIndex+e));return this._readerIndex+=e,t}return""},i.WriteBytes=function(e){var t=null!=e?e.length:0;this.WriteSize(t),t>0&&(this.EnsureWrite(t),this._bytes.set(e,this._writerIndex),this._writerIndex+=t)},i.ReadBytes=function(){var t=this.ReadSize();if(t>0){this.EnsureRead(t);var i=this._bytes.subarray(this._readerIndex,this._readerIndex+t);return this._readerIndex+=t,i}return e.emptyBuff},i.WriteArrayBuffer=function(e){this.WriteBytes(new Uint8Array(e))},i.ReadArrayBuffer=function(){return this.ReadBytes().buffer},i.SkipBytes=function(){var e=this.ReadSize();this.EnsureRead(e),this._readerIndex+=e},i.WriteByteBufWithSize=function(e){var t=e.Size;t>0?(this.WriteSize(t),this.WriteBytesWithoutSize2(e._bytes,e._readerIndex,t)):this.WriteByte(0)},i.WriteByteBufWithoutSize=function(e){var t=e.Size;t>0&&this.WriteBytesWithoutSize2(e._bytes,e._readerIndex,t)},i.WriteRawTag1=function(e){this.EnsureWrite(1),this._bytes[this._writerIndex++]=e},i.WriteRawTag2=function(e,t){this.EnsureWrite(2),this._bytes[this._writerIndex]=e,this._bytes[this._writerIndex+1]=t,this._writerIndex+=2},i.WriteRawTag3=function(e,t,i){this.EnsureWrite(3),this._bytes[this._writerIndex]=e,this._bytes[this._writerIndex+1]=t,this._bytes[this._writerIndex+2]=i,this._writerIndex+=3},t(e,[{key:"Capacity",get:function(){return this._bytes.length}},{key:"Size",get:function(){return this._writerIndex-this._readerIndex}},{key:"Empty",get:function(){return this._writerIndex<=this._readerIndex}},{key:"NotEmpty",get:function(){return this._writerIndex>this._readerIndex}},{key:"Remaining",get:function(){return this._writerIndex-this._readerIndex}},{key:"NotCompactWritable",get:function(){return this._bytes.length-this._writerIndex}}]),e}()).emptyBuff=new Uint8Array(0),i._RF.pop()}}}));

System.register("chunks:///_virtual/CameraUtil.ts",["cc"],(function(e){var t,n,r;return{setters:[function(e){t=e.cclegacy,n=e.Vec3,r=e.view}],execute:function(){t._RF.push({},"2415eAuGddNNJbeMm7SIshi","CameraUtil",void 0);e("CameraUtil",function(){function e(){}return e.isInView=function(e,t){var i=e.node.getWorldPosition(),o=e.worldToScreen(t),c=n.normalize(new n,t.subtract(i)),u=e.node.forward,a=n.dot(u,c),s=r.getViewportRect();return a>0&&o.x<=s.width&&o.x>=0&&o.y<=s.height&&o.y>=0},e}());t._RF.pop()}}}));

System.register("chunks:///_virtual/cell_base.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Hope.ts","./GameComponent.ts","./ResSprite.ts"],(function(e){var t,r,n,o,i,l,a,c,s,u,p,f;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized,i=e.asyncToGenerator,l=e.regeneratorRuntime},function(e){a=e.cclegacy,c=e._decorator,s=e.Node},function(e){u=e.hope},function(e){p=e.GameComponent},function(e){f=e.default}],execute:function(){var d,m,y,b,g,h,C,v,F;a._RF.push({},"5e72dnwe0ZC5ZRFia2FbndP","cell_base",void 0);var I=c.ccclass,w=c.property;e("CellBase",(d=I("CellBase"),m=w(s),y=w(s),b=w(s),d((C=t((h=function(e){function t(){for(var t,r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return t=e.call.apply(e,[this].concat(i))||this,n(t,"nodeCell",C,o(t)),n(t,"nodeImgCell",v,o(t)),n(t,"nodeImgFactory",F,o(t)),t}return r(t,e),t.prototype.refresh=function(){var e=i(l().mark((function e(t){var r,n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=u.config.tables.TbCell.get(t),n=r.res||r.id,f.replaceSpriteFrame(this.nodeImgCell,"texture/battle/cell/"+n),this.nodeImgFactory.active=!!r.factoryId;case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t}(p)).prototype,"nodeCell",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=t(h.prototype,"nodeImgCell",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=t(h.prototype,"nodeImgFactory",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g=h))||g));a._RF.pop()}}}));

System.register("chunks:///_virtual/cell_bg.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameComponent.ts","./ResSprite.ts"],(function(e){var t,r,l,i,n,o,c,a,s;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,l=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){n=e.cclegacy,o=e._decorator,c=e.Node},function(e){a=e.GameComponent},function(e){s=e.default}],execute:function(){var u,p,g,b,f;n._RF.push({},"5bf486PNXFIe5QS/zvlDlW9","cell_bg",void 0);var y=o.ccclass,h=o.property;e("CellBg",(u=y("CellBg"),p=h(c),u((f=t((b=function(e){function t(){for(var t,r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return t=e.call.apply(e,[this].concat(n))||this,l(t,"nodeImgBg",f,i(t)),t.x=0,t.y=0,t}return r(t,e),t.prototype.refresh=function(e){var t;e.x&&(this.x=e.x),e.y&&(this.y=e.y),t=this.x%2==0?this.y%2==0?"texture/battle/cell_bg1":"texture/battle/cell_bg2":this.y%2==0?"texture/battle/cell_bg2":"texture/battle/cell_bg1",s.replaceSpriteFrame(this.nodeImgBg,t)},t}(a)).prototype,"nodeImgBg",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g=b))||g));n._RF.pop()}}}));

System.register("chunks:///_virtual/cell.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Hope.ts","./ViewUtil.ts","./StringUtil.ts","./event_game.ts","./GameComponent.ts","./ResSprite.ts"],(function(e){var t,l,i,n,a,o,r,s,c,u,d,b,h,p,m,g,f,v;return{setters:[function(e){t=e.applyDecoratedDescriptor,l=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized,a=e.createClass,o=e.asyncToGenerator,r=e.regeneratorRuntime},function(e){s=e.cclegacy,c=e._decorator,u=e.Label,d=e.Node,b=e.Color},function(e){h=e.hope},function(e){p=e.ViewUtil},function(e){m=e.StringUtil},function(e){g=e.GameEvent},function(e){f=e.GameComponent},function(e){v=e.default}],execute:function(){var y,C,w,_,I,S,z,L,N,F,k,x,B,D,G,U,R,T,O,A,E;s._RF.push({},"9e170dh9KFBrptUQsCXYBe5","cell",void 0);var H=c.ccclass,P=c.property;e("Cell",(y=H("Cell"),C=P(u),w=P(d),_=P(d),I=P(d),S=P(d),z=P(u),L=P(u),N=P(d),F=P(d),y((B=t((x=function(e){function t(){for(var t,l=arguments.length,a=new Array(l),o=0;o<l;o++)a[o]=arguments[o];return t=e.call.apply(e,[this].concat(a))||this,i(t,"labelDebug",B,n(t)),i(t,"nodeCell",D,n(t)),i(t,"nodeImgCell",G,n(t)),i(t,"nodeImgInfo",U,n(t)),i(t,"nodeSelect",R,n(t)),i(t,"labelLevel",T,n(t)),i(t,"labelCountdown",O,n(t)),i(t,"nodeImgFactory",A,n(t)),i(t,"nodeImgGround",E,n(t)),t._tbCell=void 0,t._data=void 0,t._isOnload=!1,t._animName=void 0,t}l(t,e);var s=t.prototype;return s.refresh=function(){var e=o(r().mark((function e(t){var l;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this._data=t||this.data,this.nodeCell.active=!!t.cell.cellId,t.cell.cellId?(this._tbCell=h.config.tables.TbCell.get(t.cell.cellId),l=this._tbCell.res||this._tbCell.id,v.replaceSpriteFrame(this.nodeImgCell,"texture/battle/cell/"+l),this.nodeImgFactory.active=!!this._tbCell.factoryId,this.setBubble(!!this._tbCell.bubbleId)):this._tbCell=null,this.labelLevel.node.parent.active=t.unlockLevel>0,t.unlockLevel>0&&(this.labelLevel.string=t.unlockLevel.toString()),this.nodeImgGround.active=t.cell.ground||this.labelLevel.node.parent.active,this.nodeImgCell.uiSprite.grayscale=!t.cell.active,this.nodeImgFactory.uiSprite.grayscale=!t.cell.active,this.missionNeed(t.missionNeed),this.labelDebug.string=this.x+"-"+this.y,this.labelDebug.node.active=!1,this.node.name=this.x+"-"+this.y;case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),s.start=function(){this._isOnload=!0,this.setBubble("cell_pp"==this._animName)},s.setBubble=function(e){this._animName=e?"cell_pp":"cell_normal",this._isOnload&&p.playNodeAnimation(this.node,this._animName)},s.update=function(e){this.labelCountdown.node.active=this.data.cell.countdown>0,this.data.cell.countdown>0&&(this.labelCountdown.string=m.formatTimeString(this.data.cell.countdown,"%{hh}:%{mm}:%{ss}"),this.data.cell.countdown-=e,this.data.cell.countdown<0&&h.message.dispatchEvent(g.BattleCellCountdownFinish,this.data.cell))},s.select=function(e){this.nodeSelect.active=e},s.missionNeed=function(e){this.data.missionNeed=e,this.nodeImgInfo.color=e?new b(0,255,0,255):new b(255,255,255,0)},a(t,[{key:"data",get:function(){return this._data}},{key:"x",get:function(){return this.data.cell.x}},{key:"y",get:function(){return this.data.cell.y}}]),t}(f)).prototype,"labelDebug",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=t(x.prototype,"nodeCell",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),G=t(x.prototype,"nodeImgCell",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),U=t(x.prototype,"nodeImgInfo",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=t(x.prototype,"nodeSelect",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=t(x.prototype,"labelLevel",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O=t(x.prototype,"labelCountdown",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=t(x.prototype,"nodeImgFactory",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=t(x.prototype,"nodeImgGround",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=x))||k));s._RF.pop()}}}));

System.register("chunks:///_virtual/CommonPrompt.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Hope.ts"],(function(n){var t,i,e,o,c,l,r,s,a;return{setters:[function(n){t=n.applyDecoratedDescriptor,i=n.inheritsLoose,e=n.initializerDefineProperty,o=n.assertThisInitialized},function(n){c=n.cclegacy,l=n._decorator,r=n.Label,s=n.Component},function(n){a=n.hope}],execute:function(){var u,f,h,p,b,g,m,d,_,y,C;c._RF.push({},"653bf8VPC5Fn49zFJFqXVgx","CommonPrompt",void 0);var k=l.ccclass,v=l.property;n("CommonPrompt",(u=k("CommonPrompt"),f=v(r),h=v(r),p=v(r),b=v(r),u((d=t((m=function(n){function t(){for(var t,i=arguments.length,c=new Array(i),l=0;l<i;l++)c[l]=arguments[l];return t=n.call.apply(n,[this].concat(c))||this,e(t,"lab_title",d,o(t)),e(t,"lab_content",_,o(t)),e(t,"lab_ok",y,o(t)),e(t,"lab_cancel",C,o(t)),t.config={},t}i(t,n);var c=t.prototype;return c.onAdded=function(n){void 0===n&&(n={}),this.config=n||{},this.setTitle(),this.setContent(),this.setBtnOkLabel(),this.setBtnCancelLabel(),this.node.active=!0},c.setTitle=function(){this.config.title&&(this.lab_title.string=this.config.title)},c.setContent=function(){this.config.content&&(this.lab_content.string=this.config.content)},c.setBtnOkLabel=function(){this.config.okWord&&(this.lab_ok.string=this.config.okWord)},c.setBtnCancelLabel=function(){this.lab_cancel&&(this.config.cancelWord&&(this.lab_cancel.string=this.config.cancelWord),this.lab_cancel.node.parent.active=this.config.needCancel||!1)},c.onOk=function(){"function"==typeof this.config.okFunc&&this.config.okFunc(),this.close()},c.onClose=function(){"function"==typeof this.config.closeFunc&&this.config.closeFunc(),this.close()},c.onCancel=function(){"function"==typeof this.config.cancelFunc&&this.config.cancelFunc(),this.close()},c.close=function(){a.gui.removeByNode(this.node)},c.onDestroy=function(){this.config=null},t}(s)).prototype,"lab_title",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=t(m.prototype,"lab_content",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=t(m.prototype,"lab_ok",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=t(m.prototype,"lab_cancel",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=m))||g));c._RF.pop()}}}));

System.register("chunks:///_virtual/config_game_ui.ts",["cc","./LayerManager.ts"],(function(a){var e,o;return{setters:[function(a){e=a.cclegacy},function(a){o=a.LayerType}],execute:function(){var r;e._RF.push({},"19a8dWGGoROEbwxD08I9rGH","config_game_ui",void 0);var p=a("UIID",function(a){return a[a.Loading=1]="Loading",a[a.Netinstable=2]="Netinstable",a[a.Pop1=3]="Pop1",a[a.Pop2=4]="Pop2",a[a.Dialog=5]="Dialog",a[a.Confirm=6]="Confirm",a[a.Map=7]="Map",a[a.Battle=8]="Battle",a[a.BattleBag=9]="BattleBag",a}({}));a("UIConfigData",((r={})[p.Loading]={layer:o.UI,prefab:"loading/prefab/loading",bundle:"resources"},r[p.Netinstable]={layer:o.PopUp,prefab:"common/prefab/netinstable"},r[p.Pop1]={layer:o.PopUp,prefab:"demo/Pop1"},r[p.Pop2]={layer:o.PopUp,prefab:"demo/Pop2"},r[p.Dialog]={layer:o.Dialog,prefab:"demo/Dialog"},r[p.Confirm]={layer:o.Dialog,prefab:"common/prefab/confirm"},r[p.Battle]={layer:o.UI,prefab:"gui/prefab/panel_battle"},r[p.BattleBag]={layer:o.PopUp,vacancy:!0,mask:!0,prefab:"gui/prefab/battle/dialog_bag"},r[p.Map]={layer:o.UI,prefab:"gui/prefab/panel_map"},r));e._RF.pop()}}}));

System.register("chunks:///_virtual/Config.ts",["cc","./ByteBuf.ts"],(function(t){var n,e;return{setters:[function(t){n=t.cclegacy},function(t){e=t.default}],execute:function(){n._RF.push({},"1908e2eUsZCq6AlqdN+s3MV","Config",void 0);t("Config",function(){function t(){this.game=void 0,this.query=void 0,this.tables=void 0,this.__map_tables_json=new Map,this.__map_tables_bin=new Map}var n=t.prototype;return n.loaderJson=function(t){return this.__map_tables_json.has(t)?this.__map_tables_json.get(t).json:null},n.loaderBin=function(t){return this.__map_tables_bin.has(t)?new e(this.__map_tables_bin.get(t)):null},t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/DateExt.ts",["cc"],(function(){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"39b72c+d8hOjJNTuwrz5TEE","DateExt",void 0),Date.prototype.format=function(t){var e=this.getFullYear(),r=this.getMonth()+1,c=this.getDate(),s=this.getHours(),a=this.getMinutes(),i=this.getSeconds();return t.replace("yy",e.toString()).replace("mm",(r<10?"0":"")+r).replace("dd",(c<10?"0":"")+c).replace("hh",(s<10?"0":"")+s).replace("mm",(a<10?"0":"")+a).replace("ss",(i<10?"0":"")+i)},t._RF.pop()}}}));

System.register("chunks:///_virtual/debug-view-runtime-control.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,o,i,n,s,l,r,a,g,h,p,c,C,d,m,u,L;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){s=t.cclegacy,l=t._decorator,r=t.Node,a=t.Color,g=t.Canvas,h=t.UITransform,p=t.instantiate,c=t.Label,C=t.RichText,d=t.Toggle,m=t.Button,u=t.director,L=t.Component}],execute:function(){var f,M,b,v,T,S,x,E,I;s._RF.push({},"b2bd1+njXxJxaFY3ymm06WU","debug-view-runtime-control",void 0);var A=l.ccclass,y=l.property;t("DebugViewRuntimeControl",(f=A("internal.DebugViewRuntimeControl"),M=y(r),b=y(r),v=y(r),f((x=e((S=function(t){function e(){for(var e,o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return e=t.call.apply(t,[this].concat(s))||this,i(e,"compositeModeToggle",x,n(e)),i(e,"singleModeToggle",E,n(e)),i(e,"EnableAllCompositeModeButton",I,n(e)),e._single=0,e.strSingle=["No Single Debug","Vertex Color","Vertex Normal","Vertex Tangent","World Position","Vertex Mirror","Face Side","UV0","UV1","UV Lightmap","Project Depth","Linear Depth","Fragment Normal","Fragment Tangent","Fragment Binormal","Base Color","Diffuse Color","Specular Color","Transparency","Metallic","Roughness","Specular Intensity","IOR","Direct Diffuse","Direct Specular","Direct All","Env Diffuse","Env Specular","Env All","Emissive","Light Map","Shadow","AO","Fresnel","Direct Transmit Diffuse","Direct Transmit Specular","Env Transmit Diffuse","Env Transmit Specular","Transmit All","Direct Internal Specular","Env Internal Specular","Internal All","Fog"],e.strComposite=["Direct Diffuse","Direct Specular","Env Diffuse","Env Specular","Emissive","Light Map","Shadow","AO","Normal Map","Fog","Tone Mapping","Gamma Correction","Fresnel","Transmit Diffuse","Transmit Specular","Internal Specular","TT"],e.strMisc=["CSM Layer Coloration","Lighting With Albedo"],e.compositeModeToggleList=[],e.singleModeToggleList=[],e.miscModeToggleList=[],e.textComponentList=[],e.labelComponentList=[],e.textContentList=[],e.hideButtonLabel=void 0,e._currentColorIndex=0,e.strColor=["<color=#ffffff>","<color=#000000>","<color=#ff0000>","<color=#00ff00>","<color=#0000ff>"],e.color=[a.WHITE,a.BLACK,a.RED,a.GREEN,a.BLUE],e}o(e,t);var s=e.prototype;return s.start=function(){if(this.node.parent.getComponent(g)){var t=this.node.parent.getComponent(h),e=.5*t.width,o=.5*t.height,i=.1*e-e,n=o-.1*o,s=this.node.getChildByName("MiscMode"),l=p(s);l.parent=this.node,l.name="Buttons";var r=p(s);r.parent=this.node,r.name="Titles";for(var u=0;u<2;u++){var L=p(this.EnableAllCompositeModeButton.getChildByName("Label"));L.setPosition(i+(u>0?450:150),n,0),L.setScale(.75,.75,.75),L.parent=r;var f=L.getComponent(c);f.string=u?"----------Composite Mode----------":"----------Single Mode----------",f.color=a.WHITE,f.overflow=0,this.labelComponentList[this.labelComponentList.length]=f}n-=20;for(var M=0,b=0;b<this.strSingle.length;b++,M++){b===this.strSingle.length>>1&&(i+=200,M=0);var v=b?p(this.singleModeToggle):this.singleModeToggle;v.setPosition(i,n-20*M,0),v.setScale(.5,.5,.5),v.parent=this.singleModeToggle.parent;var T=v.getComponentInChildren(C);T.string=this.strSingle[b],this.textComponentList[this.textComponentList.length]=T,this.textContentList[this.textContentList.length]=T.string,v.on(d.EventType.TOGGLE,this.toggleSingleMode,this),this.singleModeToggleList[b]=v}i+=200,this.EnableAllCompositeModeButton.setPosition(i+15,n,0),this.EnableAllCompositeModeButton.setScale(.5,.5,.5),this.EnableAllCompositeModeButton.on(m.EventType.CLICK,this.enableAllCompositeMode,this),this.EnableAllCompositeModeButton.parent=l;var S=this.EnableAllCompositeModeButton.getComponentInChildren(c);this.labelComponentList[this.labelComponentList.length]=S;var x=p(this.EnableAllCompositeModeButton);x.setPosition(i+90,n,0),x.setScale(.5,.5,.5),x.on(m.EventType.CLICK,this.changeTextColor,this),x.parent=l,(S=x.getComponentInChildren(c)).string="TextColor",this.labelComponentList[this.labelComponentList.length]=S;var E=p(this.EnableAllCompositeModeButton);E.setPosition(i+200,n,0),E.setScale(.5,.5,.5),E.on(m.EventType.CLICK,this.hideUI,this),E.parent=this.node.parent,(S=E.getComponentInChildren(c)).string="Hide UI",this.labelComponentList[this.labelComponentList.length]=S,this.hideButtonLabel=S,n-=40;for(var I=0;I<this.strMisc.length;I++){var A=p(this.compositeModeToggle);A.setPosition(i,n-20*I,0),A.setScale(.5,.5,.5),A.parent=s;var y=A.getComponentInChildren(C);y.string=this.strMisc[I],this.textComponentList[this.textComponentList.length]=y,this.textContentList[this.textContentList.length]=y.string,A.getComponent(d).isChecked=!!I,A.on(d.EventType.TOGGLE,I?this.toggleLightingWithAlbedo:this.toggleCSMColoration,this),this.miscModeToggleList[I]=A}n-=150;for(var D=0;D<this.strComposite.length;D++){var B=D?p(this.compositeModeToggle):this.compositeModeToggle;B.setPosition(i,n-20*D,0),B.setScale(.5,.5,.5),B.parent=this.compositeModeToggle.parent;var w=B.getComponentInChildren(C);w.string=this.strComposite[D],this.textComponentList[this.textComponentList.length]=w,this.textContentList[this.textContentList.length]=w.string,B.on(d.EventType.TOGGLE,this.toggleCompositeMode,this),this.compositeModeToggleList[D]=B}}else console.error("debug-view-runtime-control should be child of Canvas")},s.isTextMatched=function(t,e){var o=new String(t),i=o.search(">");return-1===i?t===e:(o=(o=o.substr(i+1)).substr(0,o.search("<")))===e},s.toggleSingleMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strSingle.length;i++)this.isTextMatched(o.string,this.strSingle[i])&&(e.singleMode=i)},s.toggleCompositeMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strComposite.length;i++)this.isTextMatched(o.string,this.strComposite[i])&&e.enableCompositeMode(i,t.isChecked)},s.toggleLightingWithAlbedo=function(t){u.root.debugView.lightingWithAlbedo=t.isChecked},s.toggleCSMColoration=function(t){u.root.debugView.csmLayerColoration=t.isChecked},s.enableAllCompositeMode=function(t){var e=u.root.debugView;e.enableAllCompositeMode(!0);for(var o=0;o<this.compositeModeToggleList.length;o++){this.compositeModeToggleList[o].getComponent(d).isChecked=!0}var i=this.miscModeToggleList[0].getComponent(d);i.isChecked=!1,e.csmLayerColoration=!1,(i=this.miscModeToggleList[1].getComponent(d)).isChecked=!0,e.lightingWithAlbedo=!0},s.hideUI=function(t){var e=this.node.getChildByName("Titles"),o=!e.active;this.singleModeToggleList[0].parent.active=o,this.miscModeToggleList[0].parent.active=o,this.compositeModeToggleList[0].parent.active=o,this.EnableAllCompositeModeButton.parent.active=o,e.active=o,this.hideButtonLabel.string=o?"Hide UI":"Show UI"},s.changeTextColor=function(t){this._currentColorIndex++,this._currentColorIndex>=this.strColor.length&&(this._currentColorIndex=0);for(var e=0;e<this.textComponentList.length;e++)this.textComponentList[e].string=this.strColor[this._currentColorIndex]+this.textContentList[e]+"</color>";for(var o=0;o<this.labelComponentList.length;o++)this.labelComponentList[o].color=this.color[this._currentColorIndex]},s.onLoad=function(){},s.update=function(t){},e}(L)).prototype,"compositeModeToggle",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(S.prototype,"singleModeToggle",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=e(S.prototype,"EnableAllCompositeModeButton",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=S))||T));s._RF.pop()}}}));

System.register("chunks:///_virtual/Defines.ts",["cc"],(function(n){var s;return{setters:[function(n){s=n.cclegacy}],execute:function(){s._RF.push({},"82d3a9c71JEkI95d3qscHm8","Defines",void 0);n("ViewParams",(function(){this.config=null,this.params=null,this.callbacks=null,this.valid=!0,this.node=null}));s._RF.pop()}}}));

System.register("chunks:///_virtual/Delegate.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,r,n;return{setters:[function(t){e=t.asyncToGenerator,r=t.regeneratorRuntime},function(t){n=t.cclegacy}],execute:function(){n._RF.push({},"e6c2bWbtY5O3rSemMeKUqav","Delegate",void 0);t("Delegate",function(){function t(){this.list=[]}var n=t.prototype;return n.addListener=function(t,e){for(var r=0;r<this.list.length;r++){var n=this.list[r];if(n&&n.fun===t&&n.target===e)return}var i={target:e,fun:t};this.list.push(i)},n.invoke=function(){var t=e(r().mark((function t(e){var n,i,s;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=[],i=0;case 2:if(!(i<this.list.length)){t.next=10;break}if(s=this.list[i]){t.next=6;break}return t.abrupt("return");case 6:n.push(s.fun.call(s.target,e));case 7:i++,t.next=2;break;case 10:return t.next=12,Promise.all(n);case 12:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),n.removeListener=function(t,e){for(var r=0;r<this.list.length;r++){var n=this.list[r];if(n&&n.fun===t&&n.target===e)return void this.list.splice(r,1)}},n.removeListenerByTarget=function(t){for(var e=0;e<this.list.length;e++){var r=this.list[e];if(r&&r.target===t)return void this.list.splice(e,1)}},t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/DelegateComponent.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Hope.ts"],(function(o){var e,n,t,s,i,a;return{setters:[function(o){e=o.inheritsLoose},function(o){n=o.cclegacy,t=o._decorator,s=o.log,i=o.Component},function(o){a=o.hope}],execute:function(){var p;n._RF.push({},"d8f1fGRD7dBzIeBSkOpd/Py","DelegateComponent",void 0);var c=t.ccclass;o("DelegateComponent",c("DelegateComponent")(p=function(o){function n(){for(var e,n=arguments.length,t=new Array(n),s=0;s<n;s++)t[s]=arguments[s];return(e=o.call.apply(o,[this].concat(t))||this).vp=null,e.onCloseWindow=null,e}e(n,o);var t=n.prototype;return t.add=function(){this.applyComponentsFunction(this.node,"onAdded",this.vp.params),"function"==typeof this.vp.callbacks.onAdded&&this.vp.callbacks.onAdded(this.node,this.vp.params)},t.remove=function(o){this.vp.valid&&(this.applyComponentsFunction(this.node,"onBeforeRemove",this.vp.params),"function"==typeof this.vp.callbacks.onBeforeRemove?this.vp.callbacks.onBeforeRemove(this.node,this.onBeforeRemoveNext.bind(this,o)):this.removed(this.vp,o))},t.onBeforeRemoveNext=function(o){this.removed(this.vp,o)},t.removed=function(o,e){o.valid=!1,o.callbacks&&"function"==typeof o.callbacks.onRemoved&&o.callbacks.onRemoved(this.node,o.params),this.onCloseWindow&&this.onCloseWindow(o),e?(this.node.destroy(),a.res.release(o.config.prefab),s("【界面管理】释放【"+o.config.prefab+"】界面资源")):this.node.removeFromParent()},t.onDestroy=function(){this.applyComponentsFunction(this.node,"onRemoved",this.vp.params),this.vp=null},t.applyComponentsFunction=function(o,e,n){for(var t=0;t<o.components.length;t++){var s=o.components[t],i=s[e];i&&i.call(s,n)}},n}(i))||p);n._RF.pop()}}}));

System.register("chunks:///_virtual/Drag.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,i,n,o,a,r,c,s,u,l,h,b,p,d;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){a=e.cclegacy,r=e._decorator,c=e.Enum,s=e.Node,u=e.Vec2,l=e.NodeEventType,h=e.Vec3,b=e.UITransform,p=e.tween,d=e.Component}],execute:function(){var O,g,f,T,k,I,y,v,m,w,H,S,D,C,q,M,x,P,z,E,L,N,U;a._RF.push({},"3222bC/ES9JUptTWBLONzT4","Drag",void 0);var B=r.ccclass,_=r.property,A=e("FloatType",function(e){return e[e.None=0]="None",e[e.MoveToTop=1]="MoveToTop",e[e.MoveToTopLayer=2]="MoveToTopLayer",e}({})),F=e("DragBackHomeType",function(e){return e[e.SetPosition=0]="SetPosition",e[e.Tween=1]="Tween",e}({})),V=e("DragBackTweenType",function(e){return e[e.Time=0]="Time",e[e.Speed=1]="Speed",e}({})),W=e("EasingString",function(e){return e[e.linear=0]="linear",e[e.smooth=1]="smooth",e[e.fade=2]="fade",e[e.constant=3]="constant",e[e.quadIn=4]="quadIn",e[e.quadOut=5]="quadOut",e[e.quadInOut=6]="quadInOut",e[e.quadOutIn=7]="quadOutIn",e[e.cubicIn=8]="cubicIn",e[e.cubicOut=9]="cubicOut",e[e.cubicInOut=10]="cubicInOut",e[e.cubicOutIn=11]="cubicOutIn",e[e.quartIn=12]="quartIn",e[e.quartOut=13]="quartOut",e[e.quartInOut=14]="quartInOut",e[e.quartOutIn=15]="quartOutIn",e[e.quintIn=16]="quintIn",e[e.quintOut=17]="quintOut",e[e.quintInOut=18]="quintInOut",e[e.quintOutIn=19]="quintOutIn",e[e.sineIn=20]="sineIn",e[e.sineOut=21]="sineOut",e[e.sineInOut=22]="sineInOut",e[e.sineOutIn=23]="sineOutIn",e[e.expoIn=24]="expoIn",e[e.expoOut=25]="expoOut",e[e.expoInOut=26]="expoInOut",e[e.expoOutIn=27]="expoOutIn",e[e.circIn=28]="circIn",e[e.circOut=29]="circOut",e[e.circInOut=30]="circInOut",e[e.circOutIn=31]="circOutIn",e[e.elasticIn=32]="elasticIn",e[e.elasticOut=33]="elasticOut",e[e.elasticInOut=34]="elasticInOut",e[e.elasticOutIn=35]="elasticOutIn",e[e.backIn=36]="backIn",e[e.backOut=37]="backOut",e[e.backInOut=38]="backInOut",e[e.backOutIn=39]="backOutIn",e[e.bounceIn=40]="bounceIn",e[e.bounceOut=41]="bounceOut",e[e.bounceInOut=42]="bounceInOut",e[e.bounceOutIn=43]="bounceOutIn",e}({}));e("Drag",(O=B("Drag"),g=_({tooltip:"触碰点偏移量敏感"}),f=_({tooltip:"失败时回到起始位置"}),T=_({type:c(F),tooltip:"回家的方式",visible:function(){return this.backHomeWhenFailed}}),k=_({type:c(W),tooltip:"缓动类型",visible:function(){return this.backHomeWhenFailed&&this.backHomeType==F.Tween}}),I=_({type:c(A),tooltip:"上浮类型"}),y=_({type:s,visible:function(){return this.floatType==A.MoveToTopLayer}}),v=_({tooltip:"松开后返回原来的层级",visible:function(){return this.floatType!=A.None}}),m=_({type:c(V),tooltip:"拖拽失败后返回类型"}),w=_({tooltip:"拖拽失败后返回初始位置的时间/速度"}),H=_({tooltip:"用于区分点击和拖动的阈值"}),O((C=t((D=function(e){function t(){for(var t,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return t=e.call.apply(e,[this].concat(a))||this,n(t,"touchOffsetSensitive",C,o(t)),n(t,"backHomeWhenFailed",q,o(t)),n(t,"backHomeType",M,o(t)),n(t,"backTweenEasing",x,o(t)),n(t,"floatType",P,o(t)),n(t,"topLayerNode",z,o(t)),n(t,"backToOriZ",E,o(t)),n(t,"backTweenType",L,o(t)),n(t,"backTweenValue",N,o(t)),n(t,"clickThreshold",U,o(t)),t.clickCallback=null,t.checkDragCallback=null,t.dragMoveCallback=null,t.checkSucceedCallback=null,t.succeedCallback=null,t.srcParent=void 0,t.zOrder=void 0,t.dragStartPos=new u(0,0),t.dragOffset=new u(0,0),t.backTween=void 0,t.isMovingBackHome=!1,t.isDragging=!1,t.touchStartPos=new u(0,0),t}i(t,e);var a=t.prototype;return a.start=function(){this.node.on(l.TOUCH_START,this.OnDragStart,this),this.node.on(l.TOUCH_MOVE,this.OnDragMove,this),this.node.on(l.TOUCH_END,this.OnDragEnd,this),this.node.on(l.TOUCH_CANCEL,this.OnDragEnd,this)},a.OnDragStart=function(e){if(!this.isMovingBackHome){this.isDragging=!1,this.dragStartPos.set(this.node.position.x,this.node.position.y);var t=e.getUILocation();switch(this.touchStartPos.set(t.x,t.y),u.subtract(this.dragOffset,this.dragStartPos,t),this.floatType){case A.MoveToTop:this.zOrder=this.node.getSiblingIndex(),this.node.setSiblingIndex(1/0);break;case A.MoveToTopLayer:this.zOrder=this.node.getSiblingIndex(),this.srcParent=this.node.parent,this.node.parent=this.topLayerNode}}},a.OnDragMove=function(e){if(!this.isMovingBackHome){var t=e.getUILocation();if(!this.isDragging){if(!(u.distance(this.touchStartPos,t)>this.clickThreshold&&(!this.checkDragCallback||this.checkDragCallback(e))))return;this.isDragging=!0}var i=this.touchOffsetSensitive?new h(t.x+this.dragOffset.x,t.y+this.dragOffset.y,0):new h(t.x,t.y,0);this.node.setPosition(i),this.dragMoveCallback&&this.dragMoveCallback(e)}},a.OnDragEnd=function(e){if(!this.isMovingBackHome){var t=e.getUILocation(),i=this.node.getComponent(b).getBoundingBoxToWorld();if(this.isDragging)if(this.checkSucceedCallback){var n=this.checkSucceedCallback(e);n?this.succeedCallback&&this.succeedCallback(e,n):this.backHomeWhenFailed&&this.backHome()}else this.backHomeWhenFailed&&this.backHome();else this.clickCallback&&i.contains(t)&&(this.clickCallback(e),this.OnArrivedHome())}},a.backHome=function(){var e=this;this.isMovingBackHome=!0;var t=new h(this.dragStartPos.x,this.dragStartPos.y,0);if(this.backHomeType===F.SetPosition)this.node.setPosition(t),this.OnArrivedHome();else if(this.backHomeType===F.Tween){this.backTween&&this.backTween.stop();var i=W[this.backTweenEasing];if(this.backTweenType===V.Time)this.backTween=p(this.node).to(this.backTweenValue,{position:t},{easing:i}).call((function(){e.OnArrivedHome()})).start();else if(this.backTweenType===V.Speed){var n=u.distance(new u(this.node.position.x,this.node.position.y),new u(t.x,t.y))/this.backTweenValue;this.backTween=p(this.node).to(n,{position:t},{easing:i}).call((function(){e.OnArrivedHome()})).start()}}},a.OnArrivedHome=function(){if(this.backToOriZ)switch(this.floatType){case A.MoveToTop:this.node.setSiblingIndex(this.zOrder);break;case A.MoveToTopLayer:this.node.parent=this.srcParent,this.node.setSiblingIndex(this.zOrder)}this.isMovingBackHome=!1,this.isDragging=!1},a.onDestroy=function(){this.node.off(l.TOUCH_START,this.OnDragStart,this),this.node.off(l.TOUCH_MOVE,this.OnDragMove,this),this.node.off(l.TOUCH_END,this.OnDragEnd,this),this.node.off(l.TOUCH_CANCEL,this.OnDragEnd,this)},t}(d)).prototype,"touchOffsetSensitive",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),q=t(D.prototype,"backHomeWhenFailed",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),M=t(D.prototype,"backHomeType",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return F.SetPosition}}),x=t(D.prototype,"backTweenEasing",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return W.linear}}),P=t(D.prototype,"floatType",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return A.None}}),z=t(D.prototype,"topLayerNode",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=t(D.prototype,"backToOriZ",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),L=t(D.prototype,"backTweenType",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return V.Speed}}),N=t(D.prototype,"backTweenValue",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 300}}),U=t(D.prototype,"clickThreshold",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 20}}),S=D))||S));a._RF.pop()}}}));

System.register("chunks:///_virtual/dynamic_prefab.ts",["./rollupPluginModLoBabelHelpers.js","cc","./frame_loader.ts"],(function(e){var t,n,r,a,i,o,f,s,c,u,d,l,p,b,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,r=e.initializerDefineProperty,a=e.assertThisInitialized,i=e.createClass},function(e){o=e.cclegacy,f=e._decorator,s=e.Prefab,c=e.log,u=e.Node,d=e.CCObject,l=e.instantiate,p=e.warn,b=e.Component},function(e){h=e.default}],execute:function(){var y,m,g,P,v,N,_,C;o._RF.push({},"6f230TPcllM+5KwRxboDTfc","dynamic_prefab",void 0);var w=f.ccclass,D=f.property,L=f.menu,F=f.executeInEditMode;e("DynamicPrefab",(y=L("挂载组件/DynamicPrefab"),m=F(),g=D({type:s,tooltip:"要动态挂载的预设"}),P=D({tooltip:"是否启用分帧加载"}),w(v=y(v=m((_=t((N=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i))||this,r(t,"prefab",_,a(t)),r(t,"enableAsyncLoad",C,a(t)),t._prefabNode=null,t}n(t,e);var o=t.prototype;return o.onLoad=function(){c("DynamicPrefab onLoad:"+this.prefab.name),this.enableAsyncLoad?h.inst.addPendingMount(this):this.mountPrefab()},o.mountPrefabForPreview=function(){var e=new u("PreviewNode");e._objFlags=d.Flags.DontSave;var t=l(this.prefab);e.addChild(t),this.node.addChild(e)},o.getNode=function(){return this.prefabNode||this.mountPrefab(),this.prefabNode},o.getCompt=function(e){return this.getNode().getComponent(e)},o.mountPrefab=function(){if(!this.prefabNode){p("我是通过【同步加载】："+this.prefab.name);var e=l(this.prefab);this.node.addChild(e),this.prefabNode=e}},i(t,[{key:"prefabNode",get:function(){return this._prefabNode},set:function(e){this._prefabNode?p("已经被复值过了!!!!"):this._prefabNode=e}}]),t}(b)).prototype,"prefab",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=t(N.prototype,"enableAsyncLoad",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),v=N))||v)||v)||v));o._RF.pop()}}}));

System.register("chunks:///_virtual/event_game.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"53c5cZJBftKUpSaGa9/fBEL","event_game",void 0);e("GameEvent",function(e){return e.GameServerConnected="GameServerConnected",e.LoginSuccess="LoginSuccess",e.BattleCellCountdownFinish="BattleCellCountdownFinish",e.BattleSetCell="BattleSetCell",e.BattleRefreshUI="BattleRefreshUI",e.BattleMissionClickFinish="BattleMissionClickFinish",e.GameMapClickFinish="GameMapClickFinish",e.GameMapClickLevelUp="GameMapClickLevelUp",e.GameMapClickGoGame="GameMapClickGoGame",e}({}));t._RF.pop()}}}));

System.register("chunks:///_virtual/EventDispatcher.ts",["cc","./MessageManager.ts"],(function(t){var s,n;return{setters:[function(t){s=t.cclegacy},function(t){n=t.MessageEventData}],execute:function(){s._RF.push({},"c680af5iPNKeIO4cArf/90m","EventDispatcher",void 0);t("EventDispatcher",function(){function t(){this._msg=null}var s=t.prototype;return s.on=function(t,s,e){null==this._msg&&(this._msg=new n),this._msg.on(t,s,e)},s.off=function(t){this._msg&&this._msg.off(t)},s.dispatchEvent=function(t){var s;null==this._msg&&(this._msg=new n);for(var e=arguments.length,i=new Array(e>1?e-1:0),c=1;c<e;c++)i[c-1]=arguments[c];(s=this._msg).dispatchEvent.apply(s,[t].concat(i))},s.destroy=function(){this._msg&&this._msg.clear(),this._msg=null},t}());s._RF.pop()}}}));

System.register("chunks:///_virtual/EventMessage.ts",["cc"],(function(E){var e;return{setters:[function(E){e=E.cclegacy}],execute:function(){e._RF.push({},"beea7u9xnJD4rMj6ua/LTcF","EventMessage",void 0);E("EventMessage",function(E){return E.GAME_SHOW="GAME_ENTER",E.GAME_HIDE="GAME_EXIT",E.GAME_RESIZE="GAME_RESIZE",E.GAME_FULL_SCREEN="GAME_FULL_SCREEN",E.GAME_ORIENTATION="GAME_ORIENTATION",E}({}));e._RF.pop()}}}));

System.register("chunks:///_virtual/EventSystem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Delegate.ts"],(function(t){var e,n,i,r,s,o;return{setters:[function(t){e=t.inheritsLoose,n=t.asyncToGenerator,i=t.regeneratorRuntime},function(t){r=t.cclegacy,s=t.Component},function(t){o=t.Delegate}],execute:function(){r._RF.push({},"09d8dc4WTxJ7JUF5QprKmgl","EventSystem",void 0);var a=t("EventSystemUnRegister",function(){function t(t,e,n,i){void 0===i&&(i=null),this.mEventSystem=null,this.mEventType="",this.mOnEvent=null,this.mTarget=null,this.mEventSystem=t,this.mEventType=e,this.mOnEvent=n,this.mTarget=i}var e=t.prototype;return e.UnRegister=function(){this.mEventSystem.UnRegister(this.mEventType,this.mOnEvent,this.mTarget),this.mEventSystem=null,this.mOnEvent=null,this.mTarget=null},e.UnRegisterWhenGameObjectDestroyed=function(t){var e=t.getComponent(u);e||(e=t.addComponent(u)),e.AddUnRegister(this)},t}()),u=t("UnRegisterDestroyTrigger",function(t){function n(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))||this).mUnRegisters=new Set,e}e(n,t);var i=n.prototype;return i.AddUnRegister=function(t){this.mUnRegisters.add(t)},i.onDestroy=function(){this.mUnRegisters.forEach((function(t){t.UnRegister()})),this.mUnRegisters.clear()},n}(s)),c=(t("EventSystem",function(){function t(){this.mEventRegisteration=new Map}var e=t.prototype;return e.Register=function(t,e,n){return this.mEventRegisteration.has(t)||this.mEventRegisteration.set(t,new c),this.mEventRegisteration.get(t).OnEvent.addListener(e,n),new a(this,t,e,n)},e.UnRegister=function(t,e,n){this.mEventRegisteration.has(t)&&this.mEventRegisteration.get(t).OnEvent.removeListener(e,n)},e.UnRegisterByTarget=function(t){this.mEventRegisteration.forEach((function(e,n){e instanceof c&&e.OnEvent.removeListenerByTarget(t)}))},e.Send=function(){var t=n(i().mark((function t(e,n){var r;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.mEventRegisteration.has(e)){t.next=2;break}return t.abrupt("return");case 2:return r=this.mEventRegisteration.get(e),t.next=5,r.OnEvent.invoke(n);case 5:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}(),t}()),t("Registerations",(function(){this.OnEvent=new o})));r._RF.pop()}}}));

System.register("chunks:///_virtual/frame_loader.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){var e,t,i,s,a,o,r,d,c,u;return{setters:[function(n){e=n.inheritsLoose,t=n.createClass},function(n){i=n.cclegacy,s=n._decorator,a=n.game,o=n.instantiate,r=n.warn,d=n.Node,c=n.director,u=n.Component}],execute:function(){var l,h;i._RF.push({},"6184cPPKrREe6VpG1vuA9P1","frame_loader",void 0);var f=s.ccclass;n("default",f(((h=function(n){function i(){for(var e,t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return(e=n.call.apply(n,[this].concat(i))||this).pendingMounts=[],e.isRunning=!1,e}e(i,n);var s=i.prototype;return s.onLoad=function(){i._instance&&i._instance!==this?this.node.destroy():i._instance=this},s.addPendingMount=function(n){this.pendingMounts.push(n),this.isRunning||(this.isRunning=!0,this.schedule(this.loadPendingPrefabs,a.deltaTime))},s.loadPendingPrefabs=function(){for(var n=0;n<1;n++){if(!(this.pendingMounts.length>0)){this.isRunning=!1,this.unschedule(this.loadPendingPrefabs);break}var e=this.pendingMounts.shift();if(!e.prefabNode){var t=o(e.prefab);r("我是通过【分帧加载】："+e.prefab.name),e.node.addChild(t),e.prefabNode=t}}},t(i,null,[{key:"inst",get:function(){if(!this._instance){var n=new d("SingletonNode");this._instance=n.addComponent(i),c.getScene().addChild(n),c.addPersistRootNode(n)}return this._instance}}]),i}(u))._instance=null,l=h))||l);i._RF.pop()}}}));

System.register("chunks:///_virtual/game_map_ctrl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Hope.ts","./game_map_item.ts","./event_game.ts","./BaseCtrl.ts","./mission_model.ts","./config_game_ui.ts","./player_model.ts","./ViewUtil.ts"],(function(e){var t,a,i,n,o,s,l,r,c,u,p,g;return{setters:[function(e){t=e.inheritsLoose},function(e){a=e.cclegacy,i=e.instantiate,n=e.warn},function(e){o=e.hope},function(e){s=e.GameMapItem},function(e){l=e.GameEvent},function(e){r=e.BaseCtrl},function(e){c=e.MissionModel},function(e){u=e.UIID},function(e){p=e.PlayerModel},function(e){g=e.ViewUtil}],execute:function(){a._RF.push({},"720978wNwNCx4dr8aLiJU8A","game_map_ctrl",void 0);e("GameMapCtrl",function(e){function a(){for(var t,a=arguments.length,i=new Array(a),n=0;n<a;n++)i[n]=arguments[n];return(t=e.call.apply(e,[this].concat(i))||this)._compts=[],t}t(a,e);var r=a.prototype;return r.onLoad=function(){for(var e=this,t=o.config.tables.TbGameMap.getDataList(),a=0;a<t.length;a++){var n=i(this.view.prefabPotion),r=n.getComponent(s);this._compts.push(r),n.parent=this.view.layoutMap.node}this.refresh(),o.message.on(l.GameMapClickFinish,this.onHandler,this),o.message.on(l.GameMapClickLevelUp,this.onHandler,this),o.message.on(l.GameMapClickGoGame,this.onHandler,this),g.registerButtonClick(this.view.btnSave,(function(){e.GetModel(p).save()}),this),g.registerButtonClick(this.view.btnRemove,(function(){e.GetModel(p).clear()}),this)},r.onDestroy=function(){o.message.offAllByObject(this)},r.refresh=function(){var e=this;this.GetModel(c).refreshGameMapMission();for(var t=o.config.tables.TbGameMap.getDataList(),a=function(){var a=e._compts[i].getComponent(s),n=t[i],o=e.GetModel(c).getDoingGameMap().find((function(e,t){return e.tId==n.id}));o?(o.process=o.buildLevel/e.GetModel(c).getGameMapBuildLevelMax(o.tId),a.refresh(o)):a.refresh(e.GetModel(c).getGameMapDetail(n.id))},i=0;i<t.length;i++)a()},r.onHandler=function(e,t){var a=this;switch(e){case l.GameMapClickFinish:switch(t.state){case 0:o.gui.toast("该地图还未激活");break;case 1:var i=o.config.tables.TbGameMap.get(t.tId),s="",r=i.unlockCell;s+=o.config.tables.TbCell.get(r.id).name+" "+r.count+" 个",o.gui.tip.alert("你是否花费 "+s+" 激活？",(function(){a.GetModel(c).reqUnlockMap(i.id)?a.refresh():o.gui.toast("材料不足")}),"激活","是的","不要");break;case 2:o.gui.open(u.Battle),o.gui.removeByNode(this.view.node);break;case 3:o.gui.toast("该地图已完成")}break;case l.GameMapClickLevelUp:n(t);for(var p=o.config.tables.TbGameMap.get(t.tId),g=o.config.tables.TbGameMapBuild.getDataList().find((function(e,a){return e.map==p.id&&e.level==t.buildLevel})),f="",m=g.needCell,d=0;d<m.length;d++){var h=m[d];f+=o.config.tables.TbCell.get(h.id).name+" "+h.count+" 个 "}var v=g.reward;f+="获取： "+o.config.tables.TbCell.get(v.id).name+" "+v.count+" 个 ",f+="和 exp "+g.rewardExp+" ",o.gui.tip.alert("你是否花费 "+f+" 升级？",(function(){a.GetModel(c).reqBuildLevelUp(t.tId,t.buildLevel)?a.refresh():o.gui.toast("材料不足")}),"升级","是的","不要");break;case l.GameMapClickGoGame:o.gui.open(u.Battle),o.gui.removeByNode(this.view.node)}},a}(r));a._RF.pop()}}}));

System.register("chunks:///_virtual/game_map_item.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameComponent.ts","./ViewUtil.ts","./Hope.ts","./event_game.ts"],(function(e){var t,i,a,n,r,l,s,o,c,p,u,b,h,m;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,a=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){r=e.cclegacy,l=e._decorator,s=e.Node,o=e.Button,c=e.Label,p=e.ProgressBar},function(e){u=e.GameComponent},function(e){b=e.ViewUtil},function(e){h=e.hope},function(e){m=e.GameEvent}],execute:function(){var g,f,d,v,w,y,G,_,z,L,k,M,C,U,F,P,I,N,S;r._RF.push({},"cc8c7zhDzRG0LO4NIQfsTGi","game_map_item",void 0);var B=l.ccclass,R=l.property;e("GameMapItem",(g=B("GameMapItem"),f=R(s),d=R(o),v=R(o),w=R(o),y=R(c),G=R(c),_=R(p),z=R(c),g((M=t((k=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),l=0;l<i;l++)r[l]=arguments[l];return t=e.call.apply(e,[this].concat(r))||this,a(t,"nodeImgNpc",M,n(t)),a(t,"btnFinish",C,n(t)),a(t,"btnLevelUp",U,n(t)),a(t,"btnMap",F,n(t)),a(t,"labelName",P,n(t)),a(t,"labelState",I,n(t)),a(t,"barProcess",N,n(t)),a(t,"labelReward",S,n(t)),t._data=void 0,t}i(t,e);var r=t.prototype;return r.onLoad=function(){b.registerButtonClick(this.btnFinish,this.onFinish,this),b.registerButtonClick(this.btnLevelUp,this.onLevelUp,this),b.registerButtonClick(this.btnMap,this.onGame,this)},r.refresh=function(e){this._data=e;var t=h.config.tables.TbGameMap.get(e.tId);this.labelName.string="建筑名："+t.name;for(var i="",a=0;a<t.reward.length;a++){var n=t.reward[a];i+=h.config.tables.TbCell.get(n.id).name+" "+n.count+" 个"}switch(this.labelReward.string="奖励："+i+" exp: "+t.rewardExp,e.state){case 0:this.labelState.string=e.state+":未激活0";break;case 1:this.labelState.string=e.state+":可以激活";break;case 2:this.labelState.string=e.state+":已经激活";break;case 3:this.labelState.string=e.state+":已完成"}this.barProcess.node.active=2==e.state,this.btnLevelUp.node.active=2==e.state,this.barProcess.node.active&&(this.barProcess.progress=e.process)},r.onFinish=function(){h.message.dispatchEvent(m.GameMapClickFinish,this._data)},r.onLevelUp=function(){h.message.dispatchEvent(m.GameMapClickLevelUp,this._data)},r.onGame=function(){h.message.dispatchEvent(m.GameMapClickGoGame,this._data)},t}(u)).prototype,"nodeImgNpc",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=t(k.prototype,"btnFinish",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=t(k.prototype,"btnLevelUp",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=t(k.prototype,"btnMap",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=t(k.prototype,"labelName",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=t(k.prototype,"labelState",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N=t(k.prototype,"barProcess",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=t(k.prototype,"labelReward",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=k))||L));r._RF.pop()}}}));

System.register("chunks:///_virtual/game_map.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseView.ts","./game_map_ctrl.ts"],(function(e){var t,r,n,a,i,o,l,u,c,p,s,f;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,n=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){i=e.cclegacy,o=e._decorator,l=e.Prefab,u=e.Layout,c=e.Button},function(e){p=e.BindCtrl,s=e.BaseView},function(e){f=e.GameMapCtrl}],execute:function(){var b,m,y,v,g,_,h,w,d,z,M,B;i._RF.push({},"3327a2eZZ1DGKVe5vS2vuKj","game_map",void 0);var P=o.ccclass,D=o.property;e("GameMap",(b=P("GameMap"),m=p(f),y=D(l),v=D(u),g=D(c),_=D(c),b(h=m((d=t((w=function(e){function t(){for(var t,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i))||this,n(t,"prefabPotion",d,a(t)),n(t,"layoutMap",z,a(t)),n(t,"btnSave",M,a(t)),n(t,"btnRemove",B,a(t)),t}return r(t,e),t}(s)).prototype,"prefabPotion",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(w.prototype,"layoutMap",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=t(w.prototype,"btnSave",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=t(w.prototype,"btnRemove",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=w))||h)||h));i._RF.pop()}}}));

System.register("chunks:///_virtual/GameComponent.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventDispatcher.ts","./EventMessage.ts","./ViewUtil.ts","./ButtonTouchLong.ts","./Hope.ts"],(function(e){var t,n,o,s,i,a,r,h,u,c,f,l,d,p,v,E,y,m;return{setters:[function(e){t=e.inheritsLoose,n=e.createClass},function(e){o=e.cclegacy,s=e._decorator,i=e.Prefab,a=e.instantiate,r=e.error,h=e.Node,u=e.Button,c=e.EventHandler,f=e.input,l=e.Input,d=e.Component},function(e){p=e.EventDispatcher},function(e){v=e.EventMessage},function(e){E=e.ViewUtil},function(e){y=e.ButtonTouchLong},function(e){m=e.hope}],execute:function(){var g;o._RF.push({},"10e9e2FeLpJzq1QuR4SWa2s","GameComponent",void 0);var P=s.ccclass,G=function(e){return e[e.Load=0]="Load",e[e.LoadDir=1]="LoadDir",e[e.Audio=2]="Audio",e}(G||{});e("GameComponent",P("GameComponent")(g=function(e){function o(){for(var t,n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(t=e.call.apply(e,[this].concat(o))||this)._event=null,t.nodes=null,t.resPaths=null,t}t(o,e);var s=o.prototype;return s.on=function(e,t,n){this.event.on(e,t,n)},s.off=function(e){this.event.off(e)},s.dispatchEvent=function(e){for(var t,n=arguments.length,o=new Array(n>1?n-1:0),s=1;s<n;s++)o[s-1]=arguments[s];(t=this.event).dispatchEvent.apply(t,[e].concat(o))},s.getNode=function(e){if(this.nodes)return this.nodes.get(e)},s.nodeTreeInfoLite=function(){this.nodes=new Map,E.nodeTreeInfoLite(this.node,this.nodes)},s.createPrefabNode=function(e){var t=m.res.get(e,i);return a(t)},s.createPrefabNodeAsync=function(e){var t=this;return new Promise((function(n,o){t.load(e,i,(function(t,o){if(t)r("名为【"+e+"】的资源加载失败"),n(null);else{var s=a(o);n(s)}}))}))},s.getRes=function(e,t,n){return m.res.get(e,t,n)},s.addPathToRecord=function(e,t,n){null==this.resPaths&&(this.resPaths=new Map);var o=this.resPaths.get(e);if(null==o&&(o=new Map,this.resPaths.set(e,o)),n instanceof Array)for(var s=t,i=0;i<n.length;i++){var a=n[i],r=s+":"+a;o.has(r)||o.set(r,{path:a,bundle:s})}else if("string"==typeof n){var h=t,u=n,c=h+":"+u;o.has(c)||o.set(c,{path:u,bundle:h})}else{var f=m.res.defaultBundleName,l=t,d=f+":"+l;o.has(d)||o.set(d,{path:l,bundle:f})}},s.loadAsync=function(e,t,n){return this.addPathToRecord(G.Load,e,t),m.res.loadAsync(e,t,n)},s.load=function(e,t,n,o,s){this.addPathToRecord(G.Load,e,t),m.res.load(e,t,n,o,s)},s.loadDir=function(e,t,n,o,s){var i,a;"string"==typeof t?(i=t,a=e):(i=e,a=m.res.defaultBundleName),this.addPathToRecord(G.LoadDir,a,i),m.res.loadDir(e,t,n,o,s)},s.release=function(){if(this.resPaths){var e=this.resPaths.get(G.Load);e&&(e.forEach((function(e){m.res.release(e.path,e.bundle)})),e.clear())}},s.releaseDir=function(){if(this.resPaths){var e=this.resPaths.get(G.LoadDir);e&&e.forEach((function(e){m.res.releaseDir(e.path,e.bundle)}))}},s.releaseAudioEffect=function(){if(this.resPaths){var e=this.resPaths.get(G.Audio);e&&e.forEach((function(e){m.audio.releaseEffect(e.path,e.bundle)}))}},s.playMusic=function(e,t,n){m.audio.playMusic(e,t,n)},s.playMusicLoop=function(e,t){m.audio.stopMusic(),m.audio.playMusicLoop(e,t)},s.playEffect=function(e,t,n){null==n&&(n=m.res.defaultBundleName),this.addPathToRecord(G.Audio,n,e),m.audio.playEffect(e,t,n)},s.setButton=function(){var e=this;this.node.on(h.EventType.TOUCH_END,(function(t){var n=e[t.target.name];n?n.call(e,t):t.target!=e.node&&null==t.target.getComponent(y)&&r("名为【"+t.target.name+"】的按钮事件方法不存在")}),this);var t=/<([^>]+)>/;this.node.getComponentsInChildren(u).forEach((function(n){var o=n.node;if(e[o.name]){var s=new c;s.target=e.node,s.handler=n.node.name,s.component=e.name.match(t)[1],n.clickEvents.push(s)}else r("名为【"+o.name+"】的按钮事件方法不存在")}))},s.setEvent=function(){for(var e=this,t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];for(var s=0,i=n;s<i.length;s++){var a=i[s],h=e[a];h?this.on(a,e[a],this):r("名为【"+a+"】的全局事方法不存在")}},s.setKeyboard=function(e){e?(f.on(l.EventType.KEY_DOWN,this.onKeyDown,this),f.on(l.EventType.KEY_UP,this.onKeyUp,this),f.on(l.EventType.KEY_PRESSING,this.onKeyPressing,this)):(f.off(l.EventType.KEY_DOWN,this.onKeyDown,this),f.off(l.EventType.KEY_UP,this.onKeyUp,this),f.off(l.EventType.KEY_PRESSING,this.onKeyPressing,this))},s.onKeyDown=function(e){},s.onKeyUp=function(e){},s.onKeyPressing=function(e){},s.setGameShow=function(){this.on(v.GAME_SHOW,this.onGameShow,this)},s.setGameHide=function(){this.on(v.GAME_HIDE,this.onGameHide,this)},s.setGameResize=function(){this.on(v.GAME_RESIZE,this.onGameResize,this)},s.setGameFullScreen=function(){this.on(v.GAME_FULL_SCREEN,this.onGameFullScreen,this)},s.setGameOrientation=function(){this.on(v.GAME_ORIENTATION,this.onGameOrientation,this)},s.onGameShow=function(){},s.onGameHide=function(){},s.onGameResize=function(){},s.onGameFullScreen=function(){},s.onGameOrientation=function(){},s.onDestroy=function(){this._event&&(this._event.destroy(),this._event=null),this.nodes&&(this.nodes.clear(),this.nodes=null),this.resPaths&&(this.releaseAudioEffect(),this.release(),this.releaseDir(),this.resPaths.clear(),this.resPaths=null)},n(o,[{key:"event",get:function(){return null==this._event&&(this._event=new p),this._event}}]),o}(d))||g);o._RF.pop()}}}));

System.register("chunks:///_virtual/GameConfig.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,n,a;return{setters:[function(t){e=t.createClass},function(t){n=t.cclegacy,a=t.log}],execute:function(){n._RF.push({},"b174f91JvNJy6zOPgIzQUvv","GameConfig",void 0);t("GameConfig",function(){function t(t){this._data=null,this._data=Object.freeze(t.json),a(this._data,"游戏配置")}return e(t,[{key:"version",get:function(){return this._data.config.version}},{key:"package",get:function(){return this._data.config.package}},{key:"frameRate",get:function(){return this._data.config.frameRate}},{key:"localDataKey",get:function(){return this._data.config.localDataKey}},{key:"localDataIv",get:function(){return this._data.config.localDataIv}},{key:"httpServer",get:function(){return this._data.config.httpServer}},{key:"httpTimeout",get:function(){return this._data.config.httpTimeout}},{key:"language",get:function(){return this._data.language.type||["zh"]}},{key:"languagePathJson",get:function(){return this._data.language.path.json||"language/json"}},{key:"languagePathTexture",get:function(){return this._data.language.path.texture||"language/texture"}},{key:"bundleEnable",get:function(){return this._data.bundle.enable}},{key:"bundleServer",get:function(){return this._data.bundle.server}},{key:"bundleName",get:function(){return this._data.bundle.name}},{key:"bundleVersion",get:function(){return this._data.bundle.version}},{key:"data",get:function(){return this._data}}]),t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/GameQueryConfig.ts",["./rollupPluginModLoBabelHelpers.js","cc","./StringUtil.ts"],(function(t){var e,n,r,i,a;return{setters:[function(t){e=t.createClass},function(t){n=t.cclegacy,r=t.sys,i=t.log},function(t){a=t.StringUtil}],execute:function(){n._RF.push({},"4b650KvxiJHaq+BXF0QFgSd","GameQueryConfig",void 0);t("GameQueryConfig",function(){function t(){this._data=null,r.isBrowser?(this._data=this.parseUrl(),this._data.username||(this._data.username=a.guid()),i(this._data,"查询参数")):this._data={}}return t.prototype.parseUrl=function(){if("object"!=typeof window)return{};if(!window.document)return{};var t=window.document.location.href.toString().split("?");if("string"==typeof t[1]){for(var e={},n=0,r=(t=t[1].split("&")).length;n<r;++n){var i=t[n],a=i.indexOf("=");if(!(a<0)){var u=i.substring(0,a),o=i.substring(a+1);e[decodeURIComponent(u)]=o&&decodeURIComponent(o)}}return e}return{}},e(t,[{key:"debug",get:function(){return this._data.debug}},{key:"username",get:function(){return this._data.username}},{key:"lang",get:function(){return this._data.lang||"zh"}},{key:"data",get:function(){return this._data}}]),t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/GUI.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var i,e,r,n,s,o,h,a,l,c;return{setters:[function(t){i=t.inheritsLoose},function(t){e=t.cclegacy,r=t._decorator,n=t.UITransform,s=t.view,o=t.math,h=t.screen,a=t.ResolutionPolicy,l=t.log,c=t.Component}],execute:function(){var u;e._RF.push({},"9461cd/dGNEGK5I5J24xY6L","GUI",void 0);var g=r.ccclass;t("GUI",g("GUI")(u=function(t){function e(){for(var i,e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(i=t.call.apply(t,[this].concat(r))||this).portrait=void 0,i.portraitDrz=null,i.landscapeDrz=null,i.transform=null,i}i(e,t);var r=e.prototype;return r.onLoad=function(){this.init()},r.init=function(){this.transform=this.getComponent(n),s.getDesignResolutionSize().width>s.getDesignResolutionSize().height?(this.landscapeDrz=s.getDesignResolutionSize(),this.portraitDrz=new o.Size(this.landscapeDrz.height,this.landscapeDrz.width)):(this.portraitDrz=s.getDesignResolutionSize(),this.landscapeDrz=new o.Size(this.portraitDrz.height,this.portraitDrz.width)),this.resize()},r.resize=function(){var t;t=s.getDesignResolutionSize().width>s.getDesignResolutionSize().height?this.landscapeDrz:this.portraitDrz;var i=h.windowSize,e=i.width,r=i.height,n=e,o=r;e/r>t.width/t.height?(n=(o=t.height)*e/r,this.portrait=!1):(o=(n=t.width)*r/e,this.portrait=!0),s.setDesignResolutionSize(n,o,a.UNKNOWN),this.transform.width=n,this.transform.height=o,l(t,"设计尺寸"),l(i,"屏幕尺寸")},e}(c))||u);e._RF.pop()}}}));

System.register("chunks:///_virtual/Hope.ts",["cc","./Config.ts"],(function(o){var i,e;return{setters:[function(o){i=o.cclegacy},function(o){e=o.Config}],execute:function(){i._RF.push({},"76f44zLaEFN87TTPvJKqHrO","Hope",void 0);o("version","1.2.0");var n=o("hope",(function(){}));n.config=new e,n.storage=void 0,n.res=void 0,n.message=void 0,n.timer=void 0,n.audio=void 0,n.gui=void 0,i._RF.pop()}}}));

System.register("chunks:///_virtual/Hot.ts",["cc"],(function(t){var e,s,o,a,n,i;return{setters:[function(t){e=t.cclegacy,s=t.log,o=t.sys,a=t.resources,n=t.error,i=t.native}],execute:function(){e._RF.push({},"3b339hX38ZE/IglKIg47pyj","Hot",void 0);t("HotOptions",function(){function t(){this.onVersionInfo=null,this.onNeedToUpdate=null,this.onNoNeedToUpdate=null,this.onUpdateFailed=null,this.onUpdateSucceed=null,this.onUpdateProgress=null}return t.prototype.check=function(){for(var t in this)if("check"!==t&&!this[t])return s("参数HotOptions."+t+"未设置！"),!1;return!0},t}());t("Hot",function(){function t(){this.assetsMgr=null,this.options=null,this.state=t.State.None,this.storagePath="",this.manifest=""}var e=t.prototype;return e.init=function(t){var e=this;o.isNative&&t.check()&&(this.options=t,this.assetsMgr||a.load("project",(function(t,s){if(t)n("【热更新界面】缺少热更新配置文件");else{e.showSearchPath(),e.manifest=s.nativeUrl,e.storagePath=i.fileUtils.getWritablePath()+"hope_framework_remote",e.assetsMgr=new i.AssetsManager(e.manifest,e.storagePath,(function(t,s){var o;console.log("【热更新】客户端版本: "+t+", 当前最新版本: "+s),(null==(o=e.options)?void 0:o.onVersionInfo)&&e.options.onVersionInfo({local:t,server:s});for(var a=t.split("."),n=s.split("."),i=0;i<a.length;++i){var l=parseInt(a[i]),r=parseInt(n[i]||"0");if(l!==r)return l-r}return n.length>a.length?-1:0})),e.assetsMgr.setVerifyCallback((function(t,e){e.compressed,e.md5,e.path,e.size;return!0}));var o=e.assetsMgr.getLocalManifest();console.log("【热更新】热更资源存放路径: "+e.storagePath),console.log("【热更新】本地资源配置路径: "+e.manifest),console.log("【热更新】本地包地址: "+o.getPackageUrl()),console.log("【热更新】远程 project.manifest 地址: "+o.getManifestFileUrl()),console.log("【热更新】远程 version.manifest 地址: "+o.getVersionFileUrl()),e.checkUpdate()}})))},e.clearHotUpdateStorage=function(){i.fileUtils.removeDirectory(this.storagePath)},e.checkUpdate=function(){this.assetsMgr?this.assetsMgr.getState()!==jsb.AssetsManager.State.UNINITED?this.assetsMgr.getLocalManifest().isLoaded()?(this.assetsMgr.setEventCallback(this.onHotUpdateCallBack.bind(this)),this.state=t.State.Check,this.assetsMgr.checkUpdate()):console.log("【热更新】加载本地 manifest 失败 ..."):n("【热更新】未初始化"):console.log("【热更新】请先初始化")},e.hotUpdate=function(){this.assetsMgr?(this.assetsMgr.setEventCallback(this.onHotUpdateCallBack.bind(this)),this.state=t.State.Update,this.assetsMgr.update()):console.log("【热更新】请先初始化")},e.onHotUpdateCallBack=function(e){var s,o,a=e.getEventCode();switch(a){case i.EventAssetsManager.ALREADY_UP_TO_DATE:console.log("【热更新】当前版本与远程版本一致且无须更新"),(null==(s=this.options)?void 0:s.onNoNeedToUpdate)&&this.options.onNoNeedToUpdate(a);break;case i.EventAssetsManager.NEW_VERSION_FOUND:console.log("【热更新】发现新版本,请更新"),(null==(o=this.options)?void 0:o.onNeedToUpdate)&&this.options.onNeedToUpdate(a,this.assetsMgr.getTotalBytes());break;case i.EventAssetsManager.ASSET_UPDATED:console.log("【热更新】资产更新");break;case i.EventAssetsManager.UPDATE_PROGRESSION:var n;if(this.state===t.State.Update)console.log("【热更新】更新中...",e.getDownloadedFiles(),e.getTotalFiles(),e.getPercent()),(null==(n=this.options)?void 0:n.onUpdateProgress)&&this.options.onUpdateProgress(e);break;case i.EventAssetsManager.UPDATE_FINISHED:this.onUpdateFinished();break;default:this.onUpdateFailed(a)}},e.onUpdateFailed=function(t){var e;this.assetsMgr.setEventCallback(null),(null==(e=this.options)?void 0:e.onUpdateFailed)&&this.options.onUpdateFailed(t)},e.onUpdateFinished=function(){var t;this.assetsMgr.setEventCallback(null);var e=i.fileUtils.getSearchPaths(),s=this.assetsMgr.getLocalManifest().getSearchPaths();Array.prototype.unshift.apply(e,s),localStorage.setItem("HotUpdateSearchPaths",JSON.stringify(e)),i.fileUtils.setSearchPaths(e),console.log("【热更新】更新成功"),(null==(t=this.options)?void 0:t.onUpdateSucceed)&&this.options.onUpdateSucceed()},e.showSearchPath=function(){console.log("========================搜索路径========================");for(var t=i.fileUtils.getSearchPaths(),e=0;e<t.length;e++)console.log("["+e+"]: "+t[e]);console.log("======================================================")},t}()).State={None:0,Check:1,Update:2},e._RF.pop()}}}));

System.register("chunks:///_virtual/HotUpdate.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Hot.ts"],(function(t){var e,o,n,r,a,i,s,c,l,p,u,d,g,f,h;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,n=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){a=t.cclegacy,i=t._decorator,s=t.ProgressBar,c=t.Label,l=t.sys,p=t.game,u=t.warn,d=t.director,g=t.Component},function(t){f=t.Hot,h=t.HotOptions}],execute:function(){var b,U,y,T,v,w,x,m,H;a._RF.push({},"24f51jBC45K+p+Y7VhdL0zg","HotUpdate",void 0);var F=i.ccclass,N=i.property;t("HotUpdate",(b=F("HotUpdate"),U=N(s),y=N(c),T=N(c),b((x=e((w=function(t){function e(){for(var e,o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))||this).hot=new f,n(e,"progress",x,r(e)),n(e,"labProgress",m,r(e)),n(e,"labText",H,r(e)),e}o(e,t);var a=e.prototype;return a.onLoad=function(){l.isNative?(this.labText.string="检查更新中",this.startHotUpdate()):this.startGame()},a.startHotUpdate=function(){var t=this,e=new h;e.onVersionInfo=function(t){console.log("【热更新界面】本地版本:"+t.local+",远程版本:"+t.server)},e.onUpdateProgress=function(e){var o,n,r=e.getPercent(),a=e.getTotalBytes(),i=e.getDownloadedBytes();a<1048576?o=(a=Math.ceil(a/1024))+"K":(o=(a/1048576).toFixed(1),o+="M"),i<1048576?n=(i=Math.ceil(i/1024))+"K":(n=(i/1048576).toFixed(1),n+="M"),t.labText.string="0K"==o?"检查更新中":"更新中： "+n+" /"+o+"  ( "+parseInt(100*r+"")+"  %)",isNaN(e.getPercent())||(t.progress.progress=e.getPercent())},e.onNeedToUpdate=function(e,o){t.labText.string="发现新版本资源";var n="";o<1048576?n=Math.ceil(o/1024)+"KB":(n=(o/1048576).toFixed(1),n+="MB"),t.checkForceUpdate((function(){t.showUpdateDialog(n,(function(){t.hot.hotUpdate()}))}))},e.onNoNeedToUpdate=function(){t.labText.string="不需要更新",t.startGame()},e.onUpdateFailed=function(){t.labText.string="更新失败",t.hot.checkUpdate()},e.onUpdateSucceed=function(){t.progress.progress=1,t.labText.string="更新成功",setTimeout((function(){p.restart()}),1e3)},this.hot.init(e)},a.checkForceUpdate=function(t){var e=this;u({title:"系统提示",content:"当前版本过旧，需要下载新的安装包才能进行游戏，是否更新？",okWord:"确定",cancelWord:"取消",okFunc:function(){e.hot.clearHotUpdateStorage(),t()},cancelFunc:function(){p.end()},needCancel:!0}),t()},a.showUpdateDialog=function(t,e){l.getNetworkType()!=l.NetworkType.LAN||e()},a.startGame=function(){d.loadScene("root_game")},e}(g)).prototype,"progress",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=e(w.prototype,"labProgress",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),H=e(w.prototype,"labText",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=w))||v));a._RF.pop()}}}));

System.register("chunks:///_virtual/ICanGetModel.ts",["cc"],(function(){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"db968dB7yBFj4+3Sfv+vimf","ICanGetModel",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/ICanGetSystem.ts",["cc"],(function(){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"141ddBnNEVLVbKtZGWI94O4","ICanGetSystem",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/ICanRegisterEvent.ts",["cc"],(function(){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"a1b17kRm/5J4J8xEXSpkUqL","ICanRegisterEvent",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/ICanSendCommand.ts",["cc"],(function(){var n;return{setters:[function(e){n=e.cclegacy}],execute:function(){n._RF.push({},"3c806GBdvBDBLwv3UesXbr6","ICanSendCommand",void 0),n._RF.pop()}}}));

System.register("chunks:///_virtual/ICanSendEvent.ts",["cc"],(function(){var e;return{setters:[function(n){e=n.cclegacy}],execute:function(){e._RF.push({},"95776UDcYBGA4KdQsQHNDKd","ICanSendEvent",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/ICanSetArchitecture.ts",["cc"],(function(){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"e07e9HDyolIor0GIM6jzyo6","ICanSetArchitecture",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/ICommand.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,n,r;return{setters:[function(t){e=t.asyncToGenerator,n=t.regeneratorRuntime},function(t){r=t.cclegacy}],execute:function(){r._RF.push({},"c6eb0NpjnhI0LZZzICuqs2v","ICommand",void 0);t("AbstractCommand",function(){function t(){this.mArchitecture=null}var r=t.prototype;return r.Execute=function(){var t=e(n().mark((function t(){return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.OnExecute();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.SetArchitecture=function(t){this.mArchitecture=t},r.GetModel=function(t){return this.mArchitecture.GetModel(t)},r.SendEvent=function(t,e){return void 0===e&&(e=null),this.mArchitecture.SendEvent(t,e)},r.SendCommand=function(t){return this.mArchitecture.SendCommand(t)},t}());r._RF.pop()}}}));

System.register("chunks:///_virtual/IController.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"4b308au9Q5GOLLOrt1/aWrA","IController",void 0);t("AbstractController",function(){function t(){}var e=t.prototype;return e.GetModel=function(t){return this.GetArchitecture().GetModel(t)},e.SendCommand=function(t){return this.GetArchitecture().SendCommand(t)},e.SendEvent=function(t,e){return this.GetArchitecture().SendEvent(t,e)},e.RegisterEvent=function(t,e,n){return this.GetArchitecture().RegisterEvent(t,e,n)},e.UnRegisterEvent=function(t,e,n){this.GetArchitecture().UnRegisterEvent(t,e,n)},e.UnRegisterEventByTarget=function(t){this.GetArchitecture().UnRegisterEventByTarget(t)},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/ImageUtil.ts",["cc"],(function(e){var t,n,r;return{setters:[function(e){t=e.cclegacy,n=e.Color,r=e.Texture2D}],execute:function(){t._RF.push({},"c5280CLHlBCjaF87hlKsCaS","ImageUtil",void 0);e("ImageUtil",function(){function e(){}return e.getPixelColor=function(e,t,r){var a=document.createElement("canvas"),i=a.getContext("2d");a.width=e.width,a.height=e.height;var o=e.getHtmlElementObj();i.drawImage(o,0,0,e.width,e.height);var c=i.getImageData(0,0,e.width,e.height),g=(r-1)*e.width*4+4*(t-1),u=c.data.slice(g,g+4),l=new n(u[0],u[1],u[2],u[3]);return o.remove(),a.remove(),l},e.imageToBase64=function(e,t){return new Promise((function(n){var r,a=null==(r=/\.png|\.jpg|\.jpeg/.exec(e))?void 0:r[0];if([".png",".jpg",".jpeg"].includes(a)){var i=document.createElement("canvas"),o=i.getContext("2d"),c=new Image;c.src=e,c.onload=function(){i.height=c.height,i.width=c.width,o.drawImage(c,0,0),a=".jpg"===a?"jpeg":a.replace(".","");var e=i.toDataURL("image/"+a);t&&t(e),n(e),c.remove(),i.remove()}}else console.warn("Not a jpg/jpeg or png resource!"),t&&t(""),n("")}))},e.base64ToTexture=function(e){var t=document.createElement("img");t.src=e;var n=new r;return n.initWithElement(t),t.remove(),n},e.base64ToBlob=function(e){for(var t=e.split(","),n=/image\/\w+|;/.exec(t[0])[0],r=window.atob(t[1]),a=new ArrayBuffer(r.length),i=new Uint8Array(a),o=0;o<r.length;o++)i[o]=255&r.charCodeAt(o);return new Blob([i],{type:n})},e}());t._RF.pop()}}}));

System.register("chunks:///_virtual/IModel.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"043c54vUm5M35xayS1HNc8m","IModel",void 0);t("AbstractModel",function(){function t(){this.mArchitecture=null}var e=t.prototype;return e.SetArchitecture=function(t){this.mArchitecture=t},e.GetModel=function(t){return this.mArchitecture.GetModel(t)},e.SendEvent=function(t,e){this.mArchitecture.SendEvent(t,e)},e.Init=function(){this.OnInit()},t}()),t("ModelDecorator",(function(t){return function(e){e.prototype.__className=t,e.prototype.__classType=e}}));e._RF.pop()}}}));

System.register("chunks:///_virtual/IOCContainer.ts",["cc"],(function(t){var n;return{setters:[function(t){n=t.cclegacy}],execute:function(){n._RF.push({},"203dagkn+ZHnLZ5c3HAUCJN","IOCContainer",void 0);t("IOCContainer",function(){function t(){this.m=new Map}var n=t.prototype;return n.Register=function(t,n){this.m.set(t,n)},n.Get=function(t){return this.m.has(t)?this.m.get(t):(console.error("IOCContainer err, get instance fail with "+t),null)},t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/ISystem.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"b242a+okRRC3ZfKIhPvmoWP","ISystem",void 0);t("AbstractSystem",function(){function t(){this.mArchitecture=null}var e=t.prototype;return e.SetArchitecture=function(t){this.mArchitecture=t},e.GetModel=function(t){var e;return null==(e=this.mArchitecture)?void 0:e.GetModel(t)},e.GetSystem=function(t){return this.mArchitecture.GetSystem(t)},e.RegisterEvent=function(t,e,n){return this.mArchitecture.RegisterEvent(t,e,n)},e.UnRegisterEvent=function(t,e,n){this.mArchitecture.UnRegisterEvent(t,e,n)},e.SendEvent=function(t,e){this.mArchitecture.SendEvent(t,e)},e.SendCommand=function(t){this.mArchitecture.SendCommand(t)},e.Update=function(){this.OnUpdate()},t}()),t("SystemDecorator",(function(t){return function(e){e.prototype.__className=t,e.prototype.__classType=e}}));e._RF.pop()}}}));

System.register("chunks:///_virtual/JsonUtil.ts",["cc","./ResLoader.ts"],(function(n){var e,s,t;return{setters:[function(n){e=n.cclegacy,s=n.JsonAsset},function(n){t=n.resLoader}],execute:function(){e._RF.push({},"86901aQAjtEgoY3jWlFIlef","JsonUtil",void 0);var o="config/game/",a=new Map;n("JsonUtil",function(){function n(){}return n.get=function(n){if(a.has(n))return a.get(n)},n.load=function(n,e){if(a.has(n))e(a.get(n));else{var r=o+n;t.load(r,s,(function(s,t){s?(console.warn(s.message),e(null)):(a.set(n,t.json),e(t.json))}))}},n.loadAsync=function(n){return new Promise((function(e,r){if(a.has(n))e(a.get(n));else{var c=o+n;t.load(c,s,(function(s,t){s?(console.warn(s.message),e(null)):(a.set(n,t.json),e(t.json))}))}}))},n.release=function(n){var e=o+n;a.delete(n),t.release(e)},n}());e._RF.pop()}}}));

System.register("chunks:///_virtual/LayerDialog.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Defines.ts","./LayerPopup.ts"],(function(a){var s,t,e,i;return{setters:[function(a){s=a.inheritsLoose},function(a){t=a.cclegacy},function(a){e=a.ViewParams},function(a){i=a.LayerPopUp}],execute:function(){t._RF.push({},"dcad5w8wHlEDJpIKJ4gUxEP","LayerDialog",void 0);a("LayerDialog",function(a){function t(){for(var s,t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return(s=a.call.apply(a,[this].concat(e))||this).params=[],s}s(t,a);var i=t.prototype;return i.add=function(a,s,t){this.ui_nodes.size>0?this.params.push({config:a,params:s,callbacks:t}):(this.black.enabled=!0,this.show(a,s,t))},i.show=function(a,s,t){var i=this.ui_cache.get(a.prefab);return null==i&&((i=new e).valid=!0,i.config=a),i.params=s||{},i.callbacks=null!=t?t:{},this.ui_nodes.set(i.config.prefab,i),this.load(i,a.bundle),a.prefab},i.onCloseWindow=function(s){a.prototype.onCloseWindow.call(this,s),setTimeout(this.next.bind(this),0)},i.setBlackDisable=function(){0==this.params.length&&(this.black.enabled=!1,this.closeVacancyRemove(),this.closeMask())},i.next=function(){if(this.params.length>0){var a=this.params.shift();this.show(a.config,a.params,a.callbacks)}},t}(i));t._RF.pop()}}}));

System.register("chunks:///_virtual/LayerManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GUI.ts","./DelegateComponent.ts","./LayerDialog.ts","./LayerNotify.ts","./LayerPopup.ts","./LayerUI.ts","./UIMap.ts","./TipsManager.ts"],(function(e){var t,i,a,n,o,s,r,p,c,u,h,f,l,d,y,g,v;return{setters:[function(e){t=e.asyncToGenerator,i=e.createClass,a=e.regeneratorRuntime},function(e){n=e.cclegacy,o=e.warn,s=e.Node,r=e.Layers,p=e.Widget,c=e.Camera},function(e){u=e.GUI},function(e){h=e.DelegateComponent},function(e){f=e.LayerDialog},function(e){l=e.LayerNotify},function(e){d=e.LayerPopUp},function(e){y=e.LayerUI},function(e){g=e.UIMap},function(e){v=e.TipsManager}],execute:function(){n._RF.push({},"7ba675xFGdHqIOykTysNzEu","LayerManager",void 0);var m=e("LayerType",function(e){return e.Game="LayerGame",e.UI="LayerUI",e.PopUp="LayerPopUp",e.Dialog="LayerDialog",e.System="LayerSystem",e.Notify="LayerNotify",e.Guide="LayerGuide",e}({}));e("LayerManager",function(){var e=n.prototype;function n(e){this.root=void 0,this.camera=void 0,this.game=void 0,this.guide=void 0,this.uiMap=void 0,this.ui=void 0,this.popup=void 0,this.dialog=void 0,this.system=void 0,this.notify=void 0,this.configs={},this._tip=void 0,this.root=e,this.camera=this.root.getComponentInChildren(c),this.game=this.create_node(m.Game),this.ui=new y(m.UI),this.popup=new d(m.PopUp),this.dialog=new f(m.Dialog),this.system=new f(m.System),this.notify=new l(m.Notify),this.guide=this.create_node(m.Guide),e.addChild(this.game),e.addChild(this.ui),e.addChild(this.popup),e.addChild(this.dialog),e.addChild(this.system),e.addChild(this.notify),e.addChild(this.guide)}return e.init=function(e){this.configs=e},e.toast=function(e,t){void 0===t&&(t=!1),this.notify.toast(e,t)},e.waitOpen=function(){this.notify.waitOpen()},e.waitClose=function(){this.notify.waitClose()},e.setConfig=function(e,t){this.configs[e]=t},e.setUIMap=function(e){null==this.uiMap&&(this.uiMap=new g),this.uiMap.init(this,e)},e.open=function(e,t,i){void 0===t&&(t=null);var a=this.configs[e];if(null!=a)switch(a.layer){case m.UI:this.ui.add(a,t,i);break;case m.PopUp:this.popup.add(a,t,i);break;case m.Dialog:this.dialog.add(a,t,i);break;case m.System:this.system.add(a,t,i)}else o("打开编号为【"+e+"】的界面失败，配置信息不存在")},e.openAsync=function(){var e=t(a().mark((function e(t,i){var n=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===i&&(i=null),e.abrupt("return",new Promise((function(e,a){var o={onAdded:function(t,i){e(t)},onLoadFailure:function(){e(null)}};n.open(t,i,o)})));case 2:case"end":return e.stop()}}),e)})));return function(t,i){return e.apply(this,arguments)}}(),e.replace=function(e,t,i){void 0===i&&(i=null),this.open(t,i),this.remove(e)},e.replaceAsync=function(e,i,n){var o=this;return void 0===n&&(n=null),new Promise(t(a().mark((function t(s,r){var p;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.openAsync(i,n);case 2:p=t.sent,o.remove(e),s(p);case 5:case"end":return t.stop()}}),t)}))))},e.has=function(e){var t=this.configs[e];if(null==t)return o("编号为【"+e+"】的界面配置不存在，配置信息不存在"),!1;var i=!1;switch(t.layer){case m.UI:i=this.ui.has(t.prefab);break;case m.PopUp:i=this.popup.has(t.prefab);break;case m.Dialog:i=this.dialog.has(t.prefab);break;case m.System:i=this.system.has(t.prefab)}return i},e.get=function(e){var t=this.configs[e];if(null==t)return o("编号为【"+e+"】的界面配置不存在，配置信息不存在"),null;var i=null;switch(t.layer){case m.UI:i=this.ui.get(t.prefab);break;case m.PopUp:i=this.popup.get(t.prefab);break;case m.Dialog:i=this.dialog.get(t.prefab);break;case m.System:i=this.system.get(t.prefab)}return i},e.remove=function(e,t){var i=this.configs[e];if(null!=i)switch(i.layer){case m.UI:this.ui.remove(i.prefab,t);break;case m.PopUp:this.popup.remove(i.prefab,t);break;case m.Dialog:this.dialog.remove(i.prefab,t);break;case m.System:this.system.remove(i.prefab,t)}else o("删除编号为【"+e+"】的界面失败，配置信息不存在")},e.removeByNode=function(e,t){if(e instanceof s){var i=e.getComponent(h);if(i&&i.vp){if(e.parent)e.parent.remove(i.vp.config.prefab,t);else if(t)switch(i.vp.config.layer){case m.UI:this.ui.removeCache(i.vp.config.prefab);break;case m.PopUp:this.popup.removeCache(i.vp.config.prefab);break;case m.Dialog:this.dialog.removeCache(i.vp.config.prefab);break;case m.System:this.system.removeCache(i.vp.config.prefab)}}else o("当前删除的node不是通过界面管理器添加到舞台上"),e.destroy()}},e.clear=function(e){void 0===e&&(e=!1),this.ui.clear(e),this.popup.clear(e),this.dialog.clear(e),this.system.clear(e)},e.create_node=function(e){var t=new s(e);t.layer=r.Enum.UI_2D;var i=t.addComponent(p);return i.isAlignLeft=i.isAlignRight=i.isAlignTop=i.isAlignBottom=!0,i.left=i.right=i.top=i.bottom=0,i.alignMode=2,i.enabled=!0,t},i(n,[{key:"portrait",get:function(){return this.root.getComponent(u).portrait}},{key:"tip",get:function(){return this._tip||(this._tip=new v),this._tip}}]),n}());n._RF.pop()}}}));

System.register("chunks:///_virtual/LayerNotify.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Notify.ts","./ViewUtil.ts"],(function(t){var i,n,e,o,a,s,l,r,f,h;return{setters:[function(t){i=t.inheritsLoose},function(t){n=t.cclegacy,e=t.Layers,o=t.BlockInputEvents,a=t.find,s=t.instantiate,l=t.Widget,r=t.Node},function(t){f=t.Notify},function(t){h=t.ViewUtil}],execute:function(){n._RF.push({},"da14ax+B2xNsL2taQFOh7we","LayerNotify",void 0);t("LayerNotify",function(t){function n(i){var n;(n=t.call(this,i)||this).black=void 0,n.wait=null,n.notify=null,n.notifyItem=null;var e=n.addComponent(l);return e.isAlignLeft=e.isAlignRight=e.isAlignTop=e.isAlignBottom=!0,e.left=e.right=e.top=e.bottom=0,e.alignMode=2,e.enabled=!0,n.init(),n}i(n,t);var r=n.prototype;return r.init=function(){this.layer=e.Enum.UI_2D,this.black=this.addComponent(o),this.black.enabled=!1},r.waitOpen=function(){null==this.wait&&(this.wait=h.createPrefabNode("common/prefab/wait")),null==this.wait.parent&&(this.wait.parent=this,this.black.enabled=!0)},r.waitClose=function(){this.wait.parent&&(this.wait.parent=null,this.black.enabled=!1)},r.toast=function(t,i){var n=this;try{null==this.notify&&(this.notify=h.createPrefabNode("common/prefab/notify"),this.notifyItem=a("item",this.notify),this.notifyItem.parent=null),this.notify.parent=this;var e=s(this.notifyItem),o=e.getChildByName("prompt").getComponent(f);e.parent=this.notify,o.onComplete=function(){0==n.notify.children.length&&(n.notify.parent=null)},o.toast(t,i),this.notify.children.length>3&&this.notify.children[0].destroy()}catch(t){console.error("从oops-game-kit项目中拷贝 assets/bundle/common/prefab/notify.prefab 与 assets/bundle/common/anim/notify.anim 覆盖到本项目中")}},n}(r));n._RF.pop()}}}));

System.register("chunks:///_virtual/LayerPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LayerUI.ts","./ViewUtil.ts"],(function(e){var t,n,i,o,s,a,c,h;return{setters:[function(e){t=e.inheritsLoose,n=e.createForOfIteratorHelperLoose},function(e){i=e.cclegacy,o=e.Layers,s=e.BlockInputEvents,a=e.Node},function(e){c=e.LayerUI},function(e){h=e.ViewUtil}],execute:function(){i._RF.push({},"25d07BQBCFADaSsh/I3GrTX","LayerPopup",void 0);e("LayerPopUp",function(e){function i(t){var n;return(n=e.call(this,t)||this).black=void 0,n.mask=void 0,n.init(),n}t(i,e);var c=i.prototype;return c.init=function(){this.layer=o.Enum.UI_2D,this.black=this.addComponent(s),this.black.enabled=!1},c.showUi=function(t){e.prototype.showUi.call(this,t),this.openVacancyRemove(t.config),this.black.enabled=!0},c.onCloseWindow=function(t){e.prototype.onCloseWindow.call(this,t),this.setBlackDisable()},c.setBlackDisable=function(){0==this.ui_nodes.size&&(this.black.enabled=!1),this.closeVacancyRemove(),this.closeMask()},c.closeMask=function(){for(var e,t=!0,i=n(this.ui_nodes.values());!(e=i()).done;){if(e.value.config.mask){t=!1;break}}t&&(this.mask.parent=null)},c.openVacancyRemove=function(e){this.hasEventListener(a.EventType.TOUCH_END,this.onTouchEnd,this)||this.on(a.EventType.TOUCH_END,this.onTouchEnd,this),null==this.mask&&(this.mask=h.createPrefabNode("common/prefab/mask")),e.mask&&(this.mask.parent=this,this.mask.setSiblingIndex(0))},c.closeVacancyRemove=function(){for(var e,t=!0,i=n(this.ui_nodes.values());!(e=i()).done;){if(e.value.config.vacancy){t=!1;break}}t&&this.hasEventListener(a.EventType.TOUCH_END,this.onTouchEnd,this)&&this.off(a.EventType.TOUCH_END,this.onTouchEnd,this)},c.onTouchEnd=function(e){var t=this;e.target===this&&this.ui_nodes.forEach((function(e){e.valid&&e.config.vacancy&&t.remove(e.config.prefab,e.config.destroy)}))},c.clear=function(t){e.prototype.clear.call(this,t),this.black.enabled=!1,this.active=!1,this.closeVacancyRemove(),this.closeMask()},i}(c));i._RF.pop()}}}));

System.register("chunks:///_virtual/LayerUI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Defines.ts","./DelegateComponent.ts","./Hope.ts"],(function(e){var n,o,i,t,a,s,r,c;return{setters:[function(e){n=e.inheritsLoose},function(e){o=e.cclegacy,i=e.instantiate,t=e.Widget,a=e.Node},function(e){s=e.ViewParams},function(e){r=e.DelegateComponent},function(e){c=e.hope}],execute:function(){o._RF.push({},"bc8b86Br9dGeKxeLijkyJKE","LayerUI",void 0);e("LayerUI",function(e){function o(n){var o;(o=e.call(this,n)||this).ui_nodes=new Map,o.ui_cache=new Map;var i=o.addComponent(t);return i.isAlignLeft=i.isAlignRight=i.isAlignTop=i.isAlignBottom=!0,i.left=i.right=i.top=i.bottom=0,i.alignMode=2,i.enabled=!0,o}n(o,e);var a=o.prototype;return a.add=function(e,n,o){if(this.ui_nodes.has(e.prefab))console.warn("路径为【"+e.prefab+"】的预制重复加载");else{var i=this.ui_cache.get(e.prefab);null==i&&((i=new s).config=e),this.ui_nodes.set(e.prefab,i),i.params=null!=n?n:{},i.callbacks=null!=o?o:{},i.valid=!0,this.load(i,e.bundle)}},a.load=function(e,n){var o=this;e&&e.node?this.showUi(e):(n=n||c.res.defaultBundleName,c.res.load(n,e.config.prefab,(function(n,t){if(n)return o.ui_nodes.delete(e.config.prefab),console.warn("路径为【"+e.config.prefab+"】的预制加载失败"),void(e.callbacks&&e.callbacks.onLoadFailure&&e.callbacks.onLoadFailure());var a=i(t);e.node=a;var s=a.addComponent(r);s.vp=e,s.onCloseWindow=o.onCloseWindow.bind(o),o.showUi(e)})))},a.onCloseWindow=function(e){this.ui_nodes.delete(e.config.prefab)},a.showUi=function(e){e.node.getComponent(r).add(),e.node.parent=this,e.valid=!0},a.remove=function(e,n){var o=void 0;void 0!==n&&(o=n);var i=this.ui_nodes.get(e);i&&(void 0===o&&(o=void 0===i.config.destroy||i.config.destroy),!1===o&&this.ui_cache.set(i.config.prefab,i),i.node.getComponent(r).remove(o));!0===o&&this.removeCache(e)},a.removeCache=function(e){var n=this.ui_cache.get(e);n&&(this.ui_nodes.delete(n.config.prefab),this.ui_cache.delete(e),n.node.destroy())},a.get=function(e){var n=this.ui_nodes.get(e);return n?n.node:null},a.has=function(e){return this.ui_nodes.has(e)},a.clear=function(e){var n=this;this.ui_nodes.forEach((function(o,i){n.remove(o.config.prefab,e),o.valid=!1})),this.ui_nodes.clear(),e&&this.ui_cache.forEach((function(e,o){n.removeCache(o)}))},o}(a));o._RF.pop()}}}));

System.register("chunks:///_virtual/List.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n;return{setters:[function(e){t=e.createClass},function(e){n=e.cclegacy}],execute:function(){n._RF.push({},"0b0c3p3VohCzI2RC+AGcpH6","List",void 0);e("List",function(){function e(e){void 0===e&&(e=!0),this.element=void 0,this.only=!1,this.count=0,this.only=e,this.element=[]}var n=e.prototype;return n.push=function(e){if(this.only&&this.element.indexOf(e)>=0)return!1;return this.element.push(e),this.count=this.element.length,!0},n.unshift=function(e){if(this.only&&this.element.indexOf(e)>=0)return!1;return this.element.unshift(e),this.count=this.element.length,!0},n.pop=function(){if(this.element.length>0){var e=this.element.pop();return this.count=this.element.length,e}return null},n.shift=function(){if(this.element.length>0){var e=this.element.shift();return this.count=this.element.length,e}return null},n.removeAt=function(e){if(e>=this.element.length)throw new Error("删除索引超出范围！");var t=this.element[e];return this.element.splice(e,1),this.count=this.element.length,t},n.remove=function(e){var t=this.element.indexOf(e);if(t<0)throw new Error("要删除的内容不在列表中！"+e);this.element[t];this.element.splice(t,1),this.count=this.element.length},n.clear=function(){this.count=0,this.element.length=0},n.has=function(e){return this.find(e)>=0},n.find=function(e){return this.element.indexOf(e)},n.findIndex=function(e){return this.element.findIndex(e)},n.get=function(e){if(e>=this.element.length)throw new Error("超出索引范围:"+e+"/"+this.element.length);return this.element[e]},t(e,[{key:"elements",get:function(){return this.element}}]),e}());n._RF.pop()}}}));

System.register("chunks:///_virtual/LoadingIndicator.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var o,i,n,r,e,a,l,c;return{setters:[function(t){o=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){e=t.cclegacy,a=t._decorator,l=t.Node,c=t.Component}],execute:function(){var s,d,u,p,g;e._RF.push({},"95143M/82NCOLKGzw14JlmS","LoadingIndicator",void 0);var h=a.ccclass,f=a.property;t("LoadingIndicator",(s=h("LoadingIndicator"),d=f(l),s((g=o((p=function(t){function o(){for(var o,i=arguments.length,e=new Array(i),a=0;a<i;a++)e[a]=arguments[a];return o=t.call.apply(t,[this].concat(e))||this,n(o,"loading",g,r(o)),o.loading_rotate=0,o}return i(o,t),o.prototype.update=function(t){this.loading_rotate+=220*t,this.loading.setRotationFromEuler(0,0,-this.loading_rotate%360),this.loading_rotate>360&&(this.loading_rotate-=360)},o}(c)).prototype,"loading",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),u=p))||u));e._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./debug-view-runtime-control.ts","./architecture.ts","./ByteBuf.ts","./config_game_ui.ts","./event_game.ts","./schema.ts","./bag.ts","./bag_ctrl.ts","./bag_item_cell.ts","./battle.ts","./battle_ctrl.ts","./cell.ts","./cell_base.ts","./cell_bg.ts","./mission_item.ts","./mission_item_cell.ts","./game_map.ts","./game_map_ctrl.ts","./game_map_item.ts","./bag_model.ts","./battle_model.ts","./mission_model.ts","./player_model.ts","./Hope.ts","./Root.ts","./BaseCtrl.ts","./BaseView.ts","./Architecture2.ts","./ICanSetArchitecture.ts","./ICommand.ts","./IController.ts","./IModel.ts","./ISystem.ts","./ICanGetModel.ts","./ICanGetSystem.ts","./ICanRegisterEvent.ts","./ICanSendCommand.ts","./ICanSendEvent.ts","./Delegate.ts","./EventSystem.ts","./IOCContainer.ts","./AudioEffect.ts","./AudioManager.ts","./AudioMusic.ts","./BuildTimeConstants.ts","./Config.ts","./GameConfig.ts","./GameQueryConfig.ts","./EventDispatcher.ts","./EventMessage.ts","./MessageManager.ts","./ResLoader.ts","./StorageManager.ts","./Timer.ts","./TimerManager.ts","./DateExt.ts","./NodeExt.ts","./GUI.ts","./Defines.ts","./DelegateComponent.ts","./LayerDialog.ts","./LayerManager.ts","./LayerNotify.ts","./LayerPopup.ts","./LayerUI.ts","./UIMap.ts","./CommonPrompt.ts","./LoadingIndicator.ts","./Notify.ts","./TipsManager.ts","./ArrayUtil.ts","./CameraUtil.ts","./ImageUtil.ts","./JsonUtil.ts","./MathUtil.ts","./ObjectUtil.ts","./PlatformUtil.ts","./RegexUtil.ts","./StringUtil.ts","./TimeUtils.ts","./Vec3Util.ts","./ViewUtil.ts","./List.ts","./TwoDimensionalArray.ts","./dynamic_prefab.ts","./frame_loader.ts","./Badge.ts","./RoundRectMask.ts","./ButtonEffect.ts","./ButtonSimple.ts","./ButtonTouchLong.ts","./UIButton.ts","./Drag.ts","./outline.ts","./RenderAlternative.ts","./RenderReactiveHandler.ts","./GameComponent.ts","./ResSpine.ts","./ResSprite.ts","./Hot.ts","./HotUpdate.ts","./root_game.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/MathUtil.ts",["cc"],(function(t){var n;return{setters:[function(t){n=t.cclegacy}],execute:function(){n._RF.push({},"f98ce3ouc9B4KtzcYXPnT+8","MathUtil",void 0);var r=t("MathUtil",function(){function t(){}return t.sign=function(t){return t>0?1:t<0?-1:0},t.progress=function(t,n,r){return t+(n-t)*r},t.lerp=function(t,n,r){return r>1?r=1:r<0&&(r=0),t*(1-r)+n*r},t.lerpAngle=function(n,r,e){var u=(r%=360)-(n%=360);return u>180?r=n-(360-u):u<-180&&(r=n+(360+u)),(t.lerp(n,r,e)%360+360)%360},t.angleTowards=function(t,n,r){var e=(n%=360)-(t%=360);e>180?n=t-(360-e):e<-180&&(n=t+(360+e));var u=n-t;return r>Math.abs(u)?n:((t+r*Math.sign(u))%360+360)%360},t.clamp=function(t,n,r){return t<n?n:t>r?r:t},t.probability=function(t){return Math.random()<t},t}());r.deg2Rad=Math.PI/180,r.rad2Deg=180/Math.PI,n._RF.pop()}}}));

System.register("chunks:///_virtual/MessageManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n,r,s;return{setters:[function(e){t=e.createForOfIteratorHelperLoose},function(e){n=e.cclegacy,r=e.warn,s=e.log}],execute:function(){n._RF.push({},"a401fY+wj9NsqOACoZ7Zy/R","MessageManager",void 0);var o=function(){this.event=void 0,this.listener=void 0,this.object=void 0},a=(e("MessageEventData",function(){function e(){this.events=new Map}var n=e.prototype;return n.on=function(e,t,n){var r=this.events.get(e);null==r&&(r=[],this.events.set(e,r));var s=new o;s.event=e,s.listener=t,s.object=n,r.push(s),i.on(e,t,n)},n.off=function(e){var n=this.events.get(e);if(n){for(var r,s=t(n);!(r=s()).done;){var o=r.value;i.off(e,o.listener,o.object)}this.events.delete(e)}},n.dispatchEvent=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];i.dispatchEvent.apply(i,[e].concat(n))},n.clear=function(){for(var e in this.events)this.off(e)},e}()),e("MessageManager",function(){function e(){this.events=new Map}var n=e.prototype;return n.on=function(e,t,n){if(e&&t){var s=this.events.get(e);null==s&&(s=[],this.events.set(e,s));for(var a=s.length,i=0;i<a;i++){var v=s[i];v.listener==t&&v.object==n&&r("名为【"+e+"】的事件重复注册侦听器")}var c=new o;c.event=e,c.listener=t,c.object=n,s.push(c)}else r("注册【"+e+"】事件的侦听器函数为空")},n.once=function(e,t,n){var r=this,s=function(o){r.off(e,s,n),s=null;for(var a=arguments.length,i=new Array(a>1?a-1:0),v=1;v<a;v++)i[v-1]=arguments[v];t.call(n,o,i)};this.on(e,s,n)},n.off=function(e,t,n){var r=this.events.get(e);if(r){for(var o=r.length,a=0;a<o;a++){var i=r[a];if(i.listener==t&&i.object==n){r.splice(a,1);break}}0==r.length&&this.events.delete(e)}else s("名为【"+e+"】的事件不存在")},n.dispatchEvent=function(e){var t=this.events.get(e);if(null!=t){for(var n=t.concat(),r=n.length,s=arguments.length,o=new Array(s>1?s-1:0),a=1;a<s;a++)o[a-1]=arguments[a];for(var i=0;i<r;i++){var v,c=n[i];(v=c.listener).call.apply(v,[c.object,e].concat(o))}}},n.offAllByObject=function(e){for(var n,r=t(this.events.entries());!(n=r()).done;){for(var s=n.value,o=s[0],a=s[1],i=a.length-1;i>=0;i--)a[i].object===e&&a.splice(i,1);0===a.length&&this.events.delete(o)}},e}())),i=e("message",new a);n._RF.pop()}}}));

System.register("chunks:///_virtual/mission_item_cell.ts",["./rollupPluginModLoBabelHelpers.js","cc","./cell_base.ts"],(function(e){var t,n,o,i,l,r,s,c,a,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,o=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){l=e.cclegacy,r=e._decorator,s=e.Node,c=e.Color,a=e.Component},function(e){p=e.CellBase}],execute:function(){var u,f,m,h,y,d,g;l._RF.push({},"4c638SxNqlLnZFW1l7sq+wk","mission_item_cell",void 0);var I=r.ccclass,_=r.property;e("MissionItemCell",(u=I("MissionItemCell"),f=_(p),m=_(s),u((d=t((y=function(e){function t(){for(var t,n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return t=e.call.apply(e,[this].concat(l))||this,o(t,"comptCell",d,i(t)),o(t,"nodeImgInfo",g,i(t)),t}return n(t,e),t.prototype.refresh=function(e,t){this.comptCell.refresh(e),this.nodeImgInfo.color=t?new c(0,255,0):new c(255,255,255)},t}(a)).prototype,"comptCell",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g=t(y.prototype,"nodeImgInfo",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h=y))||h));l._RF.pop()}}}));

System.register("chunks:///_virtual/mission_item.ts",["./rollupPluginModLoBabelHelpers.js","cc","./mission_item_cell.ts","./ViewUtil.ts","./Hope.ts","./GameComponent.ts","./event_game.ts","./ResSprite.ts"],(function(e){var t,i,n,r,l,o,a,s,c,u,p,m,b,d,f,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){l=e.cclegacy,o=e._decorator,a=e.Node,s=e.Button,c=e.Label,u=e.log},function(e){p=e.MissionItemCell},function(e){m=e.ViewUtil},function(e){b=e.hope},function(e){d=e.GameComponent},function(e){f=e.GameEvent},function(e){h=e.default}],execute:function(){var g,v,w,I,_,y,C,F,R,z,D,M,N,T,x;l._RF.push({},"03249ZvVlxJhYnN6sVg7tNw","mission_item",void 0);var B=o.ccclass,L=o.property;e("MissionItem",(g=B("MissionItem"),v=L([p]),w=L(a),I=L(s),_=L(c),y=L(a),C=L(c),g((z=t((R=function(e){function t(){for(var t,i=arguments.length,l=new Array(i),o=0;o<i;o++)l[o]=arguments[o];return t=e.call.apply(e,[this].concat(l))||this,n(t,"comptItemCell",z,r(t)),n(t,"nodeImgNpc",D,r(t)),n(t,"btnFinish",M,r(t)),n(t,"labelRewardCount",N,r(t)),n(t,"nodeImgReward",T,r(t)),n(t,"labelDebug",x,r(t)),t._data=void 0,t}i(t,e);var l=t.prototype;return l.onLoad=function(){m.registerButtonClick(this.btnFinish,this.onFinish,this)},l.refresh=function(e){u(e),this._data=e;var t=b.config.tables.TbMission.get(e.tId),i=t.npc_ref.res||t.npc_ref.id;h.replaceSpriteFrame(this.nodeImgNpc,"texture/npc/"+i);var n=b.config.tables.TbCell.get(e.reward1.tId),r=n.res||n.id;h.replaceSpriteFrame(this.nodeImgReward,"texture/battle/cell/"+r),this.labelRewardCount.string="+"+e.reward1.count;for(var l=0;l<this.comptItemCell.length;l++){var o=this.comptItemCell[l],a=e.cellTIds[l];a?(o.refresh(a,!!e.haveCell_[l]),o.node.active=!0):o.node.active=!1}this.btnFinish.node.active=e.cellTIds.every((function(t,i){return e.haveCell_[i]})),this.labelDebug.string=t.name},l.onFinish=function(){b.message.dispatchEvent(f.BattleMissionClickFinish,this._data)},t}(d)).prototype,"comptItemCell",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),D=t(R.prototype,"nodeImgNpc",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=t(R.prototype,"btnFinish",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=t(R.prototype,"labelRewardCount",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=t(R.prototype,"nodeImgReward",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=t(R.prototype,"labelDebug",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=R))||F));l._RF.pop()}}}));

System.register("chunks:///_virtual/mission_model.ts",["./rollupPluginModLoBabelHelpers.js","cc","./IModel.ts","./player_model.ts","./Hope.ts","./ArrayUtil.ts","./battle_model.ts","./bag_model.ts"],(function(e){var i,t,n,a,r,s,l,o,d,u,p,c,h;return{setters:[function(e){i=e.inheritsLoose,t=e.createForOfIteratorHelperLoose,n=e.createClass},function(e){a=e.cclegacy,r=e.warn,s=e.log},function(e){l=e.ModelDecorator,o=e.AbstractModel},function(e){d=e.PlayerModel},function(e){u=e.hope},function(e){p=e.ArrayUtil},function(e){c=e.BattleModel},function(e){h=e.BagModel}],execute:function(){var f;a._RF.push({},"5af66d74JJAlKSpf5/xhkfL","mission_model",void 0);e("MissionModel",l("MissionModel")(f=function(e){function a(){for(var i,t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return(i=e.call.apply(e,[this].concat(n))||this)._modelPlayer=void 0,i._modelBattle=void 0,i._modelBag=void 0,i._tbMissionGroupByType=null,i}i(a,e);var l=a.prototype;return l.OnInit=function(){},l.refreshMission=function(){var e=this.getTbMissionsGroupByType(),i=this.getDoingMissionTypes();for(var t in r("refreshMission[start]",e,i),e)if(i.includes(t))s("任务类型"+t+"已经有了",e[t]);else{var n=this.generateMissionByType(t);n&&n.tId&&this.player.data.mission.doing.push(n)}var a=this.battle.getAllValidCells();a.forEach((function(e){e.isMissionNeed=!1})),this.player.data.mission.doing.forEach((function(e){e.haveCell_=new Array(e.cellTIds.length)})),this.player.data.mission.doing.forEach((function(e){for(var i=function(){var i=e.cellTIds[t],n=a.filter((function(e){return e.cellId==i}));if(n.length>0)return n[0].isMissionNeed=!0,e.haveCell_[t]=n[0],1},t=0;t<e.cellTIds.length&&!i();t++);})),r("refreshMission[end]",this.player.data.mission)},l.refreshGameMapMission=function(){var e=this,i=this.player.data.mission.mapDoing;i.forEach((function(t){var n=e.getGameMapDetail(t.tId),a=i.findIndex((function(e){return e.tId===t.tId}));-1!==a?i[a]=n:r("---------注意")})),r("refreshGameMapMission[end]",this.player.data.mission.mapDoing)},l.reqUnlockMap=function(e){r(e);var i=u.config.tables.TbGameMap.get(e);if(r(i),this.bag.removeBag(i.unlockCell.id,i.unlockCell.count)){for(var t=0;t<i.reward.length;t++)this.bag.addReward(i.reward[t].id,i.reward[t].count);return this.GetModel(d).data.exp+=i.rewardExp,this.player.data.mission.mapDoing.push({tId:i.id,buildLevel:1}),!0}return!1},l.reqBuildLevelUp=function(e,i){r(e);var t=u.config.tables.TbGameMap.get(e);r(t);var n=u.config.tables.TbGameMapBuild.getDataList().find((function(e,n){return e.map==t.id&&e.level==i}));return r(n.needCell),!!this.bag.removeBags(n.needCell)&&(this.bag.addReward(n.reward.id,n.reward.count),this.GetModel(d).data.exp+=n.rewardExp,this.player.data.mission.mapDoing.find((function(i,t){return i.tId==e})).buildLevel++,this.getGameMapBuildLevel(e)>=this.getGameMapBuildLevelMax(e)&&this.player.data.mission.mapDoneTIds.push(e),!0)},l.getGameMapDetail=function(e){var i=u.config.tables.TbGameMap.get(e),t=0,n=0;r(this.player.data.mission.mapDoing);var a=this.player.data.mission.mapDoing.findIndex((function(i){return i.tId===e}));if(-1==a)t=this.player.levelInfo.level>=i.unlockLevel?1:0;else{t=2;var s=this.player.data.mission.mapDoing[a];n=s.buildLevel?s.buildLevel:1}return this.player.data.mission.mapDoneTIds.includes(e)&&(t=3),{tId:e,state:t,buildLevel:n}},l.getGameMapBuildLevel=function(e){var i=this.player.data.mission.mapDoing.find((function(i,t){return i.tId==e}));return this.player.data.mission.mapDoing.find((function(i){return i.tId===e}))?this.getGameMapBuildLevelMax(e):i?i.buildLevel:0},l.getGameMapBuildLevelMax=function(e){return u.config.tables.TbGameMapBuild.getDataList().filter((function(i,t){return i.map==e})).reduce((function(e,i){return i.level>e.level?i:e})).level},l.getDoingGameMap=function(){return this.player.data.mission.mapDoing},l.getDoingMissionTypes=function(){for(var e,i=[],n=t(this.getDoingMissions());!(e=n()).done;){var a=e.value,r=u.config.tables.TbMission.get(a.tId);i.includes(r.type)||i.push(r.type)}return i},l.getDoingMissionByType=function(e){return this.getDoingMissions().find((function(i){return u.config.tables.TbMission.get(i.tId).type==e}))},l.getDoingMissions=function(){return this.player.data.mission.doing},l.generateMissionByType=function(e){var i=this,n=this.getTbMissionsGroupByType();s("准备生成任务类型"+e,n[e]);for(var a,r=[],l=t(n[e]);!(a=l()).done;){var o=a.value,d=!0;if(this.player.levelInfo.level>=o.unlockLevel.mix&&this.player.levelInfo.level<=o.unlockLevel.max||(s("等级不够",o),d=!1),o.unlockMission.every((function(e){return i.player.data.mission.doneTIds.includes(e)}))||(s("前置任务未完成",o),d=!1),o.unlockOnlyOne&&this.player.data.mission.doneTIds.includes(o.id)&&(s("任务只触发一次，已经完成",o),d=!1),p.isValidArray(o.unlockCell)){s("需要物品",o.unlockCell);for(var u=function(){var e=o.unlockCell[c];if(!i.player.data.grid.find((function(i){return i.active&&i.cellId==e.id})))return s("没有这个物品",o),d=!1,1},c=0;c<o.unlockCell.length&&!u();c++);}d&&r.push(o)}if(p.isValidArray(r)){var h=p.getRandomValueInArray(r),f=[];p.isValidArray(h.rewardNeedCell1)&&f.push(this.player.getRandomIdFromChances(h.rewardNeedCell1).id),p.isValidArray(h.rewardNeedCell2)&&f.push(this.player.getRandomIdFromChances(h.rewardNeedCell2).id),p.isValidArray(h.rewardNeedCell3)&&f.push(this.player.getRandomIdFromChances(h.rewardNeedCell3).id);var g=this.player.getRandomIdFromChances(h.reward1),m=this.player.getRandomIdFromChances(h.reward2),y={cellTIds:f,tId:h.id,haveCell_:new Array(f.length),reward1:g,reward2:m};return s("成功生成任务类型"+e,y,h),y}return s("失败生成任务类型"+e),null},l.reqFinishMission=function(e){this.player.data.mission.doneTIds.push(e.tId),this.player.data.mission.doing=this.player.data.mission.doing.filter((function(i){return i.tId!=e.tId})),this.bag.addReward(e.reward1.tId,e.reward1.count),e.reward2&&this.bag.addReward(e.reward2.tId,e.reward2.count)},l.getTbMissionsGroupByType=function(){if(!this._tbMissionGroupByType){var e=u.config.tables.TbMission.getDataList();this._tbMissionGroupByType=p.groupBy(e,"type")}return this._tbMissionGroupByType},n(a,[{key:"player",get:function(){return this._modelPlayer||(this._modelPlayer=this.GetModel(d)),this._modelPlayer}},{key:"battle",get:function(){return this._modelBattle||(this._modelBattle=this.GetModel(c)),this._modelBattle}},{key:"bag",get:function(){return this._modelBag||(this._modelBag=this.GetModel(h)),this._modelBag}}]),a}(o))||f);a._RF.pop()}}}));

System.register("chunks:///_virtual/NodeExt.ts",["cc"],(function(){var t,e,o,n,i,r,s,c,u,p,l,a,h,g,f,y,d,_,v,m,C,P,b;return{setters:[function(x){t=x.cclegacy,e=x.Node,o=x.UITransform,n=x.Size,i=x.UIOpacity,r=x.UIRenderer,s=x.Color,c=x.v3,u=x.Graphics,p=x.Label,l=x.RichText,a=x.Sprite,h=x.Button,g=x.Canvas,f=x.EditBox,y=x.Layout,d=x.PageView,_=x.ProgressBar,v=x.ScrollView,m=x.Slider,C=x.Toggle,P=x.Widget,b=x.Mask}],execute:function(){if(t._RF.push({},"3b310nEWQxLSJHamj3HO91i","NodeExt",void 0),!e.prototype.$__definedProperties__){e.prototype.$__definedProperties__=!0;var x={uiGraphics:u,uiLabel:p,uiRichText:l,uiSprite:a,uiButton:h,uiCanvas:g,uiEditBox:f,uiLayout:y,uiPageView:d,uiProgressBar:_,uiScrollView:v,uiSlider:m,uiToggle:C,uiWidget:P,uiOpacity:i,uiTransform:o,uiMask:b},O=function(t){Object.defineProperty(e.prototype,t,{get:function(){return this.getComponent(x[t])},set:function(t){}})};for(var j in x)O(j);Object.defineProperty(e.prototype,"angle_x",{get:function(){return this.eulerAngles.x},set:function(t){var e=this;e.setRotationFromEuler(t,e.eulerAngles.y,e.eulerAngles.z)}}),Object.defineProperty(e.prototype,"angle_y",{get:function(){return this.eulerAngles.y},set:function(t){var e=this;e.setRotationFromEuler(e.eulerAngles.x,t,e.eulerAngles.z)}}),Object.defineProperty(e.prototype,"angle_z",{get:function(){return this.eulerAngles.y},set:function(t){var e=this;e.setRotationFromEuler(e.eulerAngles.x,e.eulerAngles.y,t)}}),Object.defineProperty(e.prototype,"x",{get:function(){return this.position.x},set:function(t){this.setPosition(t,this.position.y)}}),Object.defineProperty(e.prototype,"y",{get:function(){return this.position.y},set:function(t){this.setPosition(this.position.x,t)}}),Object.defineProperty(e.prototype,"z",{get:function(){return this.position.z},set:function(t){var e=this;e.setPosition(e.position.x,e.position.y,t)}}),Object.defineProperty(e.prototype,"w",{configurable:!0,get:function(){var t,e;return null!=(t=null==(e=this.getComponent(o))?void 0:e.width)?t:0},set:function(t){(this.getComponent(o)||this.addComponent(o)).width=t}}),Object.defineProperty(e.prototype,"h",{configurable:!0,get:function(){var t,e;return null!=(t=null==(e=this.getComponent(o))?void 0:e.height)?t:0},set:function(t){(this.getComponent(o)||this.addComponent(o)).height=t}}),Object.defineProperty(e.prototype,"size",{get:function(){var t=this.getComponent(o);return new n(t.width,t.height)},set:function(t){var e=this.getComponent(o)||this.addComponent(o);e.width=t.width,e.height=t.height}}),Object.defineProperty(e.prototype,"anchor_x",{get:function(){var t,e;return null!=(t=null==(e=this.getComponent(o))?void 0:e.anchorX)?t:.5},set:function(t){(this.getComponent(o)||this.addComponent(o)).anchorX=t}}),Object.defineProperty(e.prototype,"anchor_y",{get:function(){var t,e;return null!=(t=null==(e=this.getComponent(o))?void 0:e.anchorY)?t:.5},set:function(t){(this.getComponent(o)||this.addComponent(o)).anchorY=t}}),Object.defineProperty(e.prototype,"opacity",{get:function(){var t=this.getComponent(i);if(null!=t)return t.opacity;var e=this.getComponent(r);return e?e.color.a:255},set:function(t){var e=this,o=e.getComponent(i);if(null==o){var n=e.getComponent(r);n?(this.$__color__?this.$__color__.a=t:this.$__color__=new s(n.color.r,n.color.g,n.color.b,t),n.color=this.$__color__):e.addComponent(i).opacity=t}else o.opacity=t}}),Object.defineProperty(e.prototype,"color",{get:function(){var t;return null==(t=this.getComponent(r))?void 0:t.color},set:function(t){var e=this.getComponent(r);e&&(e.color=t)}}),Object.defineProperty(e.prototype,"scale_x",{get:function(){return this.scale.x},set:function(t){var e=this;e.scale=c(t,e.scale.y,e.scale.z)}}),Object.defineProperty(e.prototype,"scale_y",{get:function(){return this.scale.y},set:function(t){var e=this;e.scale=c(e.scale.x,t,e.scale.z)}}),Object.defineProperty(e.prototype,"scale_z",{get:function(){return this.scale.z},set:function(t){var e=this;e.scale=c(e.scale.x,e.scale.y,t)}})}t._RF.pop()}}}));

System.register("chunks:///_virtual/Notify.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var n,i,e,o,r,a,l,c,s;return{setters:[function(t){n=t.applyDecoratedDescriptor,i=t.inheritsLoose,e=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,a=t._decorator,l=t.Label,c=t.Animation,s=t.Component}],execute:function(){var u,p,f,h,y,m,b;r._RF.push({},"01391Mp6X1Gn554rkzavN4K","Notify",void 0);var d=a.ccclass,v=a.property;t("Notify",(u=d("Notify"),p=v(l),f=v(c),u((m=n((y=function(t){function n(){for(var n,i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return n=t.call.apply(t,[this].concat(r))||this,e(n,"lab_content",m,o(n)),e(n,"animation",b,o(n)),n.onComplete=null,n}i(n,t);var r=n.prototype;return r.onLoad=function(){this.animation&&this.animation.on(c.EventType.FINISHED,this.onFinished,this)},r.onFinished=function(){this.node.destroy(),this.onComplete&&this.onComplete()},r.toast=function(t,n){this.lab_content.string=t},n}(s)).prototype,"lab_content",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=n(y.prototype,"animation",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=y))||h));r._RF.pop()}}}));

System.register("chunks:///_virtual/ObjectUtil.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"0448bKQYoRGLbvxhlsWjaWa","ObjectUtil",void 0);t("ObjectUtil",function(){function t(){}return t.isObject=function(t){return"[object Object]"===Object.prototype.toString.call(t)},t.deepCopy=function(t){if(null==t||"object"!=typeof t)return t;var e=null;if(t instanceof Date)return(e=new Date).setTime(t.getTime()),e;if(t instanceof Array){e=[];for(var n=0,r=t.length;n<r;n++)e[n]=this.deepCopy(t[n]);return e}if(t instanceof Object){for(var c in e={},t)t.hasOwnProperty(c)&&(e[c]=this.deepCopy(t[c]));return e}console.warn("不支持的类型："+e)},t.copy=function(t){return JSON.parse(JSON.stringify(t))},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/outline.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i,r,n,o,a,l,u,p,s,c,h;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,r=t.initializerDefineProperty,n=t.assertThisInitialized,o=t.createClass},function(t){a=t.cclegacy,l=t._decorator,u=t.Material,p=t.CCInteger,s=t.Sprite,c=t.Component,h=t.Color}],execute:function(){var y,d,f,m,C,g,b,O;a._RF.push({},"2c3f4+pZHxJp4pLYu63Efde","outline",void 0);var _=l.ccclass,I=l.property,M=l.executeInEditMode;t("OutlineComponent",(y=_("OutlineComponent"),d=I({type:u}),f=I({type:p,min:1,max:10,step:1}),y(m=M((g=e((C=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o))||this,r(e,"material",g,n(e)),r(e,"outlineWidth",b,n(e)),r(e,"outlineColor",O,n(e)),e._materialInstance=null,e}i(e,t);var a=e.prototype;return a.onLoad=function(){this.updateMaterial()},a.updateMaterial=function(){var t=this.getComponent(s);t&&this.material&&(this._materialInstance=new u,this._materialInstance.copy(this.material),this.updateMaterialProperties(),t.customMaterial=this._materialInstance)},a.updateMaterialProperties=function(){this._materialInstance&&(this._materialInstance.setProperty("outlineWidth",this.outlineWidth),this._materialInstance.setProperty("outlineColor",this.outlineColor))},o(e,[{key:"OutlineWidth",get:function(){return this.outlineWidth},set:function(t){this.outlineWidth=t,this.updateMaterialProperties()}},{key:"OutlineColor",get:function(){return this.outlineColor},set:function(t){this.outlineColor=t,this.updateMaterialProperties()}}]),e}(c)).prototype,"material",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=e(C.prototype,"outlineWidth",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),O=e(C.prototype,"outlineColor",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new h(0,0,0,255)}}),e(C.prototype,"OutlineWidth",[I],Object.getOwnPropertyDescriptor(C.prototype,"OutlineWidth"),C.prototype),e(C.prototype,"OutlineColor",[I],Object.getOwnPropertyDescriptor(C.prototype,"OutlineColor"),C.prototype),m=C))||m)||m));a._RF.pop()}}}));

System.register("chunks:///_virtual/PlatformUtil.ts",["cc"],(function(t){var i,n,r;return{setters:[function(t){i=t.cclegacy,n=t.native,r=t.sys}],execute:function(){i._RF.push({},"403e0/0zrxDfKhZhaLYipBP","PlatformUtil",void 0);t("PlatformUtil",function(){function t(){}return t.isNativeAndroid=function(){return void 0!==n&&!(!r.isNative||r.platform!==r.Platform.ANDROID)},t.isNativeIOS=function(){return void 0!==n&&!(!r.isNative||r.os!==r.OS.IOS)},t.getPlateform=function(){return this.isNativeAndroid()?"android":this.isNativeIOS()?"ios":"h5"},t}());i._RF.pop()}}}));

System.register("chunks:///_virtual/player_model.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Hope.ts","./IModel.ts","./battle_model.ts","./bag_model.ts"],(function(t){var e,n,a,r,o,i,l,u,c,s,d,f,p;return{setters:[function(t){e=t.inheritsLoose,n=t.createForOfIteratorHelperLoose,a=t.createClass},function(t){r=t.cclegacy,o=t.warn},function(t){i=t.hope},function(t){l=t.ModelDecorator,u=t.AbstractModel},function(t){c=t.COLUMN_NUM,s=t.ROW_NUM},function(t){d=t.CELL_TID_GOLD,f=t.CELL_TID_DIAMOND,p=t.CELL_TID_POWER}],execute:function(){var v;r._RF.push({},"dbbd5s7u0pEya3W6y1bIcPI","player_model",void 0);var g="player-key";t("PlayerModel",l("PlayerModel")(v=function(t){function r(){for(var e,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))||this)._player=void 0,e._cumulativeExp=null,e}e(r,t);var l=r.prototype;return l.OnInit=function(){this.data=i.storage.getJson(g,null),this.data||(this.data={exp:0,grid:this.initGridData(),mission:this.initMissionData(),bag:this.initBagData()}),o(this.data)},l.save=function(){i.storage.set(g,this.data)},l.clear=function(){i.storage.remove(g)},l.initGridData=function(){for(var t=new Array(c*s),e=0,n=0;n<s;n++)for(var a=0;a<c;a++){var r=Number(""+(a+1)+(n+1)),o=i.config.tables.TbInitMap.get(r),l={x:a,y:n,cellId:o.cell};l.active=o.active,l.ground=o.ground,t[e++]=l}return t},l.initMissionData=function(){return{mapDoing:[],mapDoneTIds:[],doing:[],doneTIds:[]}},l.initBagData=function(){return{normalStoreOpenIndex:i.config.tables.TbConfig.defaultNormalStoreOpen,otherStore:[{cellId:d,count:i.config.tables.TbConfig.defaultGold},{cellId:f,count:i.config.tables.TbConfig.defaultDiamond},{cellId:p,count:i.config.tables.TbConfig.defaultPower}],normalStore:[],factoryStore:[],materialStore:[],rewardStore:[]}},l.getRandomIdFromChances=function(t,e){var a=null!=e?e:t.reduce((function(t,e){return t+e.chance}),0);if(0===a)return o("totalProbability is 0"),null;for(var r,i=Math.random()*a,l=0,u=n(t);!(r=u()).done;){var c=r.value;if(i<=(l+=c.chance))return{id:c.id,tId:c.id,count:c.count?c.count:0}}return null},a(r,[{key:"data",get:function(){return this._player},set:function(t){this._player=t}},{key:"levelInfo",get:function(){var t=this.data.exp,e=i.config.tables.TbLevelup.getDataList(),n=e.length;if(!this._cumulativeExp){this._cumulativeExp=[];for(var a=0,r=0;r<n;r++)a+=e[r].exp,this._cumulativeExp.push(a)}for(var o=0;o<n;o++){if(t<this._cumulativeExp[o])return{level:o,currentExp:t-(o>0?this._cumulativeExp[o-1]:0),nextLevelExp:e[o].exp}}return{level:n,currentExp:t-this._cumulativeExp[n-1],nextLevelExp:0}}}]),r}(u))||v);r._RF.pop()}}}));

System.register("chunks:///_virtual/RegexUtil.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"fbcdbGedZVOyKPmmas8Td+5","RegexUtil",void 0);e("RegexUtil",function(){function e(){}return e.isDoubleWord=function(e){return/[^\x00-\xff]/.test(e)},e}());t._RF.pop()}}}));

System.register("chunks:///_virtual/RenderAlternative.ts",["./rollupPluginModLoBabelHelpers.js","cc","./RenderReactiveHandler.ts"],(function(e){var n,t,r,i,o,a,s,d,h,l,c,u,p,y,m,f;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,r=e.initializerDefineProperty,i=e.assertThisInitialized,o=e.createClass},function(e){a=e.cclegacy,s=e._decorator,d=e.Node,h=e.director,l=e.sys,c=e.UIOpacity,u=e.instantiate,p=e.UITransform,y=e.UIRenderer,m=e.Component},function(e){f=e.RenderReactiveHandler}],execute:function(){var v,g,C,x,I,R,T,w;a._RF.push({},"463bde4unVICo3Wix7DM9J8","RenderAlternative",void 0);var b=s.ccclass,D=s.property;e("default",(v=D(d),g=D({tooltip:"设置同步的间隔(秒为单位)，0就是每帧都同步，0.1就是隔0.1秒同步一次"}),b(((w=function(e){function n(){for(var n,t=arguments.length,o=new Array(t),a=0;a<t;a++)o[a]=arguments[a];return n=e.call.apply(e,[this].concat(o))||this,r(n,"renderLayer",I,i(n)),r(n,"renderZIndex",R,i(n)),r(n,"syncInv",T,i(n)),n.sIndex=0,n.proxyRender=null,n.renderCompnent=null,n.renderUiTrans=null,n.uiTrans=null,n.lastWMat4=null,n.lastLMat4=null,n.lastPos=null,n.accuTime=0,n.lastFrameTime=null,n.isAttachFrame=!1,n}t(n,e),n.isDirty=function(e){return!!this._isDirty.has(e)&&this._isDirty.get(e)},n.setDirty=function(e){e&&!this.isDirty(e)&&(this._isDirty.set(e,!0),this.sortOnce(e))},n.sortOnce=function(e){var n=this;requestAnimationFrame((function(){e.children.sort(n.sortChildren),n._isDirty.set(e,!1)}))},n.sortChildren=function(e,n){return e._rZIndex-n._rZIndex};var a=n.prototype;return a.init=function(e){return e&&(this.renderLayer=e),this.renderLayer?this.initRender():(console.warn("节点"+this.node.name+"没有设置渲染层"),null)},a.initRender=function(){return this.getRender().setParent(this.renderLayer?this.renderLayer:h.getScene().getChildByName("Canvas")),this.isAttachFrame=!0,requestAnimationFrame(this.frameUpdate.bind(this)),this.doProxy()},a.doProxy=function(){return this.proxyRender=new Proxy(this.renderCompnent,new f),this.proxyRender},a.frameUpdate=function(){var e=l.now();!this.lastFrameTime&&(this.lastFrameTime=e);var n=e-this.lastFrameTime;this.proxyRender&&(this.accuTime+=n,this.accuTime>=this.syncInv&&(this.accuTime-=this.syncInv,this.updateProp())),this.isAttachFrame&&requestAnimationFrame(this.frameUpdate.bind(this))},a.updateProp=function(){var e,t=this.renderCompnent.node,r=this.renderUiTrans;if(this.node.activeInHierarchy){t.active=!0,r.anchorX=this.uiTrans.anchorX,r.anchorY=this.uiTrans.anchorY,r.width=this.uiTrans.width,r.height=this.uiTrans.height,t.layer=this.node.layer;var i=this.getOpacity(this.node);if(255!=i)(t.getComponent(c)||t.addComponent(c)).opacity=i;var o=this.node.worldMatrix.clone(),a=null==(e=this.node.matrix)?void 0:e.clone();this.onAngleChange(),this.onScaleChange(),this.onPosChange(),this.lastLMat4=a,this.lastWMat4=o,t._rZIndex=this.zIndex,n.setDirty(this.renderLayer)}else t.active=!1},a.onDestroy=function(){this.renderCompnent.node.destroy(),this.renderCompnent=null,this.proxyRender=null},a.getOpacity=function(e){for(var n,t=((null==(n=e.getComponent(c))?void 0:n.opacity)||255)/255,r=e.parent;r!=this.renderLayer.parent&&r!=h.getScene();){var i;t*=((null==(i=r.getComponent(c))?void 0:i.opacity)||255)/255,r=r.parent}return 255*t},a.onPosChange=function(){this.renderCompnent.node.worldPosition=this.node.worldPosition.clone()},a.onAngleChange=function(){this.renderCompnent.node.worldRotation=this.node.worldRotation.clone()},a.onScaleChange=function(){this.renderCompnent.node.worldScale=this.node.worldScale.clone()},a.getRender=function(){var e=u(this.node);e.removeAllChildren(),this.uiTrans=this.node.getComponent(p),this.renderUiTrans=e.getComponent(p),this.renderCompnent=e.getComponent(y),this.node.getComponent(y).destroy();for(var n=0,t=e.components.length;n<t;++n){var r=e.components[n];r instanceof y||r instanceof p||r.destroy()}return e},o(n,[{key:"zIndex",get:function(){for(var e=this.renderZIndex+.01*this.sIndex,t=this.node.parent;t!=(null==(r=this.renderLayer)?void 0:r.parent)&&t!=h.getScene();){var r,i=t.getComponent(n);if(i){e+=i.zIndex+1;break}t=t.parent}return e}}]),n}(m))._isDirty=new WeakMap,I=n((x=w).prototype,"renderLayer",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=n(x.prototype,"renderZIndex",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),T=n(x.prototype,"syncInv",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.01}}),C=x))||C));a._RF.pop()}}}));

System.register("chunks:///_virtual/RenderReactiveHandler.ts",["cc"],(function(e){var t,n;return{setters:[function(e){t=e.cclegacy,n=e.Component}],execute:function(){e({hasChanged:i,hasOwn:c,isObject:function(e){return null!==e&&"object"==typeof e}}),t._RF.push({},"e07f3vvCO9I86tK3C8QN3Xe","RenderReactiveHandler",void 0);var r=Object.prototype.hasOwnProperty;function c(e,t){return e instanceof n?t in e:r.call(e,t)}function i(e,t){return"object"===typeof e||!Object.is(e,t)}e("RenderReactiveHandler",function(){function e(e){this.reactiveTarget=null,this.reactiveTarget=e}var t=e.prototype;return t.set=function(e,t,n,r){var a=Reflect.get(e,t),o=c(e,t),u=Reflect.set(e,t,n);if(!o||i(n,a)){if("angle"==t||"scale"==t||"position"==t||"_renderFlag"==t)return;"activeInHierarchy"==t&&console.warn(e),this.reactiveTarget&&Reflect.set(this.reactiveTarget,t,n)}return u},t.apply=function(){console.warn(arguments)},t.get=function(e,t,n){return"__raw__"===t?e:"__isReactive__"===t||Reflect.get(e,t)},t.deleteProperty=function(e,t){c(e,t),e[t];return Reflect.deleteProperty(e,t)},e}());t._RF.pop()}}}));

System.register("chunks:///_virtual/ResLoader.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Hope.ts"],(function(e){var n,t,r,s,a,o,u,l,i,d,c,f,p,h,g;return{setters:[function(e){n=e.asyncToGenerator,t=e.regeneratorRuntime},function(e){r=e.cclegacy,s=e.assetManager,a=e.error,o=e.warn,u=e.Asset,l=e.js,i=e.resources,d=e.instantiate,c=e.Prefab,f=e.AudioClip,p=e.SpriteFrame,h=e.Texture2D},function(e){g=e.hope}],execute:function(){r._RF.push({},"00c65grRa5NNZcXPXWNseXg","ResLoader",void 0);var v=e("ResLoader",function(){function e(){this.defaultBundleName="resources"}var r=e.prototype;return r.loadRemote=function(e){var n=null,t=null;2==(arguments.length<=1?0:arguments.length-1)?(n=arguments.length<=1?void 0:arguments[1],t=arguments.length<=2?void 0:arguments[2]):t=arguments.length<=1?void 0:arguments[1],s.loadRemote(e,n,t)},r.loadBundle=function(e,n){return new Promise((function(t,r){s.loadBundle(e,{version:n},(function(e,n){if(e)return a(e);t(n)}))}))},r.load=function(e,n,t,r,s){var a=null;"string"==typeof n||n instanceof Array?(a=this.parseLoadResArgs(n,t,r,s)).bundle=e:(a=this.parseLoadResArgs(e,n,t,r)).bundle=this.defaultBundleName,this.loadByArgs(a)},r.loadAsync=function(e,n,t){var r=this;return new Promise((function(s,a){r.load(e,n,t,(function(e,n){e&&o(e.message),s(n)}))}))},r.loadDir=function(e,n,t,r,s){var a=null;"string"==typeof n?(a=this.parseLoadResArgs(n,t,r,s)).bundle=e:(a=this.parseLoadResArgs(e,n,t,r)).bundle=this.defaultBundleName,a.dir=a.paths,this.loadByArgs(a)},r.release=function(e,n){null==n&&(n=this.defaultBundleName);var t=s.getBundle(n);if(t){var r=t.get(e);r&&this.releasePrefabtDepsRecursively(r)}},r.releaseDir=function(e,n){var t=this;null==n&&(n=this.defaultBundleName);var r=s.getBundle(n);if(r){var a=r.getDirWithPath(e);a&&a.map((function(e){t.releasePrefabtDepsRecursively(e.uuid)})),""==e&&"resources"!=n&&s.removeBundle(r)}},r.releasePrefabtDepsRecursively=function(e){if(e instanceof u)e.decRef();else{var n=s.assets.get(e);n&&n.decRef()}},r.get=function(e,n,t){return null==t&&(t=this.defaultBundleName),s.getBundle(t).get(e,n)},r.dump=function(){s.assets.forEach((function(e,n){console.log(s.assets.get(n))})),console.log("当前资源总数:"+s.assets.count)},r.parseLoadResArgs=function(e,n,t,r){var s=e,a=n,o=t,i=r;if(void 0===r){var d=l.isChildClassOf(n,u);t?(i=t,d&&(o=null)):void 0!==t||d||(i=n,o=null,a=null),void 0===t||d||(o=n,a=null)}return{paths:s,type:a,onProgress:o,onComplete:i}},r.loadByBundleAndArgs=function(e,n){n.dir?e.loadDir(n.paths,n.type,n.onProgress,n.onComplete):(n.paths,e.load(n.paths,n.type,n.onProgress,n.onComplete))},r.loadByArgs=function(e){var n=this;if(e.bundle)if(s.bundles.has(e.bundle)){var t=s.bundles.get(e.bundle);this.loadByBundleAndArgs(t,e)}else s.loadBundle(e.bundle,(function(t,r){t||n.loadByBundleAndArgs(r,e)}));else this.loadByBundleAndArgs(i,e)},r.instantiate=function(e){return e?d(e):(a("[Res.instantiate] original is null"),null)},r.loadAsset=function(e,r,s){void 0===s&&(s=g.res.defaultBundleName);var a=e;return r===p?a+="/spriteFrame":r===h&&(a+="/texture"),new Promise(n(t().mark((function e(n,r){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:g.res.load(s,a,(function(e,t){e?(o("外部资源包"+s+"，路径"+a+",加载失败",e),n(null)):n(t)}));case 1:case"end":return e.stop()}}),e)}))))},r.loadPrefab=function(e,n){return this.loadAsset(e,c,n)},r.loadAudio=function(e,n){return this.loadAsset(e,f,n)},r.loadTexture=function(){var e=n(t().mark((function e(n,r){var s;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadAsset(n,p,r);case 2:if(null!=(s=e.sent)){e.next=7;break}return e.next=6,this.loadAsset("common/texture/outside",p,r);case 6:s=e.sent;case 7:return e.abrupt("return",s);case 8:case"end":return e.stop()}}),e,this)})));return function(n,t){return e.apply(this,arguments)}}(),r.releaseAsset=function(e,n,t){var r=e;n===p?r+="/spriteFrame":n===h&&(r+="/texture"),g.res.release(r,t)},e}());e("resLoader",new v);r._RF.pop()}}}));

System.register("chunks:///_virtual/ResSpine.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Hope.ts"],(function(e){var t,n,s,r,a,i,o,l,u;return{setters:[function(e){t=e.inheritsLoose,n=e.createClass,s=e.asyncToGenerator,r=e.regeneratorRuntime},function(e){a=e.cclegacy,i=e._decorator,o=e.sp,l=e.Component},function(e){u=e.hope}],execute:function(){var c;a._RF.push({},"099f5/Yt2NPPp8tUGIAlAxf","ResSpine",void 0);var p=i.menu,f=i.disallowMultiple,h=i.requireComponent,k=i.ccclass;e("default",k(c=f(c=h(o.Skeleton)(c=p("Framework/UI组件/ResSpine")(c=function(e){function a(){for(var t,n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(t=e.call.apply(e,[this].concat(s))||this)._asset=null,t._url="",t._spine=null,t}t(a,e);var i=a.prototype;return i.onDestroy=function(){var e;null==(e=this._asset)||e.decRef()},i.setSkeletonData=function(){var e=s(r().mark((function e(t){var n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._url=t,e.t0=u.res.get(t,o.SkeletonData),e.t0){e.next=6;break}return e.next=5,u.res.loadAsync(t,o.SkeletonData);case 5:e.t0=e.sent;case 6:(n=e.t0)instanceof o.SkeletonData&&this._url===t&&(this.skeletonData=n);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n(a,[{key:"spine",get:function(){return this._spine||(this._spine=this.getComponent(o.Skeleton)),this._spine}},{key:"skeletonData",get:function(){return this.spine.skeletonData},set:function(e){var t;this.isValid&&this.spine.skeletonData!==e&&(null==e||e.addRef(),null==(t=this._asset)||t.decRef(),this._asset=e,this.spine.skeletonData=e)}}]),a}(l))||c)||c)||c)||c);a._RF.pop()}}}));

System.register("chunks:///_virtual/ResSprite.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Hope.ts"],(function(e){var t,r,n,s,i,a,o,u,p;return{setters:[function(e){t=e.inheritsLoose,r=e.createClass,n=e.asyncToGenerator,s=e.regeneratorRuntime},function(e){i=e.cclegacy,a=e._decorator,o=e.Sprite,u=e.Component},function(e){p=e.hope}],execute:function(){var c;i._RF.push({},"2de00SI9QBBUZu5dD6uBNH8","ResSprite",void 0);var l=a.menu,f=a.disallowMultiple,h=a.requireComponent,m=a.ccclass;e("default",m(c=f(c=h(o)(c=l("Framework/UI组件/ResSprite")(c=function(e){function i(){for(var t,r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(t=e.call.apply(e,[this].concat(n))||this)._asset=null,t._sprite=null,t}t(i,e);var a=i.prototype;return a.onDestroy=function(){var e;null==(e=this._asset)||e.decRef()},a.setSpriteFrame=function(){var e=n(s().mark((function e(t){var r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.res.loadTexture(t);case 2:r=e.sent,this.spriteFrame=r;case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),i.replaceSpriteFrame=function(){var e=n(s().mark((function e(t,r){var n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t.getComponent(i))||(n=t.addComponent(i)),e.next=4,n.setSpriteFrame(r);case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),r(i,[{key:"sprite",get:function(){return this._sprite||(this._sprite=this.getComponent(o)),this._sprite}},{key:"spriteFrame",get:function(){return this.sprite.spriteFrame},set:function(e){var t;this.isValid&&this.sprite.spriteFrame!==e&&(null==e||e.addRef(),null==(t=this._asset)||t.decRef(),this._asset=e,this.sprite.spriteFrame=e)}}]),i}(u))||c)||c)||c)||c);i._RF.pop()}}}));

System.register("chunks:///_virtual/root_game.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Root.ts","./Hope.ts","./config_game_ui.ts"],(function(o){var t,e,n,i,r,c,u,s;return{setters:[function(o){t=o.inheritsLoose},function(o){e=o.cclegacy,n=o._decorator,i=o.profiler},function(o){r=o.Root},function(o){c=o.hope},function(o){u=o.UIConfigData,s=o.UIID}],execute:function(){var a;e._RF.push({},"85d5bSW1KJLspxaOeFAbC3/","root_game",void 0);var p=n.ccclass;n.property,o("RootGame",p("RootGame")(a=function(o){function e(){return o.apply(this,arguments)||this}return t(e,o),e.prototype.initGui=function(){c.res.loadDir("common"),c.gui.init(u),c.gui.open(s.Map),i.hideStats()},e}(r))||a);e._RF.pop()}}}));

System.register("chunks:///_virtual/Root.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Hope.ts","./GUI.ts","./EventMessage.ts","./schema.ts","./LayerManager.ts","./TimerManager.ts","./AudioManager.ts","./StorageManager.ts","./MessageManager.ts","./ResLoader.ts","./GameQueryConfig.ts","./GameConfig.ts"],(function(e){var n,t,o,i,s,r,a,u,c,f,l,g,d,p,h,m,b,E,y,v,w,M,R,_,C,G,A,N,T,L,S;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,o=e.initializerDefineProperty,i=e.assertThisInitialized,s=e.asyncToGenerator,r=e.regeneratorRuntime},function(e){a=e.cclegacy,u=e._decorator,c=e.Node,f=e.game,l=e.Game,g=e.sys,d=e.screen,p=e.director,h=e.warn,m=e.log,b=e.Component,E=e.JsonAsset},function(e){y=e.version,v=e.hope},function(e){w=e.GUI},function(e){M=e.EventMessage},function(e){R=e.Tables},function(e){_=e.LayerManager},function(e){C=e.TimerManager},function(e){G=e.AudioManager},function(e){A=e.StorageManager},function(e){N=e.message},function(e){T=e.resLoader},function(e){L=e.GameQueryConfig},function(e){S=e.GameConfig}],execute:function(){var H,I,D,x,z;a._RF.push({},"32094/zvrxD7J8I/jCzlCkQ","Root",void 0);var k=u.property,P=!1;e("Root",(H=k({type:c,tooltip:"游戏层"}),I=k({type:c,tooltip:"界面层"}),x=n((D=function(e){function n(){for(var n,t=arguments.length,s=new Array(t),r=0;r<t;r++)s[r]=arguments[r];return n=e.call.apply(e,[this].concat(s))||this,o(n,"game",x,i(n)),o(n,"gui",z,i(n)),n.persistRootNode=null,n}t(n,e);var a=n.prototype;return a.onLoad=function(){P||(P=!0,console.log("Hope Framework v"+y),this.enabled=!1,this.loadConfig())},a.loadConfig=function(){var e=s(r().mark((function e(){var n,t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.persistRootNode=new c("PersistRootNode"),p.addPersistRootNode(this.persistRootNode),v.res=T,n="config",e.next=6,v.res.loadAsync(n,E);case 6:if(!(t=e.sent)){e.next=24;break}return v.config.query=new L,v.config.game=new S(t),e.next=12,this.loadTable();case 12:v.storage=new A,v.message=N,v.audio=this.persistRootNode.addComponent(G),v.audio.load(),v.timer=this.persistRootNode.addComponent(C),v.gui=new _(this.gui),this.enabled=!0,this.init(),this.run(),v.res.release(n),e.next=25;break;case 24:this.loadConfig();case 25:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),a.update=function(e){},a.initGui=function(){},a.initEcsSystem=function(){},a.run=function(){},a.init=function(){this.initGui(),f.on(l.EVENT_SHOW,this.onShow,this),f.on(l.EVENT_HIDE,this.onHide,this),this.gui.addComponent(w),0==g.isMobile&&(d.on("window-resize",(function(){v.message.dispatchEvent(M.GAME_RESIZE)}),this),d.on("fullscreen-change",(function(){v.message.dispatchEvent(M.GAME_FULL_SCREEN)}),this)),d.on("orientation-change",(function(){v.message.dispatchEvent(M.GAME_ORIENTATION)}),this)},a.onShow=function(){v.timer.load(),v.audio.resumeAll(),p.resume(),f.resume(),v.message.dispatchEvent(M.GAME_SHOW)},a.onHide=function(){v.timer.save(),v.audio.pauseAll(),p.pause(),f.pause(),v.message.dispatchEvent(M.GAME_HIDE)},a.loadTable=function(){return new Promise((function(e,n){var t="config/table";v.res.loadDir(t,(function(n,o){h(o,v.res.get("config/table/item_tbitem")),o.forEach((function(e){v.config.__map_tables_bin.set(e.name,new Uint8Array(e.buffer().slice(0,e.buffer().byteLength)))})),v.config.tables=new R(v.config.loaderBin.bind(v.config)),m(v.config.tables.TbConfig),v.res.releaseDir(t),e()}))}))},n}(b)).prototype,"game",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=n(D.prototype,"gui",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D));a._RF.pop()}}}));

System.register("chunks:///_virtual/RoundRectMask.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i,a,n,r,s,o,u,p,c,h,d,l;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,a=t.initializerDefineProperty,n=t.assertThisInitialized,r=t.createClass},function(t){s=t.cclegacy,o=t._decorator,u=t.Mask,p=t.CCFloat,c=t.UITransform,h=t.game,d=t.Game,l=t.Component}],execute:function(){var k,m,f,R,v,y,g,C,M;s._RF.push({},"da0f8CBQkZDqaekNuERqKjA","RoundRectMask",void 0);var _=o.ccclass,w=o.property,D=o.executeInEditMode,b=o.disallowMultiple,E=o.requireComponent,T=o.menu;t("RoundRectMask",(k=_("RoundRectMask"),m=D(!0),f=b(!0),R=E(u),v=T("渲染组件/圆角遮罩"),y=w({type:p,tooltip:"圆角半径:\n0-1之间为最小边长比例值, \n>1为具体像素值"}),k(g=m(g=f(g=R(g=v((M=e((C=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r))||this,a(e,"propRadius",M,n(e)),e.mask=null,e}i(e,t);var s=e.prototype;return s.onEnable=function(){this.mask=this.getComponent(u),this.updateMask(this.radius)},s.updateMask=function(t){var e=t>=0?t:0;if(e<1){var i=this.node.getComponent(c);e=Math.min((null==i?void 0:i.width)||0,(null==i?void 0:i.width)||0)*e}this.mask&&(this.mask.radius=e,this.mask.onDraw=this.onDraw.bind(this.mask),this.mask._updateGraphics=this._updateGraphics.bind(this.mask),this.mask.type=u.Type.GRAPHICS_RECT)},s._updateGraphics=function(){var t=this._graphics;t&&this.onDraw(t)},s.onDraw=function(t){var e=this.node.getComponent(c);t.clear();var i=e.width,a=e.height,n=-i*e.anchorX,r=-a*e.anchorY;t.roundRect(n,r,i,a,this.radius||0),h.renderType===d.RENDER_TYPE_CANVAS?t.stroke():t.fill()},r(e,[{key:"radius",get:function(){return this.propRadius},set:function(t){this.propRadius=t,this.updateMask(t)}}]),e}(l)).prototype,"propRadius",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 50}}),g=C))||g)||g)||g)||g)||g));s._RF.pop()}}}));

System.register("chunks:///_virtual/schema.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i,a,n;return{setters:[function(t){e=t.inheritsLoose,i=t.createForOfIteratorHelperLoose,a=t.createClass},function(t){n=t.cclegacy}],execute:function(){var r,o,s,l,d,h;t({base:void 0,cell:void 0,ft:void 0,init:void 0,item:void 0,test:void 0}),n._RF.push({},"f4ae3Vwoi5M5qu3jOi60lmP","schema",void 0),o=r||(r=t("item",{})),s=function(t){return t[t.WHITE=1]="WHITE",t[t.BLUE=2]="BLUE",t[t.PURPLE=3]="PURPLE",t[t.RED=4]="RED",t}({}),o.EQuality=s,d=l||(l=t("test",{})),h=function(t){return t[t.WRITE=1]="WRITE",t[t.READ=2]="READ",t[t.TRUNCATE=4]="TRUNCATE",t[t.NEW=8]="NEW",t[t.READ_WRITE=3]="READ_WRITE",t}({}),d.AccessFlag=h;var u,v,c,f,p,_,C,b,g,R,M,m,w,T,y,L,S,I,k,N,z,F;t("vector2",function(){function t(t){this.x=void 0,this.y=void 0,this.x=t.ReadFloat(),this.y=t.ReadFloat()}return t.prototype.resolve=function(t){},t}()),t("vector3",function(){function t(t){this.x=void 0,this.y=void 0,this.z=void 0,this.x=t.ReadFloat(),this.y=t.ReadFloat(),this.z=t.ReadFloat()}return t.prototype.resolve=function(t){},t}()),t("vector4",function(){function t(t){this.x=void 0,this.y=void 0,this.z=void 0,this.w=void 0,this.x=t.ReadFloat(),this.y=t.ReadFloat(),this.z=t.ReadFloat(),this.w=t.ReadFloat()}return t.prototype.resolve=function(t){},t}());u=r||(r=t("item",{})),v=function(){function t(t){this.id=void 0,this.num=void 0,this.id=t.ReadInt(),this.num=t.ReadInt()}return t.prototype.resolve=function(t){},t}(),u.ItemExchange=v,c=l||(l=t("test",{})),f=function(){function t(t){this.x1=void 0,this.x2=void 0,this.x3=void 0,this.x4=void 0,this.x1=t.ReadInt(),this.x2=t.ReadString(),this.x3=t.ReadInt(),this.x4=t.ReadFloat()}return t.prototype.resolve=function(t){},t}(),c.TestExcelBean1=f,_=p||(p=t("base",{})),C=function(){function t(t){this.mix=void 0,this.max=void 0,this.mix=t.ReadInt(),this.max=t.ReadInt()}return t.prototype.resolve=function(t){},t}(),_.Range=C,b=l||(l=t("test",{})),g=function(){function t(t){}return t.constructorFrom=function(t){switch(t.ReadInt()){case 2131829196:return new l.Circle(t);case-31893773:return new l.Rectangle(t);default:throw new Error}},t.prototype.resolve=function(t){},t}(),b.Shape=g,R=l||(l=t("test",{})),M=function(t){function i(e){var i;return(i=t.call(this,e)||this).radius=void 0,i.radius=e.ReadFloat(),i}return e(i,t),i.prototype.resolve=function(e){t.prototype.resolve.call(this,e)},i}(l.Shape),R.Circle=M,m=l||(l=t("test",{})),w=function(t){function i(e){var i;return(i=t.call(this,e)||this).width=void 0,i.height=void 0,i.width=e.ReadFloat(),i.height=e.ReadFloat(),i}return e(i,t),i.prototype.resolve=function(e){t.prototype.resolve.call(this,e)},i}(l.Shape),m.Rectangle=w,y=T||(T=t("cell",{})),L=function(){function t(t){this.id=void 0,this.id=t.ReadString()}return t.constructorFrom=function(t){switch(t.ReadInt()){case 1042714401:return new T.CellCount(t);case-2042652830:return new T.CellChance(t);case 1856565685:return new T.CellCountChance(t);default:throw new Error}},t.prototype.resolve=function(t){},t}(),y.CellValue=L,S=T||(T=t("cell",{})),I=function(t){function i(e){var i;return(i=t.call(this,e)||this).count=void 0,i.count=e.ReadInt(),i}return e(i,t),i.prototype.resolve=function(e){t.prototype.resolve.call(this,e)},i}(T.CellValue),S.CellCount=I,k=T||(T=t("cell",{})),N=function(t){function i(e){var i;return(i=t.call(this,e)||this).chance=void 0,i.chance=e.ReadInt(),i}return e(i,t),i.prototype.resolve=function(e){t.prototype.resolve.call(this,e)},i}(T.CellValue),k.CellChance=N,z=T||(T=t("cell",{})),F=function(t){function i(e){var i;return(i=t.call(this,e)||this).count=void 0,i.chance=void 0,i.count=e.ReadInt(),i.chance=e.ReadInt(),i}return e(i,t),i.prototype.resolve=function(e){t.prototype.resolve.call(this,e)},i}(T.CellValue),z.CellCountChance=F;var D,E,x,B,G,P,O,A,W,U,V,H,j,q,Q,J,K,X,Y,Z,$,tt,et,it,at,nt,rt,ot,st=t("NormalStore",function(){function t(t){this.id=void 0,this.needCell=void 0,this.id=t.ReadInt(),t.ReadBool()?this.needCell=new T.CellCount(t):this.needCell=null}return t.prototype.resolve=function(t){var e;null==(e=this.needCell)||e.resolve(t)},t}()),lt=t("FactoryStore",function(){function t(t){this.id=void 0,this.storeCell=void 0,this.storeCell_ref=void 0,this.needLevel=void 0,this.needCell=void 0,this.needCell_ref=void 0,this.id=t.ReadInt(),this.storeCell=t.ReadString(),this.needLevel=t.ReadInt(),this.needCell=t.ReadString()}return t.prototype.resolve=function(t){this.storeCell_ref=t.TbCell.get(this.storeCell),this.needCell_ref=t.TbCell.get(this.needCell)},t}()),dt=t("Config",function(){function t(t){this.defaultPower=void 0,this.defaultRecoverTime=void 0,this.defaultLimit=void 0,this.defaultLevel=void 0,this.defaultExp=void 0,this.defaultGold=void 0,this.defaultDiamond=void 0,this.defaultNormalStoreOpen=void 0,this.defaultPower=t.ReadInt(),this.defaultRecoverTime=t.ReadInt(),this.defaultLimit=t.ReadInt(),this.defaultLevel=t.ReadInt(),this.defaultExp=t.ReadInt(),this.defaultGold=t.ReadInt(),this.defaultDiamond=t.ReadInt(),this.defaultNormalStoreOpen=t.ReadInt()}return t.prototype.resolve=function(t){},t}()),ht=t("InitMap",function(){function t(t){this.id=void 0,this.active=void 0,this.ground=void 0,this.cell=void 0,this.cell_ref=void 0,this.openLevel=void 0,this.id=t.ReadInt(),this.active=t.ReadBool(),this.ground=t.ReadBool(),this.cell=t.ReadString(),this.openLevel=t.ReadInt()}return t.prototype.resolve=function(t){this.cell_ref=t.TbCell.get(this.cell)},t}()),ut=t("MaterialStore",function(){function t(t){this.id=void 0,this.storeCell=void 0,this.storeCell_ref=void 0,this.id=t.ReadInt(),this.storeCell=t.ReadString()}return t.prototype.resolve=function(t){this.storeCell_ref=t.TbCell.get(this.storeCell)},t}()),vt=t("Npc",function(){function t(t){this.id=void 0,this.name=void 0,this.res=void 0,this.id=t.ReadString(),this.name=t.ReadString(),this.res=t.ReadString()}return t.prototype.resolve=function(t){},t}()),ct=t("Levelup",function(){function t(t){this.id=void 0,this.exp=void 0,this.reward=void 0,this.id=t.ReadInt(),this.exp=t.ReadInt();var e=Math.min(t.ReadSize(),t.Size);this.reward=[];for(var i=0;i<e;i++){var a;a=new T.CellCount(t),this.reward.push(a)}}return t.prototype.resolve=function(t){for(var e,a=i(this.reward);!(e=a()).done;){var n=e.value;null==n||n.resolve(t)}},t}()),ft=t("CellBubble",function(){function t(t){this.id=void 0,this.name=void 0,this.bubbleReachTime=void 0,this.bubbleReachCellId=void 0,this.bubbleReachCellId_ref=void 0,this.bubbleNotReachCellChance=void 0,this.bubbleDiamondCount=void 0,this.bubbleIsAd=void 0,this.id=t.ReadString(),this.name=t.ReadString(),this.bubbleReachTime=t.ReadInt(),this.bubbleReachCellId=t.ReadString();var e=Math.min(t.ReadSize(),t.Size);this.bubbleNotReachCellChance=[];for(var i=0;i<e;i++){var a;a=new T.CellChance(t),this.bubbleNotReachCellChance.push(a)}this.bubbleDiamondCount=t.ReadInt(),this.bubbleIsAd=t.ReadBool()}return t.prototype.resolve=function(t){this.bubbleReachCellId_ref=t.TbCell.get(this.bubbleReachCellId);for(var e,a=i(this.bubbleNotReachCellChance);!(e=a()).done;){var n=e.value;null==n||n.resolve(t)}},t}()),pt=t("GameMapBuild",function(){function t(t){this.id=void 0,this.name=void 0,this.map=void 0,this.map_ref=void 0,this.level=void 0,this.procress=void 0,this.needCell=void 0,this.reward=void 0,this.rewardExp=void 0,this.id=t.ReadString(),this.name=t.ReadString(),this.map=t.ReadString(),this.level=t.ReadInt(),this.procress=t.ReadInt();var e=Math.min(t.ReadSize(),t.Size);this.needCell=[];for(var i=0;i<e;i++){var a;a=new T.CellCount(t),this.needCell.push(a)}t.ReadBool()?this.reward=new T.CellCount(t):this.reward=null,this.rewardExp=t.ReadInt()}return t.prototype.resolve=function(t){var e;this.map_ref=t.TbGameMap.get(this.map);for(var a,n=i(this.needCell);!(a=n()).done;){var r=a.value;null==r||r.resolve(t)}null==(e=this.reward)||e.resolve(t)},t}()),_t=t("CellFactory",function(){function t(t){this.id=void 0,this.name=void 0,this.res=void 0,this.level=void 0,this.repeat=void 0,this.factoryCountChance=void 0,this.subPower=void 0,this.cdChance=void 0,this.specialFeature=void 0,this.resetCellId=void 0,this.resetCellId_ref=void 0,this.buyCdCount=void 0,this.startCd=void 0,this.makeCellChance=void 0,this.id=t.ReadString(),this.name=t.ReadString(),this.res=t.ReadString(),this.level=t.ReadString(),this.repeat=t.ReadBool();var e=Math.min(t.ReadSize(),t.Size);this.factoryCountChance=[];for(var i=0;i<e;i++){var a;a=new T.CellChance(t),this.factoryCountChance.push(a)}this.subPower=t.ReadInt();var n=Math.min(t.ReadSize(),t.Size);this.cdChance=[];for(var r=0;r<n;r++){var o;o=new T.CellChance(t),this.cdChance.push(o)}this.specialFeature=t.ReadString(),this.resetCellId=t.ReadString(),this.buyCdCount=t.ReadInt(),this.startCd=t.ReadInt();var s=Math.min(t.ReadSize(),t.Size);this.makeCellChance=[];for(var l=0;l<s;l++){var d;d=new T.CellChance(t),this.makeCellChance.push(d)}}return t.prototype.resolve=function(t){for(var e,a=i(this.factoryCountChance);!(e=a()).done;){var n=e.value;null==n||n.resolve(t)}for(var r,o=i(this.cdChance);!(r=o()).done;){var s=r.value;null==s||s.resolve(t)}this.resetCellId_ref=t.TbCell.get(this.resetCellId);for(var l,d=i(this.makeCellChance);!(l=d()).done;){var h=l.value;null==h||h.resolve(t)}},t}()),Ct=t("GameMap",function(){function t(t){this.id=void 0,this.name=void 0,this.res=void 0,this.unlockLevel=void 0,this.maxLevel=void 0,this.unlockCell=void 0,this.reward=void 0,this.rewardExp=void 0,this.id=t.ReadString(),this.name=t.ReadString(),this.res=t.ReadString(),this.unlockLevel=t.ReadInt(),this.maxLevel=t.ReadInt(),t.ReadBool()?this.unlockCell=new T.CellCount(t):this.unlockCell=null;var e=Math.min(t.ReadSize(),t.Size);this.reward=[];for(var i=0;i<e;i++){var a;a=new T.CellCount(t),this.reward.push(a)}this.rewardExp=t.ReadInt()}return t.prototype.resolve=function(t){var e;null==(e=this.unlockCell)||e.resolve(t);for(var a,n=i(this.reward);!(a=n()).done;){var r=a.value;null==r||r.resolve(t)}},t}()),bt=t("Mission",function(){function t(t){this.id=void 0,this.name=void 0,this.npc=void 0,this.npc_ref=void 0,this.type=void 0,this.unlockBuild=void 0,this.unlockLevel=void 0,this.unlockOnlyOne=void 0,this.unlockMission=void 0,this.unlockCell=void 0,this.rewardNeedCell1=void 0,this.rewardNeedCell2=void 0,this.rewardNeedCell3=void 0,this.reward1=void 0,this.reward2=void 0,this.id=t.ReadString(),this.name=t.ReadString(),this.npc=t.ReadString(),this.type=t.ReadString(),this.unlockBuild=t.ReadString(),this.unlockLevel=new p.Range(t),this.unlockOnlyOne=t.ReadBool();var e=Math.min(t.ReadSize(),t.Size);this.unlockMission=[];for(var i=0;i<e;i++){var a;a=t.ReadString(),this.unlockMission.push(a)}var n=Math.min(t.ReadSize(),t.Size);this.unlockCell=[];for(var r=0;r<n;r++){var o;o=new T.CellCount(t),this.unlockCell.push(o)}var s=Math.min(t.ReadSize(),t.Size);this.rewardNeedCell1=[];for(var l=0;l<s;l++){var d;d=new T.CellChance(t),this.rewardNeedCell1.push(d)}var h=Math.min(t.ReadSize(),t.Size);this.rewardNeedCell2=[];for(var u=0;u<h;u++){var v;v=new T.CellChance(t),this.rewardNeedCell2.push(v)}var c=Math.min(t.ReadSize(),t.Size);this.rewardNeedCell3=[];for(var f=0;f<c;f++){var _;_=new T.CellChance(t),this.rewardNeedCell3.push(_)}var C=Math.min(t.ReadSize(),t.Size);this.reward1=[];for(var b=0;b<C;b++){var g;g=new T.CellCountChance(t),this.reward1.push(g)}var R=Math.min(t.ReadSize(),t.Size);this.reward2=[];for(var M=0;M<R;M++){var m;m=new T.CellCountChance(t),this.reward2.push(m)}}return t.prototype.resolve=function(t){var e;this.npc_ref=t.TbNpc.get(this.npc),null==(e=this.unlockLevel)||e.resolve(t);for(var a,n=i(this.unlockCell);!(a=n()).done;){var r=a.value;null==r||r.resolve(t)}for(var o,s=i(this.rewardNeedCell1);!(o=s()).done;){var l=o.value;null==l||l.resolve(t)}for(var d,h=i(this.rewardNeedCell2);!(d=h()).done;){var u=d.value;null==u||u.resolve(t)}for(var v,c=i(this.rewardNeedCell3);!(v=c()).done;){var f=v.value;null==f||f.resolve(t)}for(var p,_=i(this.reward1);!(p=_()).done;){var C=p.value;null==C||C.resolve(t)}for(var b,g=i(this.reward2);!(b=g()).done;){var R=b.value;null==R||R.resolve(t)}},t}()),gt=t("Cell",function(){function t(t){this.id=void 0,this.name=void 0,this.res=void 0,this.type=void 0,this.factoryId=void 0,this.factoryId_ref=void 0,this.bubbleId=void 0,this.bubbleId_ref=void 0,this.mergeCell1Chance=void 0,this.mergeCell2Chance=void 0,this.specialMergeCellId=void 0,this.specialMergeCellId_ref=void 0,this.level=void 0,this.upgradeCellId=void 0,this.upgradeCellId_ref=void 0,this.sellCell=void 0,this.rewardCell=void 0,this.shopPrice=void 0,this.id=t.ReadString(),this.name=t.ReadString(),this.res=t.ReadString(),this.type=t.ReadString(),this.factoryId=t.ReadString(),this.bubbleId=t.ReadString();var e=Math.min(t.ReadSize(),t.Size);this.mergeCell1Chance=[];for(var i=0;i<e;i++){var a;a=new T.CellChance(t),this.mergeCell1Chance.push(a)}var n=Math.min(t.ReadSize(),t.Size);this.mergeCell2Chance=[];for(var r=0;r<n;r++){var o;o=new T.CellChance(t),this.mergeCell2Chance.push(o)}this.specialMergeCellId=t.ReadString(),this.level=t.ReadInt(),this.upgradeCellId=t.ReadString();var s=Math.min(t.ReadSize(),t.Size);this.sellCell=[];for(var l=0;l<s;l++){var d;d=new T.CellCount(t),this.sellCell.push(d)}var h=Math.min(t.ReadSize(),t.Size);this.rewardCell=[];for(var u=0;u<h;u++){var v;v=new T.CellCount(t),this.rewardCell.push(v)}this.shopPrice=t.ReadInt()}return t.prototype.resolve=function(t){this.factoryId_ref=t.TbCellFactory.get(this.factoryId),this.bubbleId_ref=t.TbCellBubble.get(this.bubbleId);for(var e,a=i(this.mergeCell1Chance);!(e=a()).done;){var n=e.value;null==n||n.resolve(t)}for(var r,o=i(this.mergeCell2Chance);!(r=o()).done;){var s=r.value;null==s||s.resolve(t)}this.specialMergeCellId_ref=t.TbCell.get(this.specialMergeCellId),this.upgradeCellId_ref=t.TbCell.get(this.upgradeCellId);for(var l,d=i(this.sellCell);!(l=d()).done;){var h=l.value;null==h||h.resolve(t)}for(var u,v=i(this.rewardCell);!(u=v()).done;){var c=u.value;null==c||c.resolve(t)}},t}());E=D||(D=t("init",{})),x=function(){function t(t){this._dataMap=void 0,this._dataList=void 0,this._dataMap=new Map,this._dataList=[];for(var e=t.ReadInt();e>0;e--){var i;i=new ht(t),this._dataList.push(i),this._dataMap.set(i.id,i)}}var e=t.prototype;return e.getDataMap=function(){return this._dataMap},e.getDataList=function(){return this._dataList},e.get=function(t){return this._dataMap.get(t)},e.resolve=function(t){for(var e,a=i(this._dataList);!(e=a()).done;)e.value.resolve(t)},t}(),E.TbInitMap=x,B=T||(T=t("cell",{})),G=function(){function t(t){this._dataMap=void 0,this._dataList=void 0,this._dataMap=new Map,this._dataList=[];for(var e=t.ReadInt();e>0;e--){var i;i=new _t(t),this._dataList.push(i),this._dataMap.set(i.id,i)}}var e=t.prototype;return e.getDataMap=function(){return this._dataMap},e.getDataList=function(){return this._dataList},e.get=function(t){return this._dataMap.get(t)},e.resolve=function(t){for(var e,a=i(this._dataList);!(e=a()).done;)e.value.resolve(t)},t}(),B.TbCellFactory=G,P=T||(T=t("cell",{})),O=function(){function t(t){this._dataMap=void 0,this._dataList=void 0,this._dataMap=new Map,this._dataList=[];for(var e=t.ReadInt();e>0;e--){var i;i=new gt(t),this._dataList.push(i),this._dataMap.set(i.id,i)}}var e=t.prototype;return e.getDataMap=function(){return this._dataMap},e.getDataList=function(){return this._dataList},e.get=function(t){return this._dataMap.get(t)},e.resolve=function(t){for(var e,a=i(this._dataList);!(e=a()).done;)e.value.resolve(t)},t}(),P.TbCell=O,A=T||(T=t("cell",{})),W=function(){function t(t){this._dataMap=void 0,this._dataList=void 0,this._dataMap=new Map,this._dataList=[];for(var e=t.ReadInt();e>0;e--){var i;i=new ft(t),this._dataList.push(i),this._dataMap.set(i.id,i)}}var e=t.prototype;return e.getDataMap=function(){return this._dataMap},e.getDataList=function(){return this._dataList},e.get=function(t){return this._dataMap.get(t)},e.resolve=function(t){for(var e,a=i(this._dataList);!(e=a()).done;)e.value.resolve(t)},t}(),A.TbCellBubble=W,U=D||(D=t("init",{})),V=function(){function t(t){if(this._data=void 0,1!=t.ReadInt())throw new Error("table mode=one, but size != 1");this._data=new dt(t)}var e=t.prototype;return e.getData=function(){return this._data},e.resolve=function(t){this._data.resolve(t)},a(t,[{key:"defaultPower",get:function(){return this._data.defaultPower}},{key:"defaultRecoverTime",get:function(){return this._data.defaultRecoverTime}},{key:"defaultLimit",get:function(){return this._data.defaultLimit}},{key:"defaultLevel",get:function(){return this._data.defaultLevel}},{key:"defaultExp",get:function(){return this._data.defaultExp}},{key:"defaultGold",get:function(){return this._data.defaultGold}},{key:"defaultDiamond",get:function(){return this._data.defaultDiamond}},{key:"defaultNormalStoreOpen",get:function(){return this._data.defaultNormalStoreOpen}}]),t}(),U.TbConfig=V,j=H||(H=t("ft",{})),q=function(){function t(t){this._dataMap=void 0,this._dataList=void 0,this._dataMap=new Map,this._dataList=[];for(var e=t.ReadInt();e>0;e--){var i;i=new bt(t),this._dataList.push(i),this._dataMap.set(i.id,i)}}var e=t.prototype;return e.getDataMap=function(){return this._dataMap},e.getDataList=function(){return this._dataList},e.get=function(t){return this._dataMap.get(t)},e.resolve=function(t){for(var e,a=i(this._dataList);!(e=a()).done;)e.value.resolve(t)},t}(),j.TbMission=q,Q=H||(H=t("ft",{})),J=function(){function t(t){this._dataMap=void 0,this._dataList=void 0,this._dataMap=new Map,this._dataList=[];for(var e=t.ReadInt();e>0;e--){var i;i=new vt(t),this._dataList.push(i),this._dataMap.set(i.id,i)}}var e=t.prototype;return e.getDataMap=function(){return this._dataMap},e.getDataList=function(){return this._dataList},e.get=function(t){return this._dataMap.get(t)},e.resolve=function(t){for(var e,a=i(this._dataList);!(e=a()).done;)e.value.resolve(t)},t}(),Q.TbNpc=J,K=H||(H=t("ft",{})),X=function(){function t(t){this._dataMap=void 0,this._dataList=void 0,this._dataMap=new Map,this._dataList=[];for(var e=t.ReadInt();e>0;e--){var i;i=new ct(t),this._dataList.push(i),this._dataMap.set(i.id,i)}}var e=t.prototype;return e.getDataMap=function(){return this._dataMap},e.getDataList=function(){return this._dataList},e.get=function(t){return this._dataMap.get(t)},e.resolve=function(t){for(var e,a=i(this._dataList);!(e=a()).done;)e.value.resolve(t)},t}(),K.TbLevelup=X,Y=H||(H=t("ft",{})),Z=function(){function t(t){this._dataMap=void 0,this._dataList=void 0,this._dataMap=new Map,this._dataList=[];for(var e=t.ReadInt();e>0;e--){var i;i=new lt(t),this._dataList.push(i),this._dataMap.set(i.id,i)}}var e=t.prototype;return e.getDataMap=function(){return this._dataMap},e.getDataList=function(){return this._dataList},e.get=function(t){return this._dataMap.get(t)},e.resolve=function(t){for(var e,a=i(this._dataList);!(e=a()).done;)e.value.resolve(t)},t}(),Y.TbFactoryStore=Z,$=H||(H=t("ft",{})),tt=function(){function t(t){this._dataMap=void 0,this._dataList=void 0,this._dataMap=new Map,this._dataList=[];for(var e=t.ReadInt();e>0;e--){var i;i=new st(t),this._dataList.push(i),this._dataMap.set(i.id,i)}}var e=t.prototype;return e.getDataMap=function(){return this._dataMap},e.getDataList=function(){return this._dataList},e.get=function(t){return this._dataMap.get(t)},e.resolve=function(t){for(var e,a=i(this._dataList);!(e=a()).done;)e.value.resolve(t)},t}(),$.TbNormalStore=tt,et=H||(H=t("ft",{})),it=function(){function t(t){this._dataMap=void 0,this._dataList=void 0,this._dataMap=new Map,this._dataList=[];for(var e=t.ReadInt();e>0;e--){var i;i=new ut(t),this._dataList.push(i),this._dataMap.set(i.id,i)}}var e=t.prototype;return e.getDataMap=function(){return this._dataMap},e.getDataList=function(){return this._dataList},e.get=function(t){return this._dataMap.get(t)},e.resolve=function(t){for(var e,a=i(this._dataList);!(e=a()).done;)e.value.resolve(t)},t}(),et.TbMaterialStore=it,at=H||(H=t("ft",{})),nt=function(){function t(t){this._dataMap=void 0,this._dataList=void 0,this._dataMap=new Map,this._dataList=[];for(var e=t.ReadInt();e>0;e--){var i;i=new Ct(t),this._dataList.push(i),this._dataMap.set(i.id,i)}}var e=t.prototype;return e.getDataMap=function(){return this._dataMap},e.getDataList=function(){return this._dataList},e.get=function(t){return this._dataMap.get(t)},e.resolve=function(t){for(var e,a=i(this._dataList);!(e=a()).done;)e.value.resolve(t)},t}(),at.TbGameMap=nt,rt=H||(H=t("ft",{})),ot=function(){function t(t){this._dataMap=void 0,this._dataList=void 0,this._dataMap=new Map,this._dataList=[];for(var e=t.ReadInt();e>0;e--){var i;i=new pt(t),this._dataList.push(i),this._dataMap.set(i.id,i)}}var e=t.prototype;return e.getDataMap=function(){return this._dataMap},e.getDataList=function(){return this._dataList},e.get=function(t){return this._dataMap.get(t)},e.resolve=function(t){for(var e,a=i(this._dataList);!(e=a()).done;)e.value.resolve(t)},t}(),rt.TbGameMapBuild=ot;t("Tables",function(){function t(t){this._TbInitMap=void 0,this._TbCellFactory=void 0,this._TbCell=void 0,this._TbCellBubble=void 0,this._TbConfig=void 0,this._TbMission=void 0,this._TbNpc=void 0,this._TbLevelup=void 0,this._TbFactoryStore=void 0,this._TbNormalStore=void 0,this._TbMaterialStore=void 0,this._TbGameMap=void 0,this._TbGameMapBuild=void 0,this._TbInitMap=new D.TbInitMap(t("init_tbinitmap")),this._TbCellFactory=new T.TbCellFactory(t("cell_tbcellfactory")),this._TbCell=new T.TbCell(t("cell_tbcell")),this._TbCellBubble=new T.TbCellBubble(t("cell_tbcellbubble")),this._TbConfig=new D.TbConfig(t("init_tbconfig")),this._TbMission=new H.TbMission(t("ft_tbmission")),this._TbNpc=new H.TbNpc(t("ft_tbnpc")),this._TbLevelup=new H.TbLevelup(t("ft_tblevelup")),this._TbFactoryStore=new H.TbFactoryStore(t("ft_tbfactorystore")),this._TbNormalStore=new H.TbNormalStore(t("ft_tbnormalstore")),this._TbMaterialStore=new H.TbMaterialStore(t("ft_tbmaterialstore")),this._TbGameMap=new H.TbGameMap(t("ft_tbgamemap")),this._TbGameMapBuild=new H.TbGameMapBuild(t("ft_tbgamemapbuild")),this._TbInitMap.resolve(this),this._TbCellFactory.resolve(this),this._TbCell.resolve(this),this._TbCellBubble.resolve(this),this._TbConfig.resolve(this),this._TbMission.resolve(this),this._TbNpc.resolve(this),this._TbLevelup.resolve(this),this._TbFactoryStore.resolve(this),this._TbNormalStore.resolve(this),this._TbMaterialStore.resolve(this),this._TbGameMap.resolve(this),this._TbGameMapBuild.resolve(this)}return t.getTableNames=function(){var t=[];return t.push("init_tbinitmap"),t.push("cell_tbcellfactory"),t.push("cell_tbcell"),t.push("cell_tbcellbubble"),t.push("init_tbconfig"),t.push("ft_tbmission"),t.push("ft_tbnpc"),t.push("ft_tblevelup"),t.push("ft_tbfactorystore"),t.push("ft_tbnormalstore"),t.push("ft_tbmaterialstore"),t.push("ft_tbgamemap"),t.push("ft_tbgamemapbuild"),t},a(t,[{key:"TbInitMap",get:function(){return this._TbInitMap}},{key:"TbCellFactory",get:function(){return this._TbCellFactory}},{key:"TbCell",get:function(){return this._TbCell}},{key:"TbCellBubble",get:function(){return this._TbCellBubble}},{key:"TbConfig",get:function(){return this._TbConfig}},{key:"TbMission",get:function(){return this._TbMission}},{key:"TbNpc",get:function(){return this._TbNpc}},{key:"TbLevelup",get:function(){return this._TbLevelup}},{key:"TbFactoryStore",get:function(){return this._TbFactoryStore}},{key:"TbNormalStore",get:function(){return this._TbNormalStore}},{key:"TbMaterialStore",get:function(){return this._TbMaterialStore}},{key:"TbGameMap",get:function(){return this._TbGameMap}},{key:"TbGameMapBuild",get:function(){return this._TbGameMapBuild}}]),t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/StorageManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./env"],(function(e){var t,n,r,o;return{setters:[function(e){t=e.createClass},function(e){n=e.cclegacy,r=e.sys},function(e){o=e.PREVIEW}],execute:function(){n._RF.push({},"ed226gLF85Oyr+WhA9TJZLX","StorageManager",void 0);e("StorageManager",function(){function e(){this._key=null,this._iv=null,this._id=null}var n=e.prototype;return n.init=function(e,t){},n.setUser=function(e){this._id=e},n.set=function(e,t){var n=this.getKey(e);if(null!=e){if(this.encrypted,null==t)return console.warn("存储的值为空，则直接移除该存储"),void this.remove(e);if("function"!=typeof t){if("object"==typeof t)try{t=JSON.stringify(t)}catch(e){return void console.error("解析失败，str = "+t)}else"number"==typeof t&&(t+="");this.encrypted&&null!=this._key&&this._iv,r.localStorage.setItem(n,t)}else console.error("储存的值不能为方法")}else console.error("存储的key不能为空")},n.get=function(e,t){if(void 0===t&&(t=""),null==e)return console.error("存储的key不能为空"),null;e=this.getKey(e),this.encrypted;var n=r.localStorage.getItem(e);return null!=n&&""!==n&&this.encrypted&&null!=this._key&&this._iv,null===n?t:n},n.getNumber=function(e,t){void 0===t&&(t=0);var n=this.get(e);return"0"==n?Number(n):Number(n)||t},n.getBoolean=function(e){return"true"===this.get(e).toLowerCase()},n.getJson=function(e,t){var n=this.get(e);return n&&JSON.parse(n)||t},n.remove=function(e){if(null!=e){var t=this.getKey(e);this.encrypted,r.localStorage.removeItem(t)}else console.error("存储的key不能为空")},n.clear=function(){r.localStorage.clear()},n.getKey=function(e){return null==this._id||""==this._id?e:this._id+"_"+e},t(e,[{key:"encrypted",get:function(){return!o}}]),e}());n._RF.pop()}}}));

System.register("chunks:///_virtual/StringUtil.ts",["cc"],(function(t){var r;return{setters:[function(t){r=t.cclegacy}],execute:function(){r._RF.push({},"3cf043w7FtFZIlI5YF6g+gx","StringUtil",void 0);var e=function(t){return t[t.S=0]="S",t[t.M=1]="M",t[t.H=2]="H",t[t.D=3]="D",t}(e||{});t("StringUtil",function(){function t(){}return t.guid=function(){for(var t="",r=1;r<=32;r++){t+=Math.floor(16*Math.random()).toString(16),8!=r&&12!=r&&16!=r&&20!=r||(t+="-")}return t},t.numberTotPermil=function(t){return t.toLocaleString()},t.numberToThousand=function(t,r){void 0===r&&(r=2);var e=1e3;if(t<e)return t.toString();var n=Math.floor(Math.log(t)/Math.log(e));return(t/Math.pow(e,n)).toFixed(r)+["","K","M","G"][n]},t.numberToTenThousand=function(t,r){void 0===r&&(r=2);var e=1e4;if(t<e)return t.toString();var n=Math.floor(Math.log(t)/Math.log(e));return(t/Math.pow(e,n)).toFixed(r)+["","万","亿","万亿"][n]},t.format=function(t,r){var e={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds()};for(var n in/(y+)/.test(r)&&(r=r.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length))),e)new RegExp("("+n+")").test(r)&&(r=r.replace(RegExp.$1,1==RegExp.$1.length?e[n]:("00"+e[n]).substr((""+e[n]).length)));return r},t.stringToArray1=function(t){return""==t?[]:t.split(",")},t.stringToArray2=function(t){return""==t?[]:t.split("|")},t.stringToArray3=function(t){return""==t?[]:t.split(":")},t.stringToArray4=function(t){return""==t?[]:t.split(";")},t.sub=function(t,r,e){void 0===e&&(e=!1);var n=/[^\x00-\xff]/g;if(t.replace(n,"mm").length<=r)return t;for(var o=Math.floor(r/2);o<t.length;o++)if(t.substr(0,o).replace(n,"mm").length>=r)return e?t.substr(0,o)+"...":t.substr(0,o);return t},t.stringLen=function(t){for(var r=0,e=t.length,n=-1,o=0;o<e;o++)r+=(n=t.charCodeAt(o))>=0&&n<=128?1:2;return r},t.IsEmpty=function(t){return null==t||null==t||0==t.length},t.substitute=function(t){if(null==t)return"";for(var r=arguments.length,e=new Array(r>1?r-1:0),n=1;n<r;n++)e[n-1]=arguments[n];var o,i=e.length;1==i&&e[0]instanceof Array?i=(o=e[0]).length:o=e;for(var a=0;a<i;a++)t=t.replace(new RegExp("\\{"+a+"\\}","g"),o[a]);return t},t.formatString=function(t){for(var r=t,e=arguments.length,n=new Array(e>1?e-1:0),o=1;o<e;o++)n[o-1]=arguments[o];if(1===n.length&&"[object Object]"===Object.prototype.toString.call(n[0])){for(var i in n[0])if(n[0].hasOwnProperty(i)){var a=new RegExp("%{"+i+"}","g");r=r.replace(a,""+n[0][i])}}else n.forEach((function(t){r=r.replace(/%\{.*?\}/,""+t)}));return r},t.formatTimeString=function(t,r){void 0===r&&(r="%{hh}:%{mm}:%{ss}");var n=Math.floor(t),o=Math.floor(n/60),i=Math.floor(n/3600),a=Math.floor(n/86400),u=e.S,g="";"string"==typeof r?(g=r,/%\{d+\}/.test(r)?u=e.D:/%\{h+\}/.test(r)?u=e.H:/%\{m+\}/.test(r)&&(u=e.M)):a>0?(u=e.D,g=r.D):i>0?(u=e.H,g=r.H):o>0?(u=e.M,g=r.M):(u=e.S,g=r.S),u>e.S&&(n%=60),u>e.M&&(o%=60),u>e.H&&(i%=24);var s={dd:a<10?"0"+a:""+a,d:""+a,hh:i<10?"0"+i:""+i,h:""+i,mm:o<10?"0"+o:""+o,m:""+o,ss:n<10?"0"+n:""+n,s:""+n};return g=this.formatString(g,s)},t.formatDateString=function(t,r,e){void 0===r&&(r="%{YYYY}-%{MM}-%{dd} %{hh}:%{mm}:%{ss}"),void 0===e&&(e=!1);var n=t instanceof Date?t:new Date(t),o=e?n.getUTCFullYear():n.getFullYear(),i=e?n.getUTCMonth()+1:n.getMonth()+1,a=e?n.getUTCDate():n.getDate(),u=e?n.getUTCHours():n.getHours(),g=e?n.getUTCMinutes():n.getMinutes(),s=e?n.getUTCSeconds():n.getSeconds(),l={YYYY:""+o,YY:o%100<10?"0"+o%100:""+o%100,MM:i<10?"0"+i:""+i,M:""+i,dd:a<10?"0"+a:""+a,d:""+a,hh:u<10?"0"+u:""+u,h:""+u,mm:g<10?"0"+g:""+g,m:""+g,ss:s<10?"0"+s:""+s,s:""+s};return this.formatString(r,l)},t}());r._RF.pop()}}}));

System.register("chunks:///_virtual/Timer.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,s;return{setters:[function(e){t=e.createClass},function(e){s=e.cclegacy}],execute:function(){s._RF.push({},"6021fct1uhJsImEuhdFWC0f","Timer",void 0);e("Timer",function(){function e(e){void 0===e&&(e=0),this.callback=null,this._elapsedTime=0,this._step=-1,this.step=e}var s=e.prototype;return s.update=function(e){return!(this.step<=0)&&(this._elapsedTime+=e,this._elapsedTime>=this._step&&(this._elapsedTime-=this._step,null==(t=this.callback)||t.call(this),!0));var t},s.reset=function(){this._elapsedTime=0},s.stop=function(){this._elapsedTime=0,this.step=-1},t(e,[{key:"elapsedTime",get:function(){return this._elapsedTime}},{key:"step",get:function(){return this._step},set:function(e){this._step=e,this._elapsedTime=0}},{key:"progress",get:function(){return this._elapsedTime/this._step}}]),e}());s._RF.pop()}}}));

System.register("chunks:///_virtual/TimerManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./StringUtil.ts","./Timer.ts"],(function(e){var t,i,n,s,r,o;return{setters:[function(e){t=e.inheritsLoose},function(e){i=e.cclegacy,n=e.game,s=e.Component},function(e){r=e.StringUtil},function(e){o=e.Timer}],execute:function(){i._RF.push({},"73600VLsIBLOKhOhd7td4P8","TimerManager",void 0);e("TimerManager",function(e){function i(){for(var t,i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];return(t=e.call.apply(e,[this].concat(n))||this).times={},t.date_s=new Date,t.date_s_start=new Date,t.polymeric_s=0,t.date_c=new Date,t}t(i,e);var s=i.prototype;return s.update=function(e){for(var t in this.times){var i=this.times[t];i.timer.update(e)&&i.object[i.field]>0&&(i.object[i.field]--,0==i.object[i.field]?this.onTimerComplete(i):i.onSecond&&i.onSecond.call(i.object))}},s.onTimerComplete=function(e){e.onComplete&&e.onComplete.call(e.object),e.event&&this.node.dispatchEvent(e.event),delete this.times[e.id]},s.register=function(e,t,i,n){var s=new o;s.step=1;var a={};return a.id=r.guid(),a.timer=s,a.object=e,a.field=t,a.onSecond=i,a.onComplete=n,this.times[a.id]=a,a.id},s.unRegister=function(e){this.times[e]&&delete this.times[e]},s.setServerTime=function(e){this.polymeric_s=this.getTime(),this.date_s_start.setTime(e)},s.getServerTime=function(){return this.date_s_start.getTime()+this.getTime()-this.polymeric_s},s.getServerDate=function(){return this.date_s.setTime(this.getServerTime()),this.date_s},s.getClientTime=function(){return Date.now()},s.getClientDate=function(){return this.date_c.setTime(this.getClientTime()),this.date_c},s.getTime=function(){return n.totalTime},s.save=function(){for(var e in this.times)this.times[e].startTime=this.getTime()},s.load=function(){for(var e in this.times){var t=Math.floor((this.getTime()-(this.times[e].startTime||this.getTime()))/1e3),i=this.times[e];i.object[i.field]=i.object[i.field]-t,i.object[i.field]<=0?(i.object[i.field]=0,this.onTimerComplete(i)):this.times[e].startTime=null}},i}(s));i._RF.pop()}}}));

System.register("chunks:///_virtual/TimeUtils.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n,r;return{setters:[function(e){t=e.asyncToGenerator,n=e.regeneratorRuntime},function(e){r=e.cclegacy}],execute:function(){r._RF.push({},"20a73hl4xNF/7JXPEFruX4d","TimeUtils",void 0);e("TimeUtil",function(){function e(){}return e.daysBetween=function(e,t){null!=t&&null!=t||(t=+new Date);var n=new Date(e).toLocaleDateString(),r=new Date(t).toLocaleDateString(),u=new Date(n).getTime(),i=new Date(r).getTime();return Math.abs(u-i)/864e5},e.secsBetween=function(e,t){return null!=t&&null!=t||(t=+new Date),Math.abs(t-e)/1e3},e.sleep=function(){var e=t(n().mark((function e(t){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){setTimeout((function(){e()}),t)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e}());r._RF.pop()}}}));

System.register("chunks:///_virtual/TipsManager.ts",["cc","./config_game_ui.ts","./Hope.ts"],(function(e){var n,o,t,r,c;return{setters:[function(e){n=e.cclegacy,o=e.tween,t=e.Vec3},function(e){r=e.UIID},function(e){c=e.hope}],execute:function(){n._RF.push({},"ae8ebmU379E+rrSb8sjlfIy","TipsManager",void 0);e("TipsManager",function(){function e(){}var n=e.prototype;return n.alert=function(e,n,o,t,f){var i={title:o,content:e,okWord:t,cancelWord:f,okFunc:function(){n&&n()},needCancel:!0};c.gui.open(r.Confirm,i,this.getPopCommonEffect())},n.getPopCommonEffect=function(e){var n={onAdded:function(e,n){e.setScale(.1,.1,.1),o(e).to(.2,{scale:new t(1,1,1)}).start()},onBeforeRemove:function(e,n){o(e).to(.2,{scale:new t(.1,.1,.1)}).call(n).start()}};if(e){if(e&&e.onAdded){var r=e.onAdded;e.onAdded=function(e,o){r(e,o),n.onAdded(e,o)}}if(e&&e.onBeforeRemove){var c=e.onBeforeRemove;e.onBeforeRemove=function(e,o){c(e,o),n.onBeforeRemove(e,o)}}return e}return n},e}());n._RF.pop()}}}));

System.register("chunks:///_virtual/TwoDimensionalArray.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var i,n;return{setters:[function(t){i=t.createClass},function(t){n=t.cclegacy}],execute:function(){n._RF.push({},"c66b7AKnzlAiL6i/kRhV37T","TwoDimensionalArray",void 0);t("TwoDimensionalArray",function(){function t(t,i,n){if(this.width=void 0,this.height=void 0,this._data=void 0,n.length!==t*i)throw new Error("Initial data length does not match width * height");this.width=t,this.height=i,this._data=n}var n=t.prototype;return n.getIndex=function(t,i){if(t<0||t>=this.width||i<0||i>=this.height)throw new Error("Index ("+t+", "+i+") is out of bounds.");return i*this.width+t},n.setCell=function(t,i,n){var e=this.getIndex(t,i);this.data[e]=n},n.getCell=function(t,i){var n=this.getIndex(t,i);return this.data[n]},n.swap=function(t,i,n,e){var h=this.getIndex(t,i),a=this.getIndex(n,e),s=[this.data[a],this.data[h]];this.data[h]=s[0],this.data[a]=s[1]},n.isValidPosition=function(t,i){return t>=0&&t<this.width&&i>=0&&i<this.height},n.getData=function(){return this._data},i(t,[{key:"data",get:function(){return this._data}}]),t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/UIButton.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Hope.ts"],(function(t){var e,o,i,n,r,u,c,a,l,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){r=t.cclegacy,u=t._decorator,c=t.AudioClip,a=t.game,l=t.Button},function(t){p=t.hope}],execute:function(){var f,s,h,d,y,_,m,b,g,v;r._RF.push({},"86cefAWukVE77lEwgfFdYeD","UIButton",void 0);var E=u.ccclass,T=u.property,B=u.menu;t("default",(f=E("UIButton"),s=B("ui/button/UIButton"),h=T({tooltip:"每次触发间隔"}),d=T({tooltip:"是否只触发一次"}),y=T({tooltip:"触摸音效",type:c}),f(_=s((b=e((m=function(t){function e(){for(var e,o=arguments.length,r=new Array(o),u=0;u<o;u++)r[u]=arguments[u];return e=t.call.apply(t,[this].concat(r))||this,i(e,"interval",b,n(e)),i(e,"once",g,n(e)),i(e,"effect",v,n(e)),e._touchCount=0,e._touchEndTime=0,e}o(e,t);var r=e.prototype;return r._onTouchEnded=function(e){if(this.once){if(this._touchCount>0)return void(e.propagationStopped=!0);this._touchCount++}this._touchEndTime&&a.totalTime-this._touchEndTime<this.interval?e.propagationStopped=!0:(this._touchEndTime=a.totalTime,t.prototype._onTouchEnded.call(this,e)),this.effect&&p.audio.playEffect(this.effect)},r.onDestroy=function(){this.effect&&p.audio.releaseEffect(this.effect)},e}(l)).prototype,"interval",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 500}}),g=e(m.prototype,"once",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),v=e(m.prototype,"effect",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=m))||_)||_));r._RF.pop()}}}));

System.register("chunks:///_virtual/UIMap.ts",["cc"],(function(n){var t;return{setters:[function(n){t=n.cclegacy}],execute:function(){t._RF.push({},"1bd03ggtItIIajoqd0I4VGL","UIMap",void 0);var i=function(){this.id=void 0,this.pid=void 0,this.parent=null,this.child=[],this.name=void 0,this.panel=void 0};n("UIMap",function(){function n(){this.manager=void 0,this.nodes=new Map}var t=n.prototype;return t.init=function(n,t){var e=this;for(var a in this.manager=n,t){var r=t[a],s=new i;s.id=parseInt(a),s.pid=r.parent,s.name=r.name,s.panel=r.panel,this.nodes.set(s.id,s)}this.nodes.forEach((function(n,t){n.parent=e.nodes.get(n.pid),n.parent&&n.parent.child.push(n)}))},t.pathFinding=function(n,t){var i=this,e=this.nodes.get(n),a=this.nodes.get(t),r=this.findUp(e),s=this.findUp(a);return r.forEach((function(n){i.manager.remove(n.id,!0)})),s.forEach((function(n){i.manager.open(n.id)})),{paths_close:r,paths_open:s}},t.findUp=function(n){for(var t=[],i=n;null!=i.parent;)t.push(i),i=i.parent;return t},t.release=function(){this.nodes.clear()},n}());t._RF.pop()}}}));

System.register("chunks:///_virtual/Vec3Util.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MathUtil.ts"],(function(n){var e,r,t,u,a;return{setters:[function(n){e=n.createClass},function(n){r=n.cclegacy,t=n.Vec3,u=n.Mat4},function(n){a=n.MathUtil}],execute:function(){r._RF.push({},"505c8KALIZLD52eA3YYGotg","Vec3Util",void 0);n("Vec3Util",function(){function n(){}return n.progress=function(n,e,r){var u=new t;return u.x=a.progress(n.x,e.x,r),u.y=a.progress(n.y,e.y,r),u.z=a.progress(n.z,e.z,r),u},n.add=function(n,e){var r=new t;return t.add(r,n,e),r},n.sub=function(n,e){var r=new t;return t.subtract(r,n,e),r},n.mul=function(n,e){var r=new t;return t.multiplyScalar(r,n,e),r},n.div=function(n,e){var r=new t;return r.x=n.x/e,r.y=n.y/e,r.z=n.z/e,r},n.equals=function(n,e){return n.x==e.x&&n.y==e.y&&n.z==e.z},n.magnitude=function(n){return n.length()},n.normalize=function(n){return new t(n.x,n.y,n.z).normalize()},n.direction=function(n,e){var r=new t;return t.subtract(r,e,n),r.normalize()},n.distance=function(n,e){return t.distance(n,e)},n.lerp=function(n,e,r){return this.bezierOne(r,n,e)},n.slerp=function(n,e,r){if(r<=0)return n;if(r>=1)return e;var u=this.rotateTo(n,e,t.angle(n,e)/Math.PI*180*r),a=e.length()*r+n.length()*(1-r);return u.normalize().multiplyScalar(a)},n.rotateTo=function(n,e,r){if(0==t.angle(n,e))return e;var a=new t;t.cross(a,n,e),a.normalize();var l=r*Math.PI/180,i=new u;return i.rotate(l,a),new t(n.x*i.m00+n.y*i.m04+n.z*i.m08,n.x*i.m01+n.y*i.m05+n.z*i.m09,n.x*i.m02+n.y*i.m06+n.z*i.m10)},n.bezierOne=function(n,e,r){n>1?n=1:n<0&&(n=0);var t=e.clone(),u=r.clone();return t.multiplyScalar(1-n).add(u.multiplyScalar(n))},n.bezierTwo=function(n,e,r,u){n>1?n=1:n<0&&(n=0);var a=1-n,l=n*n,i=e.clone(),o=new t,c=r.clone(),y=u.clone();return o.add(i.multiplyScalar(a*a)),o.add(c.multiplyScalar(2*a*n)),o.add(y.multiplyScalar(l)),o},n.bezierThree=function(n,e,r,t,u){n>1?n=1:n<0&&(n=0);var a=1-n,l=a*a,i=l*a,o=n*n,c=o*n,y=e.clone(),f=e.clone(),s=r.clone(),d=t.clone(),m=u.clone();return f.add(y.multiplyScalar(i)),f.add(s.multiplyScalar(3*l*n)),f.add(d.multiplyScalar(3*a*o)),f.add(m.multiplyScalar(c)),f},n.dot=function(n,e){var r=n,t=e;return r.x*t.x+r.y*t.y+r.z*t.z},n.cross=function(n,e){var r=new t(1,0,0),u=new t(0,1,0),a=new t(0,0,1),l=new t(n.x,n.y,n.z),i=new t(e.x,e.y,e.z),o=r.multiplyScalar(l.y*i.z-i.y*l.z),c=u.multiplyScalar(i.x*l.z-l.x*i.z),y=a.multiplyScalar(l.x*i.y-i.x*l.y);return o.add(c).add(y)},n.angle=function(n,e){var r=this.dot(n.clone().normalize(),e.clone().normalize());return Math.acos(r)/Math.PI*180*Math.sign(r)},n.dirAngle=function(e,r){var t=n.cross(e,r);return n.angle(e,r)*Math.sign(n.dot(t.normalize(),n.cross(r.normalize(),e.normalize())))},e(n,null,[{key:"x",get:function(){return new t(1,0,0)}},{key:"y",get:function(){return new t(0,1,0)}},{key:"z",get:function(){return new t(0,0,1)}},{key:"left",get:function(){return new t(-1,0,0)}},{key:"right",get:function(){return new t(1,0,0)}},{key:"up",get:function(){return new t(0,1,0)}},{key:"down",get:function(){return new t(0,-1,0)}},{key:"forward",get:function(){return new t(0,0,1)}},{key:"back",get:function(){return new t(0,0,-1)}},{key:"one",get:function(){return new t(1,1,1)}},{key:"zero",get:function(){return new t(0,0,0)}}]),n}());r._RF.pop()}}}));

System.register("chunks:///_virtual/ViewUtil.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Hope.ts"],(function(e){var n,t,o,i,a,r,l,u,c,f,d,s,p,g;return{setters:[function(e){n=e.asyncToGenerator,t=e.regeneratorRuntime},function(e){o=e.cclegacy,i=e.UITransform,a=e.v3,r=e.Size,l=e.Prefab,u=e.instantiate,c=e.Animation,f=e.AnimationClip,d=e.Button,s=e.warn,p=e.log},function(e){g=e.hope}],execute:function(){o._RF.push({},"2cd37X6yBNEN5VY43zku/kv","ViewUtil",void 0);e("ViewUtil",function(){function e(){}return e.nodeTreeInfoLite=function(n,t){for(var o=t||new Map,i=n.children,a=0;a<i.length;a++){var r=i[a];r.name.indexOf(" ")<0&&o.set(r.name,r),e.nodeTreeInfoLite(r,o)}return o},e.findNodes=function(n,t,o){for(var i=o||[],a=t.children,r=0;r<a.length;r++){var l=a[r].name;n.test(l)&&i.push(a[r]),e.findNodes(n,a[r],i)}return i},e.calculateASpaceToBSpacePos=function(e,n,t){var o=e.getComponent(i).convertToWorldSpaceAR(t);return n.getComponent(i).convertToNodeSpaceAR(o)},e.calculateScreenPosToSpacePos=function(e,n){var t=e.getUILocation(),o=a(t.x,t.y);return n.getComponent(i).convertToNodeSpaceAR(o)},e.uniformScale=function(e,n,t,o){var i,a=t/e,l=o/n;return i=a<l?a:l,new r(Math.floor(e*i),Math.floor(n*i))},e.createPrefabNode=function(e){var n=g.res.get(e,l);return u(n)},e.createPrefabNodeAsync=function(e){var o=this;return new Promise(n(t().mark((function n(i,a){return t().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:g.res.load(e,l,(function(n,t){if(n)console.error("名为【"+e+"】的资源加载失败");else{var a=o.createPrefabNode(e);i(a)}}));case 1:case"end":return n.stop()}}),n)}))))},e.addNodeAnimation=function(e,n,t,o){if(void 0===t&&(t=!0),void 0===o&&(o=!1),n&&n.isValid){var i=n.getComponent(c);null==i&&(i=n.addComponent(c));var a=g.res.get(e,f);if(a&&!(t&&i.getState(a.name)&&i.getState(a.name).isPlaying)){if(o)return i.defaultClip=a,void i.play();i.once(c.EventType.FINISHED,(function(){i.defaultClip&&i.play()}),this),i.getState(a.name)||i.createState(a,a.name),i.play(a.name)}}},e.isPointCollidingWithNode=function(e,n){return!!n&&n.getComponent(i).getBoundingBoxToWorld().contains(e)},e.isNodeCollidingWithNode=function(e,n){if(!e||!n)return!1;var t=e.getComponent(i).getBoundingBoxToWorld(),o=n.getComponent(i).getBoundingBoxToWorld();return t.intersects(o)},e.registerButtonClick=function(e,n,t){e.node.on(d.EventType.CLICK,n,t)},e.unregisterButtonClick=function(e,n,t){e.node.off(d.EventType.CLICK,n,t)},e.playNodeAnimation=function(e,n,t){var o,i;if(void 0===t&&(t=!0),e&&e.isValid){var a=e.getComponent(c);if(null!=a){var r=a.clips;if(r.length<=0)s("播放"+n+"，节点上Animation组件的clips为空");else{var l="boolean"==typeof n&&n,u="string"==typeof n?n:l&&(null==(o=a.defaultClip)?void 0:o.name)||"";if(u){var f=r.find((function(e){return e.name===u}));if(f)if(t&&null!=(i=a.getState(f.name))&&i.isPlaying)s("播放中："+u);else{if(l)return a.defaultClip!==f&&(a.defaultClip=f),p("isDefaultClip播放参数："+n+"，播放："+a.defaultClip.name),void a.play();a.once(c.EventType.FINISHED,(function(){a.defaultClip&&a.play()})),a.getState(f.name)||a.createState(f,f.name),a.play(f.name)}else s("播放clip没有找到："+u,r)}else s("播放参数没有："+n,r)}}else s("播放"+n+"，节点上没有Animation组件")}},e}());o._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});